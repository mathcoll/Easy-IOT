{"version":3,"sources":["../public/js/t6app-main.js","../public/js/resources/t6-objects.js","../public/js/resources/t6-flows.js","../public/js/resources/t6-snippets.js","../public/js/resources/t6-dashboards.js","../public/js/resources/t6-rules.js","../public/js/resources/t6-mqtts.js","../public/js/resources/t6-sources.js","../public/js/resources/snippets/valueDisplay.js","../public/js/resources/snippets/graphDisplay.js","../public/js/resources/snippets/flowGraph.js","../public/js/resources/snippets/simpleClock.js","../public/js/resources/snippets/simpleRow.js","../public/js/resources/snippets/cardChart.js","../public/js/resources/snippets/sparkline.js"],"names":["Tawk_API","touchStartPoint","touchMovePoint","app","api_version","debug","baseUrl","baseUrlCdn","bearer","auth","isLogged","autologin","RateLimit","Limit","Remaining","Used","date_format","cardMaxChars","cookieconsent","refreshExpiresInSeconds","toastDuration","itemsSize","objects","flows","snippets","dashboards","mqtts","rules","sources","itemsPage","currentSection","tawktoid","gtm","applicationServerKey","registration","defaultPageTitle","sectionsPageTitles","index","profile","object","object_add","flow","flow_add","dashboard","dashboard_add","snippet","snippet_add","rule","rule_add","mqtt","mqtt_add","source","source_add","settings","signin","login","signup","forgot-password","reset-password","status","terms","docs","users-list","compatible-devices","openSourceLicenses","exploration","icons","color","copy","datapoints","datatypes","date","delete","delete_question","description","edit","icon","link_off","menu","code","name","type","units","update","version","types","value","snippetTypes","EventTypes","defaultResources","id","attributes","is_public","ipv4","ipv6","longitude","latitude","position","source_id","ui_id","mqtt_topic","require_signed","require_encrypted","active","priority","event","conditions","parameters","offlineCard","patterns","username","password","customAttributeName","customAttributeValue","secret_key","secret_key_crypt","integerNotNegative","meta_revision","ttl","uuidv4","resources","buttons","containers","title","titlecolor","exports","hex_md5","r","rstr2hex","rstr_md5","str2rstr_utf8","binl2rstr","binl_md5","rstr2binl","length","d","n","hexcase","_","m","charCodeAt","charAt","t","String","fromCharCode","Array","f","h","e","a","i","md5_ii","md5_hh","md5_gg","md5_ff","safe_add","md5_cmn","bit_rol","toastContainer","document","querySelector","toast","msg","options","timeout","undefined","toastMsg","createElement","className","textContent","span","dismiss","appendChild","addEventListener","target","parentNode","classList","add","remove","setTimeout","getParameterByName","url","window","location","href","replace","results","RegExp","exec","decodeURIComponent","sprintf","string","module","isLtr","getSetting","JSON","parse","toLowerCase","preloadImage","img","setAttribute","getAttribute","escapeHtml","text","urlBase64ToUint8Array","base64String","base64","repeat","rawData","atob","outputArray","Uint8Array","nl2br","str","isXhtml","fetchStatusHandler","response","headers","get","sessionExpired","Error","statusText","fetchStatusHandlerOnUser","getUniqueId","Math","floor","random","toString","substring","setSetting","localStorage","setItem","getItem","setLoginAction","loginButtons","childElementCount","removeEventListener","onLoginButtonClick","evt","navigator","onLine","myForm","componentHandler","upgradeDom","authenticate","preventDefault","onStatusButtonClick","getStatus","setSection","onSettingsButtonClick","onDocsButtonClick","onTermsButtonClick","getTerms","setSignupAction","user_create","onSignupButtonClick","setPasswordResetAction","user_setpassword","onPasswordResetButtonClick","setForgotAction","user_forgot","onForgotPasswordButtonClick","email","checked","match","postData","firstName","lastName","pushSubscription","endpoint","keys","p256dh","myHeaders","Headers","append","myInit","method","body","stringify","fetch","then","fetchResponse","json","user","data","unsubscription_token","firebase","analytics","logEvent","catch","error","password2","token","onSaveProfileButtonClick","getElementById","setDrawer","askPermission","Promise","resolve","reject","permissionResult","Notification","requestPermission","result","registerServiceWorker","serviceWorker","register","scope","console","log","apps","initializeApp","firebaseConfig","messaging","useServiceWorker","getToken","err","subscribeUserToPush","subscribeOptions","userVisibleOnly","pushManager","subscribe","j","refreshButtonsSelectors","notification","menuTabBar","querySelectorAll","notifications","expandButtons","expandSourceButtons","object_create","deleteObject","deleteObject2","editObject","createObject","saveObject","backObject","editObject2","listObject","viewuiObject","addObject","addObjectBack","deleteFlow","editFlow","createFlow","addFlow","addFlowBack","saveFlow","backFlow","editFlow2","listFlow","deleteDashboard","editDashboard","createDashboard","addDashboard","addDashboardBack","backDashboard","saveDashboard","editDashboard2","listDashboard","deleteSnippet","editSnippet","createSnippet","addSnippet","addSnippetBack","backSnippet","saveSnippet","listSnippet","editSnippet2","deleteRule","editRule","createRule","addRule","addRuleBack","backRule","saveRule","listRule","editRule2","deleteMqtt","editMqtt","createMqtt","deleteSource","editSource","createSource","addSource","addSourceBack","backSource","saveSource","listSource","editSource2","buildSource","deploySource","editSourceChild","link_offSourceObject","editSourceObject","deploySourceObject","buildSourceObject","refreshContainers","spinner","usersList","compatibleDevices","menuIconElement","menuElement","menuOverlayElement","drawerObfuscatorElement","getElementsByClassName","menuItems","menuTabItems","setExpandAction","expand","toggle","parentElement","innerHTML","initNewSection","section","newSection","h2","createTextNode","divH2","divContent","direction","split","scrollTo","urlParams","URLSearchParams","search","params","from","p","display","displayAdd","hash","fetchProfile","getSettings","displayLoginForm","getUsersList","getCompatibleDevices","getOpenSourceLicenses","fetchItemsPaginated","act","style","transform","setCurrentScreen","setAttributes","addEvent","screen","setItemsClickAction","items","item","currentTarget","dataset","passive","divs","forEach","div","swaps","s","datasetid","createdElement","updatedElement","contains","lazys","l","size","page","showModal","dialog","top","zIndex","hideModal","copyTextToClipboard","clipboard","copyTextarea","focus","select","execCommand","writeText","setListActions","copyButtons","c","myId","onDelete","getSubtitle","subtitle","node","getUnits","u","push","format","system","sort","b","getFlows","getSnippets","sType","getDatatypes","getSources","subversions","getCard","card","output","image","secondaryaction","action","label","internalAction","displayChip","chip","chipElt","addChipTo","container","removeChipFrom","firstChild","removeChild","displayChipSnippet","chipSnippet","getSnippetIdFromIndex","dragSrcEl","handleDragStart","this","dataTransfer","effectAllowed","setData","outerHTML","handleDragOver","dropEffect","handleDragEnter","handleDragLeave","handleDrop","stopPropagation","dropHTML","getData","insertAdjacentHTML","dropElem","previousSibling","addDnDHandlers","handleDragEnd","addChipSnippetTo","filter","removeAttribute","defaultCard","escape","displayItem","showAddFAB","map","num","links","meta","first_name","last_name","getField","isEdit","push_subscription","geo","city","country","ip","moment","unsubscription","newsletter","gravatar","entry","phone","profileBackground","currentLocation","pattern","phoneNumbers","account","accounts","shortname","urls","profileUrl","photos","getCookie","self","dataLayer","userEmail","userRole","role","userId","setUserProperties","fetchUnsubscriptions","displayUnsubscriptions","addMenuItem","reminder","changePassword","element1","element2","element3","background","resetDrawer","removeItem","updated","fetchIndex","imageLazyLoading","showFAB","fab","my_flow_id","prototype","call","start","end","data_type","classification","key","Object","entries","svg","slice","parseInt","isVisible","hidden","isExpand","enterkeyhint","inputmode","field","isChecked","isMultiple","selected","displayName","selectedValue","cur","getSnippet","snippet_id","myContainer","my_snippet","find","getHtml","flowNames","theFlow","storedF","setOptions","activateOnce","editSnippetButtons","refreshFromNow","time","fromNow","getQrcodeImg","getQrcode","DOMParser","parseFromString","images","src","getMap","isEditable","isActionable","refresh_token","refreshTokenExp","resetSections","substr","displayAddObject","displayAddFlow","displayAddDashboard","displayAddSnippet","displayAddRule","displayAddMqtt","displayAddSource","setHiddenElement","setVisibleElement","isLoggedIn","setInterval","refreshAuthenticate","refreshPOST","grant_type","link","menuElt","iconElt","hideMenu","doNotTrack","fabs","innerText","getLocation","dispatchEvent","Event","appName","mqttInfo","t6BuildVersion","t6BuildDate","started_at","appId","rate","ceil","MaterialProgress","setProgress","compatibledevices","license","dependencies","linkFullReport","getExploration","explorationNode","subtract","toggleElement","showNotification","showOrientation","orientation","angle","setPosition","coords","accuracy","setPositionError","TIMEOUT","POSITION_UNAVAILABLE","message","indexOf","PERMISSION_DENIED","UNKNOWN_ERROR","geolocation","getCurrentPosition","enableHighAccuracy","maximumAge","cname","ca","cookie","showMenu","onTransitionEnd","updateNetworkStatus","controller","postMessage","clearCache","io","IntersectionObserver","IOentry","intersectionRatio","unobserve","LL","observe","managePage","currentPage","setInteractiveLinks","logout_button","signin_button","profile_button","getComputedStyle","pMatches","keyCode","input","alert","height","scrollHeight","pageYOffset","documentElement","scrollTop","getBoundingClientRect","bottom","Date","setTime","getTime","toUTCString","mixpanel","opt_out_tracking","setServiceWorker","unix","decodeURI","nm","sp","x","y","ep","touch","touchstart","touches","pageX","pageY","touchmove","touchend","createEvent","initCustomEvent","ce","xr","abs","yr","max","touchcancel","changedTouches","readyState","loadingTime","startTime","interactiveTime","history","pushState","id2","w","gtm.start","getElementsByTagName","async","insertBefore","completeTime","onEdit","object_id","isPublic","fqbn","source_version","communication","allowed_commands","interface","revision","onAdd","onDeploy","onBuild","onViewUi","open","isAdd","displayPublic","created","onoff","lowerupper","openclose","setvalgetval","source_versions","sv","otahist","btnId","source_id_selector","srcElement","subsource","sel","opt","ss","element","L","setView","parseFloat","tileLayer","attribution","minZoom","maxZoom","trackResize","dragging","addTo","popup","mIcon","Icon","extend","shadowUrl","iconSize","shadowSize","iconAnchor","shadowAnchor","popupAnchor","iconUrl","marker","draggable","disable","on","getLatLng","setLatLng","bindPopup","lat","toFixed","lng","invalidateSize","is_connected","flow_id","unit","flowsList","fl","allUnits","allDatatypes","datatype","idsupercoollllll","width","offsetWidth","svgUrl","snippetsList","sn","dashboard_id","theSnippet","storedS","rule_id","cssDisabled","content","filter_object_id","len","onUnlinkObject","o","deploying_to_objects","child","node_child","elChild","o_links","node_objects_linked","elObjects","default_value","available_values","defaultValue","legend","availableValues","limit","prev","getOptions","merged","attrname","legend_font_color","border_color","border_width","background_color","point_background_color","fill","show_line","stepped_line","title_display","title_font_size","title_font_family","legend_display","legend_position","legend_align","ctx","getContext","timestamp","datasets","backgroundColor","borderColor","borderWidth","showLine","steppedLine","pointStyle","hoverRadius","pointBackgroundColor","fontSize","fontFamily","align","labels","fontColor","tooltips","enable","scales","xAxes","ticks","maintainAspectRatio","responsive","animation","duration","Chart","textAlign","fillText","getSample"],"mappings":"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","file":"t6app-min.js.map","sourcesContent":["/*\n * Debug console filters:\n *  DEBUG\n *  [gtm]\n *  [indexedDB]\n *  [JWT]\n *  [History]\n *  [Orientation]\n *  [pushSubscription]\n *  [ServiceWorker]\n *  [setSection]\n *  [Network]\n */\n\"use strict\";\nvar app = {\n\tapi_version: \"v2.0.1\",\n\tdebug: false,\n\tbaseUrl: \"\",\n\tbaseUrlCdn: \"//cdn.internetcollaboratif.info\",\n\tbearer: \"\",\n\tauth: {},\n\tisLogged: false,\n\tautologin: false,\n\tRateLimit: { Limit: null, Remaining: null, Used: null },\n\tdate_format: \"DD/MM/YYYY, HH:mm\",\n\tcardMaxChars: 256,\n\tcookieconsent: 30,\n\trefreshExpiresInSeconds: 280000,\n\ttoastDuration: 3000,\n\titemsSize: { objects: 15, flows: 15, snippets: 15, dashboards: 15, mqtts: 15, rules: 15, sources: 15  },\n\titemsPage: { objects: 1, flows: 1, snippets: 1, dashboards: 1, mqtts: 1, rules: 1, sources: 1, },\n\tcurrentSection: \"index\",\n\ttawktoid: \"58852788bcf30e71ac141187\",\n\tgtm: \"GTM-PH7923\",\n\tapplicationServerKey: \"BHnrqPBEjHfdNIeFK5wdj0y7i5eGM2LlPn62zxmvN8LsBTFEQk1Gt2zrKknJQX91a8RR87w8KGP_1gDSy8x6U7s\",\n\tregistration: null,\n\tdefaultPageTitle: \"t6 IoT App\",\n\tsectionsPageTitles: {\n\t\t\"index\": \"t6 IoT App\",\n\t\t\"profile\": \"t6 profile\",\n\t\t\"object\": \"t6 Object %s\",\n\t\t\"object_add\": \"Add Object to t6\",\n\t\t\"objects\": \"t6 Objects\",\n\t\t\"flow\": \"t6 Flow %s\",\n\t\t\"flows\": \"t6 Flows\",\n\t\t\"flow_add\": \"Add Flow to t6\",\n\t\t\"dashboard\": \"t6 Dashboard %s\",\n\t\t\"dashboards\": \"t6 Dashboards\",\n\t\t\"dashboard_add\": \"Add Dashboard to t6\",\n\t\t\"snippet\": \"t6 Snippet %s\",\n\t\t\"snippets\": \"t6 Snippets\",\n\t\t\"snippet_add\": \"Add Snippet to t6\",\n\t\t\"rule\": \"t6 Rule %s\",\n\t\t\"rules\": \"t6 Rules\",\n\t\t\"rule_add\": \"Add Rule to t6\",\n\t\t\"mqtt\": \"t6 Mqtt topic %s\",\n\t\t\"mqtts\": \"t6 Mqtt topics\",\n\t\t\"mqtt_add\": \"Add Mqtt topic to t6\",\n\t\t\"source\": \"t6 Source %s\",\n\t\t\"sources\": \"t6 Sources\",\n\t\t\"source_add\": \"Add Source to t6\",\n\t\t\"settings\": \"t6 Settings\",\n\t\t\"signin\": \"Signin to t6\",\n\t\t\"login\": \"Signin to t6\",\n\t\t\"signup\": \"Signup to t6\",\n\t\t\"forgot-password\": \"Forgot your t6 password?\",\n\t\t\"reset-password\": \"Reset your t6 password\",\n\t\t\"status\": \"t6 Api status\",\n\t\t\"terms\": \"t6 Terms of Service and License Agreement\",\n\t\t\"docs\": \"t6 Api first documentation\",\n\t\t\"users-list\": \"t6 Users Accounts\",\n\t\t\"compatible-devices\": \"t6 Compatible Devices\",\n\t\t\"openSourceLicenses\": \"Open-Source licenses\",\n\t\t\"exploration\": \"Data Exploration\",\n\t},\n\ticons: {\n\t\t\"color\": \"format_color_fill\",\n\t\t\"copy\": \"content_copy\",\n\t\t\"dashboards\": \"dashboard\",\n\t\t\"datapoints\": \"filter_center_focus\",\n\t\t\"datatypes\": \"build\",\n\t\t\"date\": \"event\",\n\t\t\"delete\": \"delete\",\n\t\t\"delete_question\": \"error_outline\",\n\t\t\"description\": \"label\",\n\t\t\"docs\": \"code\",\n\t\t\"edit\": \"edit\",\n\t\t\"flows\": \"settings_input_component\",\n\t\t\"icon\": \"label_outline\",\n\t\t\"link_off\": \"link_off\",\n\t\t\"login\": \"email\",\n\t\t\"menu\": \"menu\",\n\t\t\"mqtts\": \"volume_down\",\n\t\t\"sources\": \"code\",\n\t\t\"code\": \"code\",\n\t\t\"name\": \"list\",\n\t\t\"objects\": \"devices_other\",\n\t\t\"rules\": \"call_split\",\n\t\t\"settings\": \"settings\",\n\t\t\"snippets\": \"widgets\",\n\t\t\"status\": \"favorite\",\n\t\t\"terms\": \"business_center\",\n\t\t\"type\": \"label\",\n\t\t\"units\": \"hourglass_empty\",\n\t\t\"update\": \"update\",\n\t\t\"version\": \"linear_scale\",\n\t},\n\ttypes: [\n\t\t{ name: \"cast\", value: \"Cast\" },\n\t\t{ name: \"cast_connected\", value: \"Cast Connected\" },\n\t\t{ name: \"computer\", value: \"Computer\" },\n\t\t{ name: \"desktop_mac\", value: \"Desktop Mac\" },\n\t\t{ name: \"desktop_windows\", value: \"Desktop Windows\" },\n\t\t{ name: \"developer_board\", value: \"Developer Board\" },\n\t\t{ name: \"device_hub\", value: \"Device Hub\" },\n\t\t{ name: \"devices_other\", value: \"Devices Other\" },\n\t\t{ name: \"dock\", value: \"Dock\" },\n\t\t{ name: \"gamepad\", value: \"Gamepad\" },\n\t\t{ name: \"headset\", value: \"Headset\" },\n\t\t{ name: \"headset_mic\", value: \"Headset Mic\" },\n\t\t{ name: \"keyboard\", value: \"Keyboard\" },\n\t\t{ name: \"keyboard_voice\", value: \"Keyboard Voice\" },\n\t\t{ name: \"laptop\", value: \"Laptop\" },\n\t\t{ name: \"laptop_chromebook\", value: \"Laptop Chromebook\" },\n\t\t{ name: \"laptop_mac\", value: \"Laptop Mac\" },\n\t\t{ name: \"laptop_windows\", value: \"Laptop Windows\" },\n\t\t{ name: \"memory\", value: \"Memory\" },\n\t\t{ name: \"mouse\", value: \"Mouse\" },\n\t\t{ name: \"phone_android\", value: \"Phone Android\" },\n\t\t{ name: \"phone_iphone\", value: \"Phone Iphone\" },\n\t\t{ name: \"phonelink\", value: \"Phonelink\" },\n\t\t{ name: \"router\", value: \"Router\" },\n\t\t{ name: \"scanner\", value: \"Scanner\" },\n\t\t{ name: \"security\", value: \"Security\" },\n\t\t{ name: \"sim_card\", value: \"Sim Card\" },\n\t\t{ name: \"smartphone\", value: \"Smartphone\" },\n\t\t{ name: \"speaker\", value: \"Speaker\" },\n\t\t{ name: \"speaker_group\", value: \"Speaker Group\" },\n\t\t{ name: \"tablet\", value: \"Tablet\" },\n\t\t{ name: \"tablet_android\", value: \"Tablet Android\" },\n\t\t{ name: \"tablet_mac\", value: \"Tablet Mac\" },\n\t\t{ name: \"toys\", value: \"Toys\" },\n\t\t{ name: \"tv\", value: \"Tv\" },\n\t\t{ name: \"videogame_asset\", value: \"Videogame Asset\" },\n\t\t{ name: \"watch\", value: \"Watch\" },\n\t],\n\tsnippetTypes: [],\n\tEventTypes: [{ name: \"mqttPublish\", value: \"mqtt Publish\" }, { name: \"email\", value: \"Email\" }, { name: \"webPush\", value: \"Notification webPush (beta)\" }, { name: \"httpWebhook\", value: \"http(s) Webhook\" }, { name: \"sms\", value: \"Sms/Text message\" }, { name: \"ifttt\", value: \"Trigger event to Ifttt\" }, { name: \"serial\", value: \"Serial using Arduino CmdMessenger\" }],\n\tunits: [],\n\tdatatypes: [],\n\tflows: [],\n\tsources: [],\n\tsnippets: [],\n\tdefaultResources: {\n\t\tobject: { id: \"\", attributes: { name: \"\", description: \"\", is_public: false, type: \"\", ipv4: \"\", ipv6: \"\", longitude: \"\", latitude: \"\", position: \"\", source_id: \"-\", ui_id: \"\" } },\n\t\tflow: { id: \"\", attributes: { name: \"\", mqtt_topic: \"\", require_signed: false, require_encrypted: false } },\n\t\tdashboard: { id: \"\", attributes: { name: \"\", description: \"\" } },\n\t\tsnippet: { id: \"\", attributes: { name: \"\", icon: \"\", color: \"\" } },\n\t\tmqtt: { id: \"\", attributes: { name: \"\" } },\n\t\tsource: { id: \"\", attributes: { name: \"\" } },\n\t\trule: { id: '', active: true, attributes: { name: '', priority: 1, event: { type: \"email\", conditions: '{\"all\":[ { \"fact\":\"environment\", \"operator\":\"equal\", \"value\":\"production\" }]}', parameters: \"{}\" } } },\n\t},\n\tofflineCard: {},\n\tpatterns: {\n\t\tname: \".{3,}\",\n\t\tipv4: \"((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\\.|$)){4}(:[0-9]{1,6})?\",\n\t\tipv6: \"/^(?>(?>([a-f0-9]{1,4})(?>:(?1)){7}|(?!(?:.*[a-f0-9](?>:|$)){8,})((?1)(?>:(?1)){0,6})?::(?2)?)|(?>(?>(?1)(?>:(?1)){5}:|(?!(?:.*[a-f0-9]:){6,})(?3)?::(?>((?1)(?>:(?1)){0,4}):)?)?(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])(?>\\.(?4)){3}))$\",\n\t\tlongitude: \"^[-+]?[0-9]{0,3}\\.[0-9]{1,7}$\",\n\t\tlatitude: \"^[-+]?[0-9]{0,3}\\.[0-9]{1,7}$\",\n\t\tposition: \".{3,255}\",\n\t\tusername: \"[a-z0-9!#$%&*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\",\n\t\tpassword: \".{4,}\",\n\t\tcardMaxChars: \"^[0-9]+$\",\n\t\tcustomAttributeName: \"^[a-zA-Z0-9_]+$\",\n\t\tcustomAttributeValue: \"^.*?$\",\n\t\tsecret_key: \"^.*?$\",\n\t\tsecret_key_crypt: \"^[a-fA-F0-9]{64}$\",\n\t\tintegerNotNegative: \"^[^a-zA-Z]{1,4}$\",\n\t\tmeta_revision: \"^[0-9]{1,}$\",\n\t\tttl: \"^[1-9]+$\",\n\t\tuuidv4: \"^[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}$\",\n\t\tdate: \"^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1]) ([0-1][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$\",\n\t},\n\tresources: {},\n\tbuttons: {}, // see function app.refreshButtonsSelectors()\n\tcontainers: {}, // see function app.refreshContainers()\n};\napp.offlineCard = { title: \"Offline\", titlecolor: \"#ffffff\", description: \"Offline mode, Please connect to internet in order to see your resources.\" };\n\nvar Tawk_API;\nvar touchStartPoint, touchMovePoint;\n\n(function(exports) {\n\t\"use strict\";\n\tfunction hex_md5(r){return rstr2hex(rstr_md5(str2rstr_utf8(r)))}function b64_md5(r){return rstr2b64(rstr_md5(str2rstr_utf8(r)))}function any_md5(r,t){return rstr2any(rstr_md5(str2rstr_utf8(r)),t)}function hex_hmac_md5(r,t){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(r),str2rstr_utf8(t)))}function b64_hmac_md5(r,t){return rstr2b64(rstr_hmac_md5(str2rstr_utf8(r),str2rstr_utf8(t)))}function any_hmac_md5(r,t,d){return rstr2any(rstr_hmac_md5(str2rstr_utf8(r),str2rstr_utf8(t)),d)}function md5_vm_test(){return\"900150983cd24fb0d6963f7d28e17f72\"==hex_md5(\"abc\").toLowerCase()}function rstr_md5(r){return binl2rstr(binl_md5(rstr2binl(r),8*r.length))}function rstr_hmac_md5(r,t){var d=rstr2binl(r);d.length>16&&(d=binl_md5(d,8*r.length));for(var n=Array(16),_=Array(16),m=0;16>m;m++)n[m]=909522486^d[m],_[m]=1549556828^d[m];var f=binl_md5(n.concat(rstr2binl(t)),512+8*t.length);return binl2rstr(binl_md5(_.concat(f),640))}function rstr2hex(r){try{}catch(t){hexcase=0}for(var d,n=hexcase?\"0123456789ABCDEF\":\"0123456789abcdef\",_=\"\",m=0;m<r.length;m++)d=r.charCodeAt(m),_+=n.charAt(d>>>4&15)+n.charAt(15&d);return _}function rstr2b64(r){try{}catch(t){b64pad=\"\"}for(var d=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",n=\"\",_=r.length,m=0;_>m;m+=3)for(var f=r.charCodeAt(m)<<16|(_>m+1?r.charCodeAt(m+1)<<8:0)|(_>m+2?r.charCodeAt(m+2):0),h=0;4>h;h++)n+=8*m+6*h>8*r.length?b64pad:d.charAt(f>>>6*(3-h)&63);return n}function rstr2any(r,t){var d,n,_,m,f,h=t.length,e=Array(Math.ceil(r.length/2));for(d=0;d<e.length;d++)e[d]=r.charCodeAt(2*d)<<8|r.charCodeAt(2*d+1);var a=Math.ceil(8*r.length/(Math.log(t.length)/Math.log(2))),i=Array(a);for(n=0;a>n;n++){for(f=Array(),m=0,d=0;d<e.length;d++)m=(m<<16)+e[d],_=Math.floor(m/h),m-=_*h,(f.length>0||_>0)&&(f[f.length]=_);i[n]=m,e=f}var o=\"\";for(d=i.length-1;d>=0;d--)o+=t.charAt(i[d]);return o}function str2rstr_utf8(r){for(var t,d,n=\"\",_=-1;++_<r.length;)t=r.charCodeAt(_),d=_+1<r.length?r.charCodeAt(_+1):0,t>=55296&&56319>=t&&d>=56320&&57343>=d&&(t=65536+((1023&t)<<10)+(1023&d),_++),127>=t?n+=String.fromCharCode(t):2047>=t?n+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n}function str2rstr_utf16le(r){for(var t=\"\",d=0;d<r.length;d++)t+=String.fromCharCode(255&r.charCodeAt(d),r.charCodeAt(d)>>>8&255);return t}function str2rstr_utf16be(r){for(var t=\"\",d=0;d<r.length;d++)t+=String.fromCharCode(r.charCodeAt(d)>>>8&255,255&r.charCodeAt(d));return t}function rstr2binl(r){for(var t=Array(r.length>>2),d=0;d<t.length;d++)t[d]=0;for(var d=0;d<8*r.length;d+=8)t[d>>5]|=(255&r.charCodeAt(d/8))<<d%32;return t}function binl2rstr(r){for(var t=\"\",d=0;d<32*r.length;d+=8)t+=String.fromCharCode(r[d>>5]>>>d%32&255);return t}function binl_md5(r,t){r[t>>5]|=128<<t%32,r[(t+64>>>9<<4)+14]=t;for(var d=1732584193,n=-271733879,_=-1732584194,m=271733878,f=0;f<r.length;f+=16){var h=d,e=n,a=_,i=m;d=md5_ff(d,n,_,m,r[f+0],7,-680876936),m=md5_ff(m,d,n,_,r[f+1],12,-389564586),_=md5_ff(_,m,d,n,r[f+2],17,606105819),n=md5_ff(n,_,m,d,r[f+3],22,-1044525330),d=md5_ff(d,n,_,m,r[f+4],7,-176418897),m=md5_ff(m,d,n,_,r[f+5],12,1200080426),_=md5_ff(_,m,d,n,r[f+6],17,-1473231341),n=md5_ff(n,_,m,d,r[f+7],22,-45705983),d=md5_ff(d,n,_,m,r[f+8],7,1770035416),m=md5_ff(m,d,n,_,r[f+9],12,-1958414417),_=md5_ff(_,m,d,n,r[f+10],17,-42063),n=md5_ff(n,_,m,d,r[f+11],22,-1990404162),d=md5_ff(d,n,_,m,r[f+12],7,1804603682),m=md5_ff(m,d,n,_,r[f+13],12,-40341101),_=md5_ff(_,m,d,n,r[f+14],17,-1502002290),n=md5_ff(n,_,m,d,r[f+15],22,1236535329),d=md5_gg(d,n,_,m,r[f+1],5,-165796510),m=md5_gg(m,d,n,_,r[f+6],9,-1069501632),_=md5_gg(_,m,d,n,r[f+11],14,643717713),n=md5_gg(n,_,m,d,r[f+0],20,-373897302),d=md5_gg(d,n,_,m,r[f+5],5,-701558691),m=md5_gg(m,d,n,_,r[f+10],9,38016083),_=md5_gg(_,m,d,n,r[f+15],14,-660478335),n=md5_gg(n,_,m,d,r[f+4],20,-405537848),d=md5_gg(d,n,_,m,r[f+9],5,568446438),m=md5_gg(m,d,n,_,r[f+14],9,-1019803690),_=md5_gg(_,m,d,n,r[f+3],14,-187363961),n=md5_gg(n,_,m,d,r[f+8],20,1163531501),d=md5_gg(d,n,_,m,r[f+13],5,-1444681467),m=md5_gg(m,d,n,_,r[f+2],9,-51403784),_=md5_gg(_,m,d,n,r[f+7],14,1735328473),n=md5_gg(n,_,m,d,r[f+12],20,-1926607734),d=md5_hh(d,n,_,m,r[f+5],4,-378558),m=md5_hh(m,d,n,_,r[f+8],11,-2022574463),_=md5_hh(_,m,d,n,r[f+11],16,1839030562),n=md5_hh(n,_,m,d,r[f+14],23,-35309556),d=md5_hh(d,n,_,m,r[f+1],4,-1530992060),m=md5_hh(m,d,n,_,r[f+4],11,1272893353),_=md5_hh(_,m,d,n,r[f+7],16,-155497632),n=md5_hh(n,_,m,d,r[f+10],23,-1094730640),d=md5_hh(d,n,_,m,r[f+13],4,681279174),m=md5_hh(m,d,n,_,r[f+0],11,-358537222),_=md5_hh(_,m,d,n,r[f+3],16,-722521979),n=md5_hh(n,_,m,d,r[f+6],23,76029189),d=md5_hh(d,n,_,m,r[f+9],4,-640364487),m=md5_hh(m,d,n,_,r[f+12],11,-421815835),_=md5_hh(_,m,d,n,r[f+15],16,530742520),n=md5_hh(n,_,m,d,r[f+2],23,-995338651),d=md5_ii(d,n,_,m,r[f+0],6,-198630844),m=md5_ii(m,d,n,_,r[f+7],10,1126891415),_=md5_ii(_,m,d,n,r[f+14],15,-1416354905),n=md5_ii(n,_,m,d,r[f+5],21,-57434055),d=md5_ii(d,n,_,m,r[f+12],6,1700485571),m=md5_ii(m,d,n,_,r[f+3],10,-1894986606),_=md5_ii(_,m,d,n,r[f+10],15,-1051523),n=md5_ii(n,_,m,d,r[f+1],21,-2054922799),d=md5_ii(d,n,_,m,r[f+8],6,1873313359),m=md5_ii(m,d,n,_,r[f+15],10,-30611744),_=md5_ii(_,m,d,n,r[f+6],15,-1560198380),n=md5_ii(n,_,m,d,r[f+13],21,1309151649),d=md5_ii(d,n,_,m,r[f+4],6,-145523070),m=md5_ii(m,d,n,_,r[f+11],10,-1120210379),_=md5_ii(_,m,d,n,r[f+2],15,718787259),n=md5_ii(n,_,m,d,r[f+9],21,-343485551),d=safe_add(d,h),n=safe_add(n,e),_=safe_add(_,a),m=safe_add(m,i)}return Array(d,n,_,m)}function md5_cmn(r,t,d,n,_,m){return safe_add(bit_rol(safe_add(safe_add(t,r),safe_add(n,m)),_),d)}function md5_ff(r,t,d,n,_,m,f){return md5_cmn(t&d|~t&n,r,t,_,m,f)}function md5_gg(r,t,d,n,_,m,f){return md5_cmn(t&n|d&~n,r,t,_,m,f)}function md5_hh(r,t,d,n,_,m,f){return md5_cmn(t^d^n,r,t,_,m,f)}function md5_ii(r,t,d,n,_,m,f){return md5_cmn(d^(t|~n),r,t,_,m,f)}function safe_add(r,t){var d=(65535&r)+(65535&t),n=(r>>16)+(t>>16)+(d>>16);return n<<16|65535&d}function bit_rol(r,t){return r<<t|r>>>32-t}var hexcase=0,b64pad=\"\";\n\texports.hex_md5 = hex_md5; // Make this method available in global\n\n\tvar toastContainer = document.querySelector(\".toast__container\");\n\n\t// To show notification\n\tfunction toast(msg, options) {\n\t\tif (!msg) return;\n\t\toptions = options || { timeout: app.toastDuration, type: \"info\" };\n\t\t// type = error, done, warning, help, info\n\t\toptions.timeout = typeof options.timeout !== undefined ? options.timeout : 3000;\n\t\toptions.type = typeof options.type !== undefined ? options.type : \"info\";\n\n\t\tvar toastMsg = document.createElement(\"div\");\n\t\ttoastMsg.className = \"toast__msg \" + options.type;\n\t\tvar icon = document.createElement(\"i\");\n\t\ticon.className = \"material-icons\";\n\t\ticon.textContent = options.type;\n\t\tvar span = document.createElement(\"span\");\n\t\tvar dismiss = document.createElement(\"a\");\n\t\tspan.textContent = msg;\n\t\tdismiss.textContent = \"Dismiss\";\n\t\tdismiss.className = \"mdl-button\";\n\t\ttoastMsg.appendChild(icon);\n\t\ttoastMsg.appendChild(span);\n\t\ttoastMsg.appendChild(dismiss);\n\t\ttoastContainer.appendChild(toastMsg);\n\t\tdismiss.addEventListener(\"click\", function() {\n\t\t\tevent.target.parentNode.classList.add(\"toast__msg--hide\");\n\t\t\tevent.target.parentNode.remove(1);\n\t\t});\n\t\tsetTimeout(function() {\n\t\t\ttoastMsg.classList.add(\"toast__msg--hide\");\n\t\t\ttoastMsg.remove(1);\n\t\t}, options.timeout);\n\t}\n\texports.toast = toast;\n\n\tfunction getParameterByName(name, url) {\n\t\tif (!url) url = window.location.href;\n\t\tname = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n\t\tvar regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n\t\t\tresults = regex.exec(url);\n\t\tif (!results) return null;\n\t\tif (!results[2]) return \"\";\n\t\treturn decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n\t}\n\texports.getParameterByName = getParameterByName; // Make this method available in global\n\n\tfunction sprintf(string, options) {\n\t\treturn string.replace(/%s/g, options);\n\t}\n\texports.sprintf = sprintf; // Make this method available in global\n})(typeof window === 'undefined' ? module.exports : window);\n\n(function() {\n\t\"use strict\";\n\t/*\n\t * *********************************** Tooling functions ***********************************\n\t */\n\tapp.isLtr = function() {\n\t\treturn app.getSetting('settings.isLtr') !== null ? !!JSON.parse(String(app.getSetting('settings.isLtr')).toLowerCase()) : true;\n\t};\n\n\tapp.preloadImage = function(img) {\n\t\timg.setAttribute('src', img.getAttribute('data-src'));\n\t};\n\n\tapp.escapeHtml = function(text) {\n\t\tif (typeof text === \"string\") {\n\t\t\ttext = text\n\t\t\t\t.replace(/</g, \"&lt;\")\n\t\t\t\t.replace(/>/g, \"&gt;\")\n\t\t\t\t.replace(/\"/g, \"&quot;\")\n\t\t\t\t.replace(/'/g, \"&#039;\");\n\t\t}\n\t\treturn text;\n\t};\n\n\tapp.urlBase64ToUint8Array = function(base64String) {\n\t\tconst padding = '='.repeat((4 - base64String.length % 4) % 4);\n\t\tconst base64 = (base64String + padding).replace(/\\-/g, '+').replace(/_/g, '/');\n\t\tconst rawData = window.atob(base64);\n\t\tconst outputArray = new Uint8Array(rawData.length);\n\t\tfor (var i = 0; i < rawData.length; ++i) { outputArray[i] = rawData.charCodeAt(i); };\n\t\treturn outputArray;\n\t};\n\n\tapp.nl2br = function(str, isXhtml) {\n\t\tvar breakTag = (isXhtml || typeof isXhtml === 'undefined') ? '<br />' : '<br>';\n\t\treturn (str + '').replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, '$1' + breakTag + '$2');\n\t};\n\n\tapp.fetchStatusHandler = function(response) {\n\t\tif (response.headers.get('X-RateLimit-Limit') && response.headers.get('X-RateLimit-Remaining')) {\n\t\t\tapp.RateLimit.Limit = response.headers.get('X-RateLimit-Limit');\n\t\t\tapp.RateLimit.Remaining = response.headers.get('X-RateLimit-Remaining');\n\t\t\tapp.RateLimit.Used = app.RateLimit.Limit - app.RateLimit.Remaining;\n\t\t}\n\t\tif (response.status === 200 || response.status === 201) {\n\t\t\treturn response;\n\t\t} else if (response.status === 204) {\n\t\t\treturn response;\n\t\t} else if (response.status === 400) {\n\t\t\ttoast(\"Bad Request.\", { timeout: app.toastDuration, type: \"error\" });\n\t\t\treturn response;\n\t\t} else if (response.status === 401 || response.status === 403) {\n\t\t\tapp.sessionExpired();\n\t\t\treturn response;\n\t\t} else if (response.status === 404) {\n\t\t\ttoast(\"There is an unknown resource that can't be loaded.\", { timeout: app.toastDuration, type: \"error\" });\n\t\t\treturn response;\n\t\t} else if (response.status === 409) {\n\t\t\ttoast(\"Revision is conflictual.\", { timeout: app.toastDuration, type: \"error\" });\n\t\t\treturn response;\n\t\t} else if (response.status === 412) {\n\t\t\ttoast(\"Precondition Failed\", { timeout: app.toastDuration, type: \"error\" });\n\t\t\treturn response;\n\t\t} else if (response.status === 429) {\n\t\t\ttoast(\"Oups, over quota.\", { timeout: app.toastDuration, type: \"error\" });\n\t\t\treturn response;\n\t\t} else {\n\t\t\tthrow new Error(response.statusText);\n\t\t}\n\t};\n\n\tapp.fetchStatusHandlerOnUser = function(response) {\n\t\tif (response.headers.get('X-RateLimit-Limit') && response.headers.get('X-RateLimit-Remaining')) {\n\t\t\tapp.RateLimit.Limit = response.headers.get('X-RateLimit-Limit');\n\t\t\tapp.RateLimit.Remaining = response.headers.get('X-RateLimit-Remaining');\n\t\t\tapp.RateLimit.Used = app.RateLimit.Limit - app.RateLimit.Remaining;\n\t\t}\n\t\tif (response.status === 200 || response.status === 201) {\n\t\t\treturn response;\n\t\t} else if (response.status === 409) {\n\t\t\tthrow new Error('Email already exists on t6, please Sign in.');\n\t\t} else {\n\t\t\tthrow new Error(response.statusText);\n\t\t}\n\t};\n\n\tapp.getUniqueId = function() {\n\t\treturn Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n\t};\n\n\tapp.setSetting = function(name, value) {\n\t\tlocalStorage.setItem(name, value);\n\t};\n\n\tapp.getSetting = function(name) {\n\t\treturn localStorage.getItem(name);\n\t};\n\n\t/*\n\t * *********************************** Application functions ***********************************\n\t */\n\tapp.setLoginAction = function() {\n\t\tfor (var i in app.buttons.loginButtons) {\n\t\t\tif (app.buttons.loginButtons[i].childElementCount > -1) {\n\t\t\t\tapp.buttons.loginButtons[i].removeEventListener('click', app.onLoginButtonClick, false);\n\t\t\t\tapp.buttons.loginButtons[i].addEventListener('click', app.onLoginButtonClick, false);\n\t\t\t}\n\t\t}\n\t};\n\n\tapp.onLoginButtonClick = function(evt) {\n\t\tif (navigator.onLine) {\n\t\t\tvar myForm = evt.target.parentNode.parentNode.parentNode.parentNode;\n\t\t\tmyForm.querySelector(\"form.signin button.login_button i.material-icons\").textContent = \"cached\";\n\t\t\tmyForm.querySelector(\"form.signin button.login_button i.material-icons\").classList.add(\"animatedIcon\");\n\t\t\tcomponentHandler.upgradeDom();\n\n\t\t\tvar username = myForm.querySelector(\"form.signin input[name='username']\").value;\n\t\t\tvar password = myForm.querySelector(\"form.signin input[name='password']\").value;\n\t\t\tapp.auth = { \"username\": username, \"password\": password };\n\t\t\tapp.authenticate();\n\t\t} else {\n\t\t\ttoast(\"No Network detected, please check your connexion.\", { timeout: app.toastDuration, type: \"warning\" });\n\t\t}\n\t\tevt.preventDefault();\n\t};\n\n\tapp.onStatusButtonClick = function(evt) {\n\t\tif (navigator.onLine) {\n\t\t\tapp.getStatus();\n\t\t\tapp.setSection('status');\n\t\t} else {\n\t\t\ttoast(\"No Network detected, please check your connexion.\", { timeout: app.toastDuration, type: \"warning\" });\n\t\t}\n\t\tif (evt) evt.preventDefault();\n\t};\n\n\tapp.onSettingsButtonClick = function(evt) {\n\t\tif (navigator.onLine) {\n\t\t\tapp.setSection('settings');\n\t\t} else {\n\t\t\ttoast(\"No Network detected, please check your connexion.\", { timeout: app.toastDuration, type: \"warning\" });\n\t\t}\n\t\tif (evt) evt.preventDefault();\n\t};\n\n\tapp.onDocsButtonClick = function(evt) {\n\t\tif (navigator.onLine) {\n\t\t\tapp.setSection('docs');\n\t\t} else {\n\t\t\ttoast(\"No Network detected, please check your connexion.\", { timeout: app.toastDuration, type: \"warning\" });\n\t\t}\n\t\tif (evt) evt.preventDefault();\n\t};\n\n\tapp.onTermsButtonClick = function(evt) {\n\t\tif (navigator.onLine) {\n\t\t\tapp.getTerms();\n\t\t\tapp.setSection('terms');\n\t\t} else {\n\t\t\ttoast(\"No Network detected, please check your connexion.\", { timeout: app.toastDuration, type: \"warning\" });\n\t\t}\n\t\tif (evt) evt.preventDefault();\n\t};\n\n\tapp.setSignupAction = function() {\n\t\tfor (var i in app.buttons.user_create) {\n\t\t\tif (app.buttons.user_create[i].childElementCount > -1) {\n\t\t\t\tapp.buttons.user_create[i].addEventListener('click', app.onSignupButtonClick, false);\n\t\t\t}\n\t\t}\n\t};\n\n\tapp.setPasswordResetAction = function() {\n\t\tfor (var i in app.buttons.user_setpassword) {\n\t\t\tif (app.buttons.user_setpassword[i].childElementCount > -1) {\n\t\t\t\tapp.buttons.user_setpassword[i].addEventListener('click', app.onPasswordResetButtonClick, false);\n\t\t\t}\n\t\t}\n\t};\n\n\tapp.setForgotAction = function() {\n\t\tfor (var i in app.buttons.user_forgot) {\n\t\t\tif (app.buttons.user_forgot[i].childElementCount > -1) {\n\t\t\t\tapp.buttons.user_forgot[i].addEventListener('click', app.onForgotPasswordButtonClick, false);\n\t\t\t}\n\t\t}\n\t};\n\n\tapp.onSignupButtonClick = function(evt) {\n\t\tif (navigator.onLine) {\n\t\t\tvar myForm = evt.target.parentNode.parentNode.parentNode.parentNode;\n\t\t\tmyForm.querySelector(\"form.signup button.createUser i.material-icons\").textContent = \"cached\";\n\t\t\tmyForm.querySelector(\"form.signup button.createUser i.material-icons\").classList.add(\"animatedIcon\");\n\t\t\tcomponentHandler.upgradeDom();\n\n\t\t\tvar email = myForm.querySelector(\"form.signup input[name='email']\").value;\n\t\t\tvar terms = myForm.querySelector(\"form.signup input[name='terms']\").checked;\n\t\t\tif (email && email.match(app.patterns.username)) {\n\t\t\t\tif (terms) {\n\t\t\t\t\tvar firstName = myForm.querySelector(\"form.signup input[name='firstName']\").value;\n\t\t\t\t\tvar lastName = myForm.querySelector(\"form.signup input[name='lastName']\").value;\n\t\t\t\t\tvar postData = { \"email\": email, \"firstName\": firstName, \"lastName\": lastName };\n\t\t\t\t\tif (app.getSetting('settings.pushSubscription.endpoint') && app.getSetting('settings.pushSubscription.keys.auth') && app.getSetting('settings.pushSubscription.keys.p256dh')) {\n\t\t\t\t\t\tpostData.pushSubscription = {\n\t\t\t\t\t\t\tendpoint: app.getSetting('settings.pushSubscription.endpoint'),\n\t\t\t\t\t\t\tkeys: {\n\t\t\t\t\t\t\t\tauth: app.getSetting('settings.pushSubscription.keys.auth'),\n\t\t\t\t\t\t\t\tp256dh: app.getSetting('settings.pushSubscription.keys.p256dh')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\t\t\tvar myInit = { method: 'POST', headers: myHeaders, body: JSON.stringify(postData) };\n\t\t\t\t\tvar url = `${app.baseUrl}/${app.api_version}/users`;\n\n\t\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\tapp.fetchStatusHandlerOnUser\n\t\t\t\t\t\t).then(function(fetchResponse) {\n\t\t\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(function(response) {\n\t\t\t\t\t\t\tapp.setSetting('notifications.email', response.user.data.attributes.email);\n\t\t\t\t\t\t\tapp.setSetting('notifications.unsubscription_token', response.user.data.attributes.unsubscription_token);\n\t\t\t\t\t\t\ttoast('Welcome, you should have received an email to set your password.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t\t\t\tif (typeof firebase !== \"undefined\") {\n\t\t\t\t\t\t\t\tfirebase.analytics().logEvent('sign_up');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tapp.setSection('manage_notifications');\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\t\ttoast('We can\\'t process your signup. Please resubmit the form later! ' + error, { timeout: app.toastDuration, type: \"warning\" });\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\ttoast('Please read Terms & Conditions, you will be able to manage your privacy in the step right after.', { timeout: app.toastDuration, type: \"warning\" });\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttoast('We can\\'t process your signup. Please check your inputs.', { timeout: app.toastDuration, type: \"warning\" });\n\t\t\t}\n\t\t} else {\n\t\t\ttoast(\"No Network detected, please check your connexion.\", { timeout: app.toastDuration, type: \"warning\" });\n\t\t}\n\t\tevt.preventDefault();\n\t};\n\n\tapp.onPasswordResetButtonClick = function(evt) {\n\t\tif (navigator.onLine) {\n\t\t\tvar myForm = evt.target.parentNode.parentNode.parentNode.parentNode;\n\t\t\tmyForm.querySelector(\"form.resetpassword button.setPassword i.material-icons\").textContent = \"cached\";\n\t\t\tmyForm.querySelector(\"form.resetpassword button.setPassword i.material-icons\").classList.add(\"animatedIcon\");\n\t\t\tcomponentHandler.upgradeDom();\n\n\t\t\tvar password = myForm.querySelector(\"form.resetpassword input[name='password']\").value;\n\t\t\tvar password2 = myForm.querySelector(\"form.resetpassword input[name='password2']\").value;\n\t\t\tvar token = getParameterByName('token');\n\t\t\tif (token !== undefined && password == password2) {\n\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\t\tvar myInit = { method: 'POST', headers: myHeaders, body: JSON.stringify({ \"password\": password }) };\n\t\t\t\tvar url = `${app.baseUrl}/${app.api_version}/users/token/${token}`;\n\n\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t.then(\n\t\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t\t).then(function(fetchResponse) {\n\t\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t\t})\n\t\t\t\t\t.then(function(response) {\n\t\t\t\t\t\tapp.setSection('login');\n\t\t\t\t\t\ttoast('Your password has been reset; please login again.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\ttoast('We can\\'t process your password reset. Please resubmit the form later!', { timeout: app.toastDuration, type: \"warning\" });\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\ttoast('We can\\'t process your password reset.', { timeout: app.toastDuration, type: \"warning\" });\n\t\t\t}\n\t\t} else {\n\t\t\ttoast(\"No Network detected, please check your connexion.\", { timeout: app.toastDuration, type: \"warning\" });\n\t\t}\n\t\tevt.preventDefault();\n\t};\n\n\tapp.onForgotPasswordButtonClick = function(evt) {\n\t\tif (navigator.onLine) {\n\t\t\tvar myForm = evt.target.parentNode.parentNode.parentNode.parentNode;\n\t\t\tmyForm.querySelector(\"form.forgotpassword button.forgotPassword i.material-icons\").textContent = \"cached\";\n\t\t\tmyForm.querySelector(\"form.forgotpassword button.forgotPassword i.material-icons\").classList.add(\"animatedIcon\");\n\t\t\tcomponentHandler.upgradeDom();\n\n\t\t\tvar email = myForm.querySelector(\"form.forgotpassword input[name='email']\").value;\n\t\t\tif (email && email.match(app.patterns.username)) {\n\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\t\tvar myInit = { method: 'POST', headers: myHeaders, body: JSON.stringify({ \"email\": email }) };\n\t\t\t\tvar url = `${app.baseUrl}/${app.api_version}/users/instruction/`;\n\n\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t.then(\n\t\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t\t).then(function(fetchResponse) {\n\t\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t\t})\n\t\t\t\t\t.then(function(response) {\n\t\t\t\t\t\tapp.setSection('login');\n\t\t\t\t\t\ttoast('Instructions has been sent to your email.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\ttoast('We can\\'t process your request. Please resubmit the form later!', { timeout: app.toastDuration, type: \"warning\" });\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\ttoast('We can\\'t send the instructions. Please check your inputs.', { timeout: app.toastDuration, type: \"warning\" });\n\t\t\t}\n\t\t} else {\n\t\t\ttoast(\"No Network detected, please check your connexion.\", { timeout: app.toastDuration, type: \"warning\" });\n\t\t}\n\t\tevt.preventDefault();\n\t};\n\n\tapp.onSaveProfileButtonClick = function(evt) {\n\t\tif (navigator.onLine) {\n\t\t\tvar firstName = document.getElementById(\"firstName\").value;\n\t\t\tvar lastName = document.getElementById(\"lastName\").value;\n\n\t\t\tvar myHeaders = new Headers();\n\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem('bearer'));\n\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\tvar myInit = { method: 'PUT', headers: myHeaders, body: JSON.stringify({ \"firstName\": firstName, \"lastName\": lastName }) };\n\t\t\tvar url = `${app.baseUrl}/${app.api_version}/users/${localStorage.getItem('currentUserId')}`;\n\n\t\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse){\n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tlocalStorage.setItem('currentUserName', firstName+\" \"+lastName);\n\t\t\t\tapp.setDrawer();\n\t\t\t\ttoast('Your details have been updated.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\ttoast(\"We can't process your modifications. Please resubmit the form later!\", { timeout: app.toastDuration, type: \"warning\" });\n\t\t\t});\n\t\t} else {\n\t\t\ttoast(\"No Network detected, please check your connexion.\", { timeout: app.toastDuration, type: \"warning\" });\n\t\t}\n\t};\n\n\tapp.askPermission = function() {\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tconst permissionResult = Notification.requestPermission(function(result) {\n\t\t\t\tresolve(result);\n\t\t\t});\n\n\t\t\tif (permissionResult) {\n\t\t\t\tpermissionResult.then(resolve, reject);\n\t\t\t}\n\t\t})\n\t\t.then(function(permissionResult) {\n\t\t\tif (permissionResult !== 'granted') {\n\t\t\t\tthrow new Error('We weren\\'t granted permission.');\n\t\t\t}\n\t\t});\n\t};\n\n\tapp.registerServiceWorker = function() {\n\t\treturn navigator.serviceWorker.register(\"/service-worker.js\", { scope: \"/\" })\n\t\t\t.then(function(registration) {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\tconsole.log('[ServiceWorker] Registered with scope:', registration.scope);\n\t\t\t\t}\n\t\t\t\tif ((typeof firebase !== \"object\" || typeof firebase === \"undefined\") && typeof firebase.apps !== \"object\" && typeof firebase.apps.length !== \"number\") {\n\t\t\t\t\t//console.log(\"firebase\", \"Should Initialize Firebase\");\n\t\t\t\t\tfirebase.initializeApp(firebaseConfig);\n\t\t\t\t}\n\n\t\t\t\tfirebase.messaging().useServiceWorker(registration);\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t//console.log(\"firebase.messaging-sw\", \"Should load Firebase Messaging SW\");\n\t\t\t\t\tconsole.log(\"[pushSubscription]\", firebase.messaging().getToken());\n\t\t\t\t}\n\n\t\t\t\tfirebase.analytics();\n\t\t\t\treturn registration;\n\t\t\t})\n\t\t\t.catch(function(err) {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\tconsole.log('[ServiceWorker] error occured...' + err);\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tapp.subscribeUserToPush = function() {\n\t\treturn app.registerServiceWorker()\n\t\t\t.then(function(registration) {\n\t\t\t\tconst subscribeOptions = {\n\t\t\t\t\tuserVisibleOnly: true,\n\t\t\t\t\tapplicationServerKey: app.urlBase64ToUint8Array(app.applicationServerKey)\n\t\t\t\t};\n\t\t\t\tif (registration) {\n\t\t\t\t\treturn registration.pushManager.subscribe(subscribeOptions);\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(function(pushSubscription) {\n\t\t\t\tvar j = JSON.parse(JSON.stringify(pushSubscription));\n\t\t\t\tif (j && j.keys) {\n\t\t\t\t\tapp.setSetting('settings.pushSubscription.endpoint', j.endpoint);\n\t\t\t\t\tapp.setSetting('settings.pushSubscription.keys.p256dh', j.keys.p256dh);\n\t\t\t\t\tapp.setSetting('settings.pushSubscription.keys.auth', j.keys.auth);\n\t\t\t\t}\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\tconsole.log('[pushSubscription]', j);\n\t\t\t\t}\n\t\t\t\treturn pushSubscription;\n\t\t\t})\n\t\t\t.catch(function(error) {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\tconsole.log('[pushSubscription]', 'subscribeUserToPush', error);\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tapp.refreshButtonsSelectors = function() {\n\t\tif (componentHandler) componentHandler.upgradeDom();\n\t\tapp.buttons = {\n\t\t\t// signin_button\n\t\t\t// _button\n\t\t\tnotification: document.querySelector('button#notification'),\n\n\t\t\tmenuTabBar: document.querySelectorAll('.mdl-layout__tab-bar a'),\n\t\t\tstatus: document.querySelectorAll('.statusButton'),\n\t\t\tsettings: document.querySelectorAll('.settingsButton'),\n\t\t\tdocs: document.querySelectorAll('.docsButton'),\n\t\t\tterms: document.querySelectorAll('.termsButton'),\n\t\t\tnotifications: document.querySelectorAll('form.notifications input.mdl-checkbox__input'),\n\n\t\t\tloginButtons: document.querySelectorAll('form.signin button.login_button'),\n\t\t\tuser_create: document.querySelectorAll('form.signup button.createUser'),\n\t\t\tuser_setpassword: document.querySelectorAll('form.resetpassword button.setPassword'),\n\t\t\tuser_forgot: document.querySelectorAll('form.forgotpassword button.forgotPassword'),\n\t\t\texpandButtons: document.querySelectorAll('.showdescription_button'),\n\t\t\texpandSourceButtons: document.querySelectorAll('.showsource_button'),\n\t\t\tobject_create: document.querySelectorAll('.showdescription_button'),\n\n\t\t\tdeleteObject: document.querySelectorAll('#objects .delete-button'),\n\t\t\tdeleteObject2: document.querySelectorAll('#objects .delete-button'),\n\t\t\teditObject: document.querySelectorAll('#objects .edit-button'),\n\t\t\tcreateObject: document.querySelector('#objects button#createObject'),\n\t\t\tsaveObject: document.querySelector('#object section.fixedActionButtons button.save-button'),\n\t\t\tbackObject: document.querySelector('#object section.fixedActionButtons button.back-button'),\n\t\t\teditObject2: document.querySelector('#object section.fixedActionButtons button.edit-button'),\n\t\t\tlistObject: document.querySelector('#object section.fixedActionButtons button.list-button'),\n\t\t\tviewuiObject: document.querySelector('#object section.fixedActionButtons button.viewui-button'),\n\t\t\taddObject: document.querySelector('#object_add section.fixedActionButtons button.add-button'),\n\t\t\taddObjectBack: document.querySelector('#object_add section.fixedActionButtons button.back-button'),\n\n\t\t\tdeleteFlow: document.querySelectorAll('#flows .delete-button'),\n\t\t\teditFlow: document.querySelectorAll('#flows .edit-button'),\n\t\t\tcreateFlow: document.querySelector('#flows button#createFlow'),\n\t\t\taddFlow: document.querySelector('#flow_add section.fixedActionButtons button.add-button'),\n\t\t\taddFlowBack: document.querySelector('#flow_add section.fixedActionButtons button.back-button'),\n\t\t\tsaveFlow: document.querySelector('#flow section.fixedActionButtons button.save-button'),\n\t\t\tbackFlow: document.querySelector('#flow section.fixedActionButtons button.back-button'),\n\t\t\teditFlow2: document.querySelector('#flow section.fixedActionButtons button.edit-button'),\n\t\t\tlistFlow: document.querySelector('#flow section.fixedActionButtons button.list-button'),\n\n\t\t\tdeleteDashboard: document.querySelectorAll('#dashboards .delete-button'),\n\t\t\teditDashboard: document.querySelectorAll('#dashboards .edit-button'),\n\t\t\tcreateDashboard: document.querySelector('#dashboards button#createDashboard'),\n\t\t\taddDashboard: document.querySelector('#dashboard_add section.fixedActionButtons button.add-button'),\n\t\t\taddDashboardBack: document.querySelector('#dashboard_add section.fixedActionButtons button.back-button'),\n\t\t\tbackDashboard: document.querySelector('#dashboard section.fixedActionButtons button.back-button'),\n\t\t\tsaveDashboard: document.querySelector('#dashboard section.fixedActionButtons button.save-button'),\n\t\t\teditDashboard2: document.querySelector('#dashboard section.fixedActionButtons button.edit-button'),\n\t\t\tlistDashboard: document.querySelector('#dashboard section.fixedActionButtons button.list-button'),\n\n\t\t\tdeleteSnippet: document.querySelectorAll('#snippets .delete-button'),\n\t\t\teditSnippet: document.querySelectorAll('#snippets .edit-button'),\n\t\t\tcreateSnippet: document.querySelector('#snippets button#createSnippet'),\n\t\t\taddSnippet: document.querySelector('#snippet_add section.fixedActionButtons button.add-button'),\n\t\t\taddSnippetBack: document.querySelector('#snippet_add section.fixedActionButtons button.back-button'),\n\t\t\tbackSnippet: document.querySelector('#snippet section.fixedActionButtons button.back-button'),\n\t\t\tsaveSnippet: document.querySelector('#snippet section.fixedActionButtons button.save-button'),\n\t\t\tlistSnippet: document.querySelector('#snippet section.fixedActionButtons button.list-button'),\n\t\t\teditSnippet2: document.querySelector('#snippet section.fixedActionButtons button.edit-button'),\n\n\t\t\tdeleteRule: document.querySelectorAll('#rules .delete-button'),\n\t\t\teditRule: document.querySelectorAll('#rules .edit-button'),\n\t\t\tcreateRule: document.querySelector('#rules button#createRule'),\n\t\t\taddRule: document.querySelector('#rule_add section.fixedActionButtons button.add-button'),\n\t\t\taddRuleBack: document.querySelector('#rule_add section.fixedActionButtons button.back-button'),\n\t\t\tbackRule: document.querySelector('#rule section.fixedActionButtons button.back-button'),\n\t\t\tsaveRule: document.querySelector('#rule section.fixedActionButtons button.save-button'),\n\t\t\tlistRule: document.querySelector('#rule section.fixedActionButtons button.list-button'),\n\t\t\teditRule2: document.querySelector('#rule section.fixedActionButtons button.edit-button'),\n\n\t\t\tdeleteMqtt: document.querySelectorAll('#mqtts .delete-button'),\n\t\t\teditMqtt: document.querySelectorAll('#mqtts .edit-button'),\n\t\t\tcreateMqtt: document.querySelector('#mqtts button#createMqtt'),\n\n\t\t\tdeleteSource: document.querySelectorAll('#sources .delete-button'),\n\t\t\teditSource: document.querySelectorAll('#sources .edit-button'),\n\t\t\tcreateSource: document.querySelector('#sources button#createSource'),\n\t\t\taddSource: document.querySelector('#source_add section.fixedActionButtons button.add-button'),\n\t\t\taddSourceBack: document.querySelector('#source_add section.fixedActionButtons button.back-button'),\n\t\t\tbackSource: document.querySelector('#source section.fixedActionButtons button.back-button'),\n\t\t\tsaveSource: document.querySelector('#source section.fixedActionButtons button.save-button'),\n\t\t\tlistSource: document.querySelector('#source section.fixedActionButtons button.list-button'),\n\t\t\teditSource2: document.querySelector('#source section.fixedActionButtons button.edit-button'),\n\t\t\tbuildSource: document.querySelector('#source section.fixedActionButtons button.build-button'),\n\t\t\tdeploySource: document.querySelector('#source section.fixedActionButtons button.deploy-button'),\n\t\t\teditSourceChild: document.querySelectorAll('#source section button.child_edit_btn'),\n\t\t\tlink_offSourceObject: document.querySelectorAll('#source section button.object_link_off_btn'),\n\t\t\teditSourceObject: document.querySelectorAll('#source section button.object_edit_btn'),\n\t\t\tdeploySourceObject: document.querySelectorAll('#source section button.object_deploy_btn, #object section button.object_deploy_btn'),\n\t\t\tbuildSourceObject: document.querySelectorAll('#source section button.object_build_btn, #object section button.object_build_btn'),\n\t\t};\n\t};\n\n\tapp.refreshContainers = function() {\n\t\tapp.containers = {\n\t\t\tspinner: document.querySelector('section#loading-spinner'),\n\t\t\tindex: document.querySelector('section#index'),\n\t\t\tprofile: document.querySelector('section#profile'),\n\t\t\tsettings: document.querySelector('section#settings'),\n\t\t\tstatus: document.querySelector('section#status'),\n\t\t\tterms: document.querySelector('section#terms'),\n\t\t\tdocs: document.querySelector('section#docs'),\n\t\t\texploration: document.querySelector('section#exploration'),\n\t\t\tusersList: document.querySelector('section#users-list'),\n\t\t\tcompatibleDevices: document.querySelector('section#compatible-devices'),\n\t\t\topenSourceLicenses: document.querySelector('section#openSourceLicenses'),\n\n\t\t\tobjects: document.querySelector('section#objects'),\n\t\t\tobject: document.querySelector('section#object'),\n\t\t\tobject_add: document.querySelector('section#object_add'),\n\n\t\t\tflows: document.querySelector('section#flows'),\n\t\t\tflow: document.querySelector('section#flow'),\n\t\t\tflow_add: document.querySelector('section#flow_add'),\n\n\t\t\tdashboards: document.querySelector('section#dashboards'),\n\t\t\tdashboard: document.querySelector('section#dashboard'),\n\t\t\tdashboard_add: document.querySelector('section#dashboard_add'),\n\n\t\t\tsnippets: document.querySelector('section#snippets'),\n\t\t\tsnippet: document.querySelector('section#snippet'),\n\t\t\tsnippet_add: document.querySelector('section#snippet_add'),\n\n\t\t\trules: document.querySelector('section#rules'),\n\t\t\trule: document.querySelector('section#rule'),\n\t\t\trule_add: document.querySelector('section#rule_add'),\n\n\t\t\tmqtts: document.querySelector('section#mqtts'),\n\t\t\tmqtt: document.querySelector('section#mqtt'),\n\t\t\tmqtt_add: document.querySelector('section#mqtt_add'),\n\n\t\t\tsources: document.querySelector('section#sources'),\n\t\t\tsource: document.querySelector('section#source'),\n\t\t\tsource_add: document.querySelector('section#source_add'),\n\n\t\t\tmenuIconElement: document.querySelector('.mdl-layout__drawer-button'),\n\t\t\tmenuElement: document.getElementById('drawer'),\n\t\t\tmenuOverlayElement: document.querySelector('.menu__overlay'),\n\t\t\tdrawerObfuscatorElement: document.getElementsByClassName('mdl-layout__obfuscator')[0],\n\t\t\tmenuItems: document.querySelectorAll('.mdl-layout__drawer nav a.mdl-navigation__link'),\n\t\t\tmenuTabItems: document.querySelectorAll('.mdl-layout__tab-bar a.mdl-navigation__link.mdl-layout__tab'),\n\t\t}\n\t};\n\n\tapp.setExpandAction = function() {\n\t\tcomponentHandler.upgradeDom();\n\t\tapp.refreshButtonsSelectors();\n\t\tfor (var i in app.buttons.expandButtons) {\n\t\t\tif ((app.buttons.expandButtons[i]).childElementCount > -1) {\n\t\t\t\t(app.buttons.expandButtons[i]).addEventListener('click', app.expand, false);\n\t\t\t}\n\t\t}\n\t};\n\n\tapp.expand = function(evt) {\n\t\tvar id = (evt.target.parentElement).getAttribute('for') != null ? (evt.target.parentElement).getAttribute('for') : (evt.target).getAttribute('for');\n\t\tif (id != null) {\n\t\t\tdocument.getElementById(id).classList.toggle('hidden');\n\t\t\tif (evt.target.parentElement.querySelector('i.material-icons').innerHTML == 'expand_more') {\n\t\t\t\tevt.target.parentElement.querySelector('i.material-icons').innerHTML = 'expand_less';\n\t\t\t} else {\n\t\t\t\tevt.target.parentElement.querySelector('i.material-icons').innerHTML = 'expand_more';\n\t\t\t}\n\t\t}\n\t};\n\n\tapp.initNewSection = function(section) {\n\t\tif (!document.getElementById(section)) {\n\t\t\tlet newSection = document.createElement(\"section\");\n\t\t\tnewSection.setAttribute(\"id\", section);\n\t\t\tnewSection.classList.add(\"mdl-tabs__panel\", \"mdl-layout__tab-panel\", \"is-inactive\");\n\t\t\tif (app.sectionsPageTitles[section]) {\n\t\t\t\tlet h2 = document.createElement(\"h2\");\n\t\t\t\th2.classList.add(\"mdl-card__title-text\", \"mdl-subheader-content\");\n\t\t\t\tvar title = document.createTextNode((app.sectionsPageTitles[section]).replace(/%s/g, \"\"));\n\t\t\t\th2.appendChild(title);\n\t\t\t\tlet divH2 = document.createElement(\"div\");\n\t\t\t\tdivH2.classList.add(\"mdl-grid\", \"mdl-cell--12-col\");\n\t\t\t\tdivH2.appendChild(h2);\n\t\t\t\tnewSection.appendChild(divH2);\n\t\t\t}\n\t\t\tlet divContent = document.createElement(\"div\");\n\t\t\tdivContent.classList.add(\"page-content\", \"mdl-grid\", \"mdl-grid--no-spacing\");\n\t\t\tnewSection.appendChild(divContent);\n\n\t\t\tlet main = document.getElementsByClassName(\"mdl-layout__content\")[0];\n\t\t\tmain.appendChild(newSection);\n\n\t\t\tapp.refreshContainers();\n\t\t}\n\t};\n\n\tapp.setSection = function(section, direction) {\n\t\tsection = section.split(\"?\")[0];\n\t\tapp.initNewSection(section);\n\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\tconsole.log('[setSection]', section);\n\t\t}\n\t\twindow.scrollTo(0, 0);\n\t\tif (section === 'public-object') {\n\t\t\tvar urlParams = new URLSearchParams(window.location.search); // (window.location.hash.substr(1).split(\"?\"))[1] // TODO, recursive?\n\t\t\tvar params = {};\n\t\t\tif (Array.from(urlParams).length > -1) {\n\t\t\t\tfor (let p of urlParams) {\n\t\t\t\t\tvar n = p[0];\n\t\t\t\t\tparams[n] = p[1];\n\t\t\t\t}\n\t\t\t\tif (params['id'] == \"\") {\n\t\t\t\t\tapp.setSection('objects'); // TODO, recursive?\n\t\t\t\t} else if (params['id']) {\n\t\t\t\t\tapp.resources.objects.display(params['id'], false, false, true);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (section === 'object') {\n\t\t\tvar urlParams = new URLSearchParams(window.location.search); // (window.location.hash.substr(1).split(\"?\"))[1] // TODO, recursive?\n\t\t\tvar params = {};\n\t\t\tif (Array.from(urlParams).length > -1) {\n\t\t\t\tfor (let p of urlParams) {\n\t\t\t\t\tvar n = p[0];\n\t\t\t\t\tparams[n] = p[1];\n\t\t\t\t}\n\t\t\t\tif (params['id'] == \"\") {\n\t\t\t\t\tapp.setSection('objects'); // TODO, recursive?\n\t\t\t\t} else if (params['id']) {\n\t\t\t\t\tapp.resources.objects.display(params['id'], false, false, false);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (section === 'object_add') {\n\t\t\tapp.resources.objects.displayAdd(app.defaultResources.object, true, false, false);// TODO, recursive?\n\t\t} else if (section === 'edit-object') {\n\t\t\tvar urlParams = new URLSearchParams(window.location.search); // (window.location.hash.substr(1).split(\"?\"))[1] // TODO, recursive?\n\t\t\tvar params = {};\n\t\t\tif (Array.from(urlParams).length > -1) {\n\t\t\t\tfor (let p of urlParams) {\n\t\t\t\t\tvar n = p[0];\n\t\t\t\t\tparams[n] = p[1];\n\t\t\t\t}\n\t\t\t\tif (params['id'] == \"\") {\n\t\t\t\t\tapp.setSection('objects'); // TODO, recursive?\n\t\t\t\t} else if (params['id']) {\n\t\t\t\t\tapp.resources.objects.display(params['id'], false, true, false);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (section === 'flow') {\n\t\t\tvar urlParams = new URLSearchParams(window.location.search); // .toString();\n\t\t\tvar params = {};\n\t\t\tif (Array.from(urlParams).length > -1) {\n\t\t\t\tfor (let p of urlParams) {\n\t\t\t\t\tvar n = p[0];\n\t\t\t\t\tparams[n] = p[1];\n\t\t\t\t}\n\t\t\t\tif (params['id'] == \"\") {\n\t\t\t\t\tapp.setSection('flows'); // TODO, recursive?\n\t\t\t\t} else if (params['id']) {\n\t\t\t\t\tapp.resources.flows.display(params['id'], false, false, false);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (section === 'flow_add') {\n\t\t\tdocument.title = app.sectionsPageTitles[section] !== undefined ? app.sectionsPageTitles[section] : app.defaultPageTitle;\n\t\t\twindow.location.hash = '#' + section;\n\t\t\tapp.resources.flows.displayAdd(app.defaultResources.flow, true, false, false);\n\t\t} else if (section === 'snippet') {\n\t\t\tvar urlParams = new URLSearchParams(window.location.search); // .toString();\n\t\t\tvar params = {};\n\t\t\tif (Array.from(urlParams).length > -1) {\n\t\t\t\tfor (let p of urlParams) {\n\t\t\t\t\tvar n = p[0];\n\t\t\t\t\tparams[n] = p[1];\n\t\t\t\t}\n\t\t\t\tif (params['id'] == \"\") {\n\t\t\t\t\tapp.setSection('snippets'); // TODO, recursive?\n\t\t\t\t} else if (params['id']) {\n\t\t\t\t\tapp.resources.dashboards.display(params['id'], false, false, false);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (section === 'snippet_add') {\n\t\t\tdocument.title = app.sectionsPageTitles[section] !== undefined ? app.sectionsPageTitles[section] : app.defaultPageTitle;\n\t\t\twindow.location.hash = '#' + section;\n\t\t\tapp.resources.snippets.displayAdd(app.defaultResources.snippet, true, false, false);\n\t\t} else if (section === 'dashboard') {\n\t\t\tvar urlParams = new URLSearchParams(window.location.search); // .toString();\n\t\t\tvar params = {};\n\t\t\tif (Array.from(urlParams).length > -1) {\n\t\t\t\tfor (let p of urlParams) {\n\t\t\t\t\tvar n = p[0];\n\t\t\t\t\tparams[n] = p[1];\n\t\t\t\t}\n\t\t\t\tif (params['id'] == \"\") {\n\t\t\t\t\tapp.setSection('dashboards'); // TODO, recursive?\n\t\t\t\t} else if (params['id']) {\n\t\t\t\t\tapp.resources.dashboards.display(params['id'], false, false, false);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (section === 'dashboard_add') {\n\t\t\tdocument.title = app.sectionsPageTitles[section] !== undefined ? app.sectionsPageTitles[section] : app.defaultPageTitle;\n\t\t\twindow.location.hash = '#' + section;\n\t\t\tapp.resources.dashboards.displayAdd(app.defaultResources.dashboard, true, false, false);\n\t\t} else if (section === 'rule') {\n\t\t\tvar urlParams = new URLSearchParams(window.location.search); // .toString();\n\t\t\tvar params = {};\n\t\t\tif (Array.from(urlParams).length > -1) {\n\t\t\t\tfor (let p of urlParams) {\n\t\t\t\t\tvar n = p[0];\n\t\t\t\t\tparams[n] = p[1];\n\t\t\t\t}\n\t\t\t\tif (params['id'] == \"\") {\n\t\t\t\t\tapp.setSection('rules'); // TODO, recursive?\n\t\t\t\t} else if (params['id']) {\n\t\t\t\t\tapp.resources.rules.display(params['id'], false, false, false);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (section === 'rule_add') {\n\t\t\tdocument.title = app.sectionsPageTitles[section] !== undefined ? app.sectionsPageTitles[section] : app.defaultPageTitle;\n\t\t\twindow.location.hash = '#' + section;\n\t\t\tapp.resources.rules.displayAdd(app.defaultResources.rule, true, false, false);\n\t\t} else if (section === 'mqtt') {\n\t\t\tvar urlParams = new URLSearchParams(window.location.search); // .toString();\n\t\t\tvar params = {};\n\t\t\tif (Array.from(urlParams).length > -1) {\n\t\t\t\tfor (let p of urlParams) {\n\t\t\t\t\tvar n = p[0];\n\t\t\t\t\tparams[n] = p[1];\n\t\t\t\t}\n\t\t\t\tif (params['id'] == \"\") {\n\t\t\t\t\tapp.setSection('mqtts'); // TODO, recursive?\n\t\t\t\t} else if (params['id']) {\n\t\t\t\t\tapp.resources.mqtts.display(params['id'], false, false, false);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (section === 'mqtt_add') {\n\t\t\tdocument.title = app.sectionsPageTitles[section] !== undefined ? app.sectionsPageTitles[section] : app.defaultPageTitle;\n\t\t\twindow.location.hash = '#' + section;\n\t\t\tapp.resources.mqtts.displayAdd(app.defaultResources.mqtt, true, false, false);\n\t\t} else if (section === 'source') {\n\t\t\tvar urlParams = new URLSearchParams(window.location.search); // .toString();\n\t\t\tvar params = {};\n\t\t\tif (Array.from(urlParams).length > -1) {\n\t\t\t\tfor (let p of urlParams) {\n\t\t\t\t\tvar n = p[0];\n\t\t\t\t\tparams[n] = p[1];\n\t\t\t\t}\n\t\t\t\tif (params['id'] == \"\") {\n\t\t\t\t\tapp.setSection('sources'); // TODO, recursive?\n\t\t\t\t} else if (params['id']) {\n\t\t\t\t\tapp.resources.sources.display(params['id'], false, false, false);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (section === 'source_add') {\n\t\t\tdocument.title = app.sectionsPageTitles[section] !== undefined ? app.sectionsPageTitles[section] : app.defaultPageTitle;\n\t\t\twindow.location.hash = '#' + section;\n\t\t\tapp.resources.sources.displayAdd(app.defaultResources.source, true, false, false);\n\t\t} else if (section === 'profile') {\n\t\t\tdocument.title = app.sectionsPageTitles[section] !== undefined ? app.sectionsPageTitles[section] : app.defaultPageTitle;\n\t\t\twindow.location.hash = '#' + section;\n\t\t\t(app.containers.profile).querySelector('.page-content').innerHTML = \"\";\n\t\t\tapp.fetchProfile();\n\t\t} else if (section === 'settings') {\n\t\t\tdocument.title = app.sectionsPageTitles[section] !== undefined ? app.sectionsPageTitles[section] : app.defaultPageTitle;\n\t\t\twindow.location.hash = '#' + section;\n\t\t\tapp.getSettings();\n\t\t} else if (section === 'login') {\n\t\t\tdocument.title = app.sectionsPageTitles[section] !== undefined ? app.sectionsPageTitles[section] : app.defaultPageTitle;\n\t\t\twindow.location.hash = '#' + section;\n\t\t\tapp.displayLoginForm(document.querySelector('#login').querySelector('.page-content'));\n\t\t} else if (section === 'users-list') {\n\t\t\tdocument.title = app.sectionsPageTitles[section] !== undefined ? app.sectionsPageTitles[section] : app.defaultPageTitle;\n\t\t\twindow.location.hash = '#' + section;\n\t\t\tapp.getUsersList();\n\t\t} else if (section === 'compatible-devices') {\n\t\t\tdocument.title = app.sectionsPageTitles[section] !== undefined ? app.sectionsPageTitles[section] : app.defaultPageTitle;\n\t\t\twindow.location.hash = '#' + section;\n\t\t\tapp.getCompatibleDevices();\n\t\t} else if (section === 'openSourceLicenses') {\n\t\t\tdocument.title = app.sectionsPageTitles[section] !== undefined ? app.sectionsPageTitles[section] : app.defaultPageTitle;\n\t\t\twindow.location.hash = '#' + section;\n\t\t\tapp.getOpenSourceLicenses();\n\t\t} else if (section === 'manage_notifications') {\n\t\t\tdocument.title = app.sectionsPageTitles[section] !== undefined ? app.sectionsPageTitles[section] : app.defaultPageTitle;\n\t\t\twindow.location.hash = '#' + section;\n\t\t\tif (typeof firebase !== \"undefined\") {\n\t\t\t\tfirebase.analytics().logEvent('manage_notifications');\n\t\t\t}\n\t\t} else if (section === 'exploration') {\n\t\t\tdocument.title = app.sectionsPageTitles[section] !== undefined ? app.sectionsPageTitles[section] : app.defaultPageTitle;\n\t\t\twindow.location.hash = '#' + section;\n\t\t} else {\n\t\t\tdocument.title = app.sectionsPageTitles[section] !== undefined ? app.sectionsPageTitles[section] : app.defaultPageTitle;\n\t\t\twindow.location.hash = '#' + section;\n\t\t\tapp.fetchItemsPaginated(section, undefined, app.itemsPage[section], app.itemsSize[section]);\n\t\t}\n\t\tapp.refreshButtonsSelectors();\n\t\tvar act = document.querySelectorAll('section.is-active');\n\t\tfor (var i in act) {\n\t\t\tif ((act[i]).childElementCount > -1) {\n\t\t\t\tact[i].classList.remove('is-active');\n\t\t\t\tact[i].classList.add('is-inactive');\n\t\t\t}\n\t\t}\n\t\tfor (var i in app.buttons.menuTabBar) {\n\t\t\tif ((app.buttons.menuTabBar[i]).childElementCount > -1) {\n\t\t\t\tapp.buttons.menuTabBar[i].classList.remove('is-active');\n\t\t\t\tif (app.buttons.menuTabBar[i].getAttribute(\"for\") == section || app.buttons.menuTabBar[i].getAttribute(\"for\") == section + 's') {\n\t\t\t\t\tapp.buttons.menuTabBar[i].classList.add('is-active');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (document.querySelector('#' + section)) {\n\t\t\tif (direction == 'ltr') {\n\t\t\t\tdocument.querySelector('#' + section).style.transform = \"translateX(-120%) !important\";\n\t\t\t} else {\n\t\t\t\tdocument.querySelector('#' + section).style.transform = \"translateX(120%) !important\";\n\t\t\t}\n\t\t\tdocument.querySelector('#' + section).classList.remove('is-inactive');\n\t\t\tdocument.querySelector('#' + section).classList.add('is-active');\n\t\t\tif (!app.isLogged && (\n\t\t\t\t!document.querySelector('#' + section).querySelector('.page-content form.signin') &&\n\t\t\t\tsection !== 'signup' &&\n\t\t\t\tsection !== 'reset-password' &&\n\t\t\t\tsection !== 'forgot-password' &&\n\t\t\t\tsection !== 'settings' &&\n\t\t\t\tsection !== 'docs' &&\n\t\t\t\tsection !== 'terms' &&\n\t\t\t\tsection !== 'compatible-devices' &&\n\t\t\t\tsection !== 'openSourceLicenses' &&\n\t\t\t\tsection !== 'manage_notifications' &&\n\t\t\t\tsection !== 'use-cases'\n\t\t\t)\n\t\t\t) {\n\t\t\t\tapp.displayLoginForm(document.querySelector('#' + section).querySelector('.page-content'));\n\t\t\t}\n\t\t}\n\t\tapp.currentSection = section;\n\t\tif (typeof firebase === \"undefined\") {\n\t\t\tvar firebase = {};\n\t\t}\n\t\tif (typeof firebase !== \"object\" && typeof firebase.apps !== \"object\" && typeof firebase.apps.length !== \"number\") {\n\t\t\tfirebase.analytics().setCurrentScreen(section, null);\n\t\t}\n\t\tif (typeof Tawk_API !== \"undefined\" && typeof Tawk_API.setAttributes === \"function\") {\n\t\t\tTawk_API.addEvent(\"setCurrentScreen\", { \"screen\": section }, function(error) { });\n\t\t}\n\t};\n\n\tapp.setItemsClickAction = function(type) {\n\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\tconsole.log('DEBUG setItemsClickAction', type);\n\t\t}\n\t\tvar items = document.querySelectorAll(\"[data-action='view']\");\n\t\tfor (var i in items) {\n\t\t\tif (type == 'objects' && (items[i]) !== undefined && (items[i]).childElementCount > -1 && (items[i]).getAttribute('data-type') == type) {\n\t\t\t\t((items[i]).querySelector(\"div.mdl-card__title\")).addEventListener('click', function(evt) {\n\t\t\t\t\tvar item = evt.currentTarget.parentNode.parentNode;\n\t\t\t\t\titem.classList.add('is-hover');\n\t\t\t\t\tapp.resources.objects.display(item.dataset.id, false, false, false);\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t}, { passive: false, });\n\n\t\t\t\tvar divs = (items[i]).querySelectorAll(\"div.mdl-list__item--three-line\");\n\t\t\t\tArray.from(divs).forEach(function(div) {\n\t\t\t\t\t(div).addEventListener('click', function(evt) {\n\t\t\t\t\t\tvar item = evt.currentTarget.parentNode.parentNode;\n\t\t\t\t\t\titem.classList.add('is-hover');\n\t\t\t\t\t\tapp.resources.objects.display(item.dataset.id, false, false, false);\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t}, { passive: false, });\n\t\t\t\t});\n\t\t\t} else if (type == 'flows' && (items[i]) !== undefined && (items[i]).childElementCount > -1 && (items[i]).getAttribute('data-type') == type) {\n\t\t\t\t((items[i]).querySelector(\"div.mdl-card__title\")).addEventListener('click', function(evt) {\n\t\t\t\t\tvar item = evt.currentTarget.parentNode.parentNode;\n\t\t\t\t\titem.classList.add('is-hover');\n\t\t\t\t\tapp.resources.flows.display(item.dataset.id, false, false, false);\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t}, { passive: false, });\n\n\t\t\t\tvar divs = (items[i]).querySelectorAll(\"div.mdl-list__item--three-line\");\n\t\t\t\tArray.from(divs).forEach(function(div) {\n\t\t\t\t\t(div).addEventListener('click', function(evt) {\n\t\t\t\t\t\tvar item = evt.currentTarget.parentNode.parentNode;\n\t\t\t\t\t\titem.classList.add('is-hover');\n\t\t\t\t\t\tapp.resources.flows.display(item.dataset.id, false, false, false);\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t}, { passive: false, });\n\t\t\t\t});\n\t\t\t} else if (type == 'dashboards' && (items[i]) !== undefined && (items[i]).childElementCount > -1 && (items[i]).getAttribute('data-type') == type) {\n\t\t\t\t((items[i]).querySelector(\"div.mdl-card__title\")).addEventListener('click', function(evt) {\n\t\t\t\t\tvar item = evt.currentTarget.parentNode.parentNode;\n\t\t\t\t\titem.classList.add('is-hover');\n\t\t\t\t\tapp.resources.dashboards.display(item.dataset.id, false, false, false);\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t}, { passive: false, });\n\n\t\t\t\tvar divs = (items[i]).querySelectorAll(\"div.mdl-list__item--three-line\");\n\t\t\t\tArray.from(divs).forEach(function(div) {\n\t\t\t\t\t(div).addEventListener('click', function(evt) {\n\t\t\t\t\t\tvar item = evt.currentTarget.parentNode.parentNode;\n\t\t\t\t\t\titem.classList.add('is-hover');\n\t\t\t\t\t\tapp.resources.dashboards.display(item.dataset.id, false, false, false);\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t}, { passive: false, });\n\t\t\t\t});\n\t\t\t} else if (type == 'snippets' && (items[i]) !== undefined && (items[i]).childElementCount > -1 && (items[i]).getAttribute('data-type') == type) {\n\t\t\t\t((items[i]).querySelector(\"div.mdl-card__title\")).addEventListener('click', function(evt) {\n\t\t\t\t\tvar item = evt.currentTarget.parentNode.parentNode;\n\t\t\t\t\titem.classList.add('is-hover');\n\t\t\t\t\tapp.resources.snippets.display(item.dataset.id, false, false, false);\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t}, { passive: false, });\n\n\t\t\t\tvar divs = (items[i]).querySelectorAll(\"div.mdl-list__item--three-line\");\n\t\t\t\tArray.from(divs).forEach(function(div) {\n\t\t\t\t\t(div).addEventListener('click', function(evt) {\n\t\t\t\t\t\tvar item = evt.currentTarget.parentNode.parentNode;\n\t\t\t\t\t\titem.classList.add('is-hover');\n\t\t\t\t\t\tapp.resources.snippets.display(item.dataset.id, false, false, false);\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t}, { passive: false, });\n\t\t\t\t});\n\t\t\t} else if (type == 'rules' && (items[i]) !== undefined && (items[i]).childElementCount > -1 && (items[i]).getAttribute('data-type') == type) {\n\t\t\t\t((items[i]).querySelector(\"div.mdl-card__title\")).addEventListener('click', function(evt) {\n\t\t\t\t\tvar item = evt.currentTarget.parentNode.parentNode;\n\t\t\t\t\titem.classList.add('is-hover');\n\t\t\t\t\tapp.resources.rules.display(item.dataset.id, false, false, false);\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t}, { passive: false, });\n\n\t\t\t\tvar divs = (items[i]).querySelectorAll(\"div.mdl-list__item--three-line\");\n\t\t\t\tArray.from(divs).forEach(function(div) {\n\t\t\t\t\t(div).addEventListener('click', function(evt) {\n\t\t\t\t\t\tvar item = evt.currentTarget.parentNode.parentNode;\n\t\t\t\t\t\titem.classList.add('is-hover');\n\t\t\t\t\t\tapp.resources.rules.display(item.dataset.id, false, false, false);\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t}, { passive: false, });\n\t\t\t\t});\n\t\t\t} else if (type == 'sources' && (items[i]) !== undefined && (items[i]).childElementCount > -1 && (items[i]).getAttribute('data-type') == type) {\n\t\t\t\t((items[i]).querySelector(\"div.mdl-card__title\")).addEventListener('click', function(evt) {\n\t\t\t\t\tvar item = evt.currentTarget.parentNode.parentNode;\n\t\t\t\t\titem.classList.add('is-hover');\n\t\t\t\t\tapp.resources.sources.display(item.dataset.id, false, false, false);\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t}, { passive: false, });\n\n\t\t\t\tvar divs = (items[i]).querySelectorAll(\"div.mdl-list__item--three-line\");\n\t\t\t\tArray.from(divs).forEach(function(div) {\n\t\t\t\t\t(div).addEventListener('click', function(evt) {\n\t\t\t\t\t\tvar item = evt.currentTarget.parentNode.parentNode;\n\t\t\t\t\t\titem.classList.add('is-hover');\n\t\t\t\t\t\tapp.resources.sources.display(item.dataset.id, false, false, false);\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t}, { passive: false, });\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\t// swapDate\n\t\tvar swaps = document.querySelectorAll(\"button.swapDate\");\n\t\tfor (var s in swaps) {\n\t\t\tif ((swaps[s]) !== undefined && (swaps[s]).childElementCount > -1) {\n\t\t\t\t(swaps[s]).addEventListener('click', function(evt) {\n\t\t\t\t\tvar datasetid = evt.currentTarget.dataset.id;\n\t\t\t\t\tvar createdElement = document.querySelector(\"div[data-id='\" + datasetid + \"'] span[data-date='created']\").classList;\n\t\t\t\t\tvar updatedElement = document.querySelector(\"div[data-id='\" + datasetid + \"'] span[data-date='updated']\").classList;\n\t\t\t\t\tif (createdElement.contains(\"visible\")) {\n\t\t\t\t\t\tcreatedElement.add('hidden');\n\t\t\t\t\t\tcreatedElement.remove('visible');\n\t\t\t\t\t\tupdatedElement.add('visible');\n\t\t\t\t\t\tupdatedElement.remove('hidden');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcreatedElement.add('visible');\n\t\t\t\t\t\tcreatedElement.remove('hidden');\n\t\t\t\t\t\tupdatedElement.add('hidden');\n\t\t\t\t\t\tupdatedElement.remove('visible');\n\t\t\t\t\t}\n\n\t\t\t\t}, { passive: false, });\n\t\t\t}\n\t\t};\n\n\t\tvar lazys = document.querySelectorAll(\"button.lazyloading\");\n\t\tfor (var l in lazys) {\n\t\t\tif ((lazys[l]) !== undefined && (lazys[l]).childElementCount > -1) {\n\t\t\t\t(lazys[l]).addEventListener('click', function(evt) {\n\t\t\t\t\tvar size = evt.currentTarget.dataset.size;\n\t\t\t\t\tvar page = evt.currentTarget.dataset.page;\n\t\t\t\t\tvar type = evt.currentTarget.dataset.type;\n\n\t\t\t\t\tapp.itemsPage[type] = page;\n\t\t\t\t\tapp.itemsSize[type] = size;\n\t\t\t\t\tapp.fetchItemsPaginated(type, undefined, app.itemsPage[type], app.itemsSize[type]);\n\t\t\t\t}, { passive: false, });\n\t\t\t}\n\t\t};\n\t};\n\n\tapp.showModal = function() {\n\t\tdialog.style.display = 'block';\n\t\tdialog.style.position = 'fixed';\n\t\tdialog.style.top = '20%';\n\t\tdialog.style.zIndex = '9999';\n\t};\n\n\tapp.hideModal = function() {\n\t\tdialog.style.display = 'none';\n\t\tdialog.style.zIndex = '-9999';\n\t};\n\n\tapp.copyTextToClipboard = function(text, evt) {\n\t\tif (!navigator.clipboard) {\n\t\t\tvar copyTextarea = evt.currentTarget.parentNode.querySelector('.copytextarea');\n\t\t\tcopyTextarea.focus();\n\t\t\tcopyTextarea.select();\n\t\t\tif (document.execCommand('copy')) {\n\t\t\t\ttoast(text + ' has been copied to clipboard.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\ttoast('Could not copy text: ' + text, { timeout: app.toastDuration, type: \"warning\" });\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\tnavigator.clipboard.writeText(text).then(function() {\n\t\t\t\ttoast(text + ' has been copied to clipboard.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\treturn true;\n\t\t\t}, function(err) {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\tconsole.log('DEBUG clipboard', 'Could not copy text: ', err);\n\t\t\t\t}\n\t\t\t\ttoast('Could not copy text: ' + text, { timeout: app.toastDuration, type: \"warning\" });\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t};\n\n\tapp.setListActions = function(type) {\n\t\tapp.refreshButtonsSelectors();\n\t\tvar dialog = document.getElementById('dialog');\n\t\tvar copyButtons = document.querySelectorAll('.copy-button');\n\n\t\tfor (var c = 0; c < copyButtons.length; c++) {\n\t\t\tcopyButtons[c].addEventListener('click', function(evt) {\n\t\t\t\tvar myId = evt.currentTarget.dataset.id;\n\t\t\t\tapp.copyTextToClipboard(myId, evt);\n\t\t\t\tevt.preventDefault();\n\t\t\t});\n\t\t}\n\n\t\tif (type === \"objects\") {\n\t\t\tfor (var d = 0; d < app.buttons.deleteObject.length; d++) {\n\t\t\t\tapp.buttons.deleteObject[d].addEventListener('click', function(evt) {\n\t\t\t\t\tdialog.querySelector('h3').innerHTML = '<i class=\"material-icons md-48\">' + app.icons.delete_question + '</i> Delete Object';\n\t\t\t\t\tdialog.querySelector('.mdl-dialog__content').innerHTML = '<p>Do you really want to delete \\\"' + evt.target.parentNode.dataset.name + '\\\"?</p>'; //\n\t\t\t\t\tdialog.querySelector('.mdl-dialog__actions').innerHTML = '<button class=\"mdl-button btn danger yes-button\">Yes</button> <button class=\"mdl-button cancel-button\">No, Cancel</button>';\n\t\t\t\t\tapp.showModal();\n\t\t\t\t\tvar myId = evt.target.parentNode.dataset.id;\n\t\t\t\t\tevt.preventDefault();\n\n\t\t\t\t\tdialog.querySelector('.cancel-button').addEventListener('click', function(e) {\n\t\t\t\t\t\tapp.hideModal();\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t\tdialog.querySelector('.yes-button').addEventListener('click', function(e) {\n\t\t\t\t\t\tapp.hideModal();\n\t\t\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem('bearer'));\n\t\t\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\t\t\t\tvar myInit = { method: 'DELETE', headers: myHeaders };\n\t\t\t\t\t\tvar url = `${app.baseUrl}/${app.api_version}/objects/${myId}`;\n\t\t\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t\t\t\t).then(function(fetchResponse) {\n\t\t\t\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(function(response) {\n\t\t\t\t\t\t\t\tdocument.querySelector('[data-id=\"' + myId  + '\"]').classList.add('removed');\n\t\t\t\t\t\t\t\ttoast(\"Object has been deleted.\", { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\t\t\ttoast(\"Object has not been deleted.\", { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tfor (var e = 0; e < app.buttons.editObject.length; e++) {\n\t\t\t\t//console.log(buttons.editObject[e]);\n\t\t\t\tapp.buttons.editObject[e].addEventListener('click', function(evt) {\n\t\t\t\t\tapp.resources.objects.display(evt.currentTarget.dataset.id, false, true, false);\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (type === \"flows\") {\n\t\t\tfor (var d = 0; d < app.buttons.deleteFlow.length; d++) {\n\t\t\t\t//console.log(buttons.deleteFlow[d]);\n\t\t\t\tapp.buttons.deleteFlow[d].addEventListener('click', function(evt) {\n\t\t\t\t\tdialog.querySelector('h3').innerHTML = '<i class=\"material-icons md-48\">' + app.icons.delete_question + '</i> Delete Flow';\n\t\t\t\t\tdialog.querySelector('.mdl-dialog__content').innerHTML = '<p>Do you really want to delete \\\"' + evt.target.parentNode.dataset.name + '\\\"? This action will remove all datapoints in the flow and can\\'t be recovered.</p>';\n\t\t\t\t\tdialog.querySelector('.mdl-dialog__actions').innerHTML = '<button class=\"mdl-button btn danger yes-button\">Yes</button> <button class=\"mdl-button cancel-button\">No, Cancel</button>';\n\t\t\t\t\tapp.showModal();\n\t\t\t\t\tvar myId = evt.target.parentNode.dataset.id;\n\t\t\t\t\tevt.preventDefault();\n\n\t\t\t\t\tdialog.querySelector('.cancel-button').addEventListener('click', function(e) {\n\t\t\t\t\t\tapp.hideModal();\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t\tdialog.querySelector('.yes-button').addEventListener('click', function(e) {\n\t\t\t\t\t\tapp.hideModal();\n\t\t\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem('bearer'));\n\t\t\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\t\t\t\tvar myInit = { method: 'DELETE', headers: myHeaders };\n\t\t\t\t\t\tvar url = `${app.baseUrl}/${app.api_version}/flows/${myId}`;\n\t\t\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t\t\t\t).then(function(fetchResponse) {\n\t\t\t\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(function(response) {\n\t\t\t\t\t\t\t\tdocument.querySelector('[data-id=\"' + myId + '\"]').classList.add('removed');\n\t\t\t\t\t\t\t\tapp.resources.flows.onDelete(myId);\n\t\t\t\t\t\t\t\ttoast('Flow has been deleted.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\t\t\ttoast('Flow has not been deleted.', { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tfor (var e=0;e<app.buttons.editFlow.length;e++) {\n\t\t\t\t//console.log(buttons.editFlow[e]);\n\t\t\t\tapp.buttons.editFlow[e].addEventListener('click', function(evt) {\n\t\t\t\t\tapp.resources.flows.display(evt.currentTarget.dataset.id, false, true, false);\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (type === \"dashboards\") {\n\t\t\tfor (var d = 0; d < app.buttons.deleteDashboard.length; d++) {\n\t\t\t\t//console.log(buttons.deleteDashboard[d]);\n\t\t\t\tapp.buttons.deleteDashboard[d].addEventListener('click', function(evt) {\n\t\t\t\t\tdialog.querySelector('h3').innerHTML = '<i class=\"material-icons md-48\">' + app.icons.delete_question + '</i> Delete Dashboard';\n\t\t\t\t\tdialog.querySelector('.mdl-dialog__content').innerHTML = '<p>Do you really want to delete \\\"' + evt.target.parentNode.dataset.name + '\\\"?</p>';\n\t\t\t\t\tdialog.querySelector('.mdl-dialog__actions').innerHTML = '<button class=\"mdl-button btn danger yes-button\">Yes</button> <button class=\"mdl-button cancel-button\">No, Cancel</button>';\n\t\t\t\t\tapp.showModal();\n\t\t\t\t\tvar myId = evt.target.parentNode.dataset.id;\n\t\t\t\t\tevt.preventDefault();\n\n\t\t\t\t\tdialog.querySelector('.cancel-button').addEventListener('click', function(e) {\n\t\t\t\t\t\tapp.hideModal();\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t\tdialog.querySelector('.yes-button').addEventListener('click', function(e) {\n\t\t\t\t\t\tapp.hideModal();\n\t\t\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem('bearer'));\n\t\t\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\t\t\t\tvar myInit = { method: 'DELETE', headers: myHeaders };\n\t\t\t\t\t\tvar url = `${app.baseUrl}/${app.api_version}/dashboards/${myId}`;\n\t\t\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t\t\t\t).then(function(fetchResponse) {\n\t\t\t\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(function(response) {\n\t\t\t\t\t\t\t\tdocument.querySelector('[data-id=\"' + myId + '\"]').classList.add('removed');\n\t\t\t\t\t\t\t\ttoast('Dashboard has been deleted.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\t\t\ttoast('Dashboard has not been deleted.', { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tfor (var d = 0; d < app.buttons.editDashboard.length; d++) {\n\t\t\t\t//console.log(buttons.editDashboard[d]);\n\t\t\t\tapp.buttons.editDashboard[d].addEventListener('click', function(evt) {\n\t\t\t\t\tapp.resources.dashboards.display(evt.currentTarget.dataset.id, false, true, false);\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (type === \"snippets\") {\n\t\t\tfor (var d = 0; d < app.buttons.deleteSnippet.length; d++) {\n\t\t\t\tapp.buttons.deleteSnippet[d].addEventListener('click', function(evt) {\n\t\t\t\t\tdialog.querySelector('h3').innerHTML = '<i class=\"material-icons md-48\">' + app.icons.delete_question + '</i> Delete Snippet';\n\t\t\t\t\tdialog.querySelector('.mdl-dialog__content').innerHTML = '<p>Do you really want to delete \\\"' + evt.target.parentNode.dataset.name + '\\\"? This action will remove all reference to the Snippet in Dashboards.</p>';\n\t\t\t\t\tdialog.querySelector('.mdl-dialog__actions').innerHTML = '<button class=\"mdl-button btn danger yes-button\">Yes</button> <button class=\"mdl-button cancel-button\">No, Cancel</button>';\n\t\t\t\t\tapp.showModal();\n\t\t\t\t\tvar myId = evt.target.parentNode.dataset.id;\n\t\t\t\t\tevt.preventDefault();\n\n\t\t\t\t\tdialog.querySelector('.cancel-button').addEventListener('click', function(e) {\n\t\t\t\t\t\tapp.hideModal();\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t\tdialog.querySelector('.yes-button').addEventListener('click', function(e) {\n\t\t\t\t\t\tapp.hideModal();\n\t\t\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem('bearer'));\n\t\t\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\t\t\t\tvar myInit = { method: 'DELETE', headers: myHeaders };\n\t\t\t\t\t\tvar url = `${app.baseUrl}/${app.api_version}/snippets/${myId}`;\n\t\t\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t\t\t\t).then(function(fetchResponse) {\n\t\t\t\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(function(response) {\n\t\t\t\t\t\t\t\tdocument.querySelector('[data-id=\"' + myId + '\"]').classList.add('removed');\n\t\t\t\t\t\t\t\tapp.resources.snippets.onDelete(myId);\n\t\t\t\t\t\t\t\ttoast('Snippet has been deleted.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\t\t\ttoast('Snippet has not been deleted.', { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tfor (var s = 0; s < app.buttons.editSnippet.length; s++) {\n\t\t\t\tapp.buttons.editSnippet[s].addEventListener('click', function(evt) {\n\t\t\t\t\tapp.resources.snippets.display(evt.currentTarget.dataset.id, false, true, false);\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (type === \"rules\") {\n\t\t\tfor (var d = 0; d < app.buttons.deleteRule.length; d++) {\n\t\t\t\tapp.buttons.deleteRule[d].addEventListener('click', function(evt) {\n\t\t\t\t\tdialog.querySelector('h3').innerHTML = '<i class=\"material-icons md-48\">' + app.icons.delete_question + '</i> Delete rule';\n\t\t\t\t\tdialog.querySelector('.mdl-dialog__content').innerHTML = '<p>Do you really want to delete \\\"' + evt.target.parentNode.dataset.name + '\\\"? This action will remove all reference to the Rule in t6.</p>';\n\t\t\t\t\tdialog.querySelector('.mdl-dialog__actions').innerHTML = '<button class=\"mdl-button btn danger yes-button\">Yes</button> <button class=\"mdl-button cancel-button\">No, Cancel</button>';\n\n\t\t\t\t\tapp.showModal();\n\t\t\t\t\tvar myId = evt.target.parentNode.dataset.id;\n\t\t\t\t\tevt.preventDefault();\n\n\t\t\t\t\tdialog.querySelector('.cancel-button').addEventListener('click', function(e) {\n\t\t\t\t\t\tapp.hideModal();\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t\tdialog.querySelector('.yes-button').addEventListener('click', function(e) {\n\t\t\t\t\t\tapp.hideModal();\n\t\t\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem('bearer'));\n\t\t\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\t\t\t\tvar myInit = { method: 'DELETE', headers: myHeaders };\n\t\t\t\t\t\tvar url = `${app.baseUrl}/${app.api_version}/rules/${myId}`;\n\t\t\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t\t\t\t).then(function(fetchResponse) {\n\t\t\t\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(function(response) {\n\t\t\t\t\t\t\t\tdocument.querySelector('[data-id=\"' + myId + '\"]').classList.add('removed');\n\t\t\t\t\t\t\t\ttoast('Rule has been deleted.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\t\t\ttoast('Rule has not been deleted.', { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tfor (var s = 0; s < app.buttons.editRule.length; s++) {\n\t\t\t\tapp.buttons.editRule[s].addEventListener('click', function(evt) {\n\t\t\t\t\tapp.resources.rules.display(evt.currentTarget.dataset.id, false, true, false);\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (type === \"mqtts\") {\n\t\t\t// TODO\n\t\t} else if (type === \"sources\") {\n\t\t\tfor (var d = 0; d < app.buttons.deleteSource.length; d++) {\n\t\t\t\tapp.buttons.deleteSource[d].addEventListener('click', function(evt) {\n\t\t\t\t\tdialog.querySelector('h3').innerHTML = '<i class=\"material-icons md-48\">' + app.icons.delete_question + '</i> Delete source';\n\t\t\t\t\tdialog.querySelector('.mdl-dialog__content').innerHTML = '<p>Do you really want to delete \\\"' + evt.target.parentNode.dataset.name + '\\\"? This action will remove all reference to the Source in t6.</p>';\n\t\t\t\t\tdialog.querySelector('.mdl-dialog__actions').innerHTML = '<button class=\"mdl-button btn danger yes-button\">Yes</button> <button class=\"mdl-button cancel-button\">No, Cancel</button>';\n\n\t\t\t\t\tapp.showModal();\n\t\t\t\t\tvar myId = evt.target.parentNode.dataset.id;\n\t\t\t\t\tevt.preventDefault();\n\n\t\t\t\t\tdialog.querySelector('.cancel-button').addEventListener('click', function(e) {\n\t\t\t\t\t\tapp.hideModal();\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t\tdialog.querySelector('.yes-button').addEventListener('click', function(e) {\n\t\t\t\t\t\tapp.hideModal();\n\t\t\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem('bearer'));\n\t\t\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\t\t\t\tvar myInit = { method: 'DELETE', headers: myHeaders };\n\t\t\t\t\t\tvar url = `${app.baseUrl}/${app.api_version}/sources/${myId}`;\n\t\t\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t\t\t\t).then(function(fetchResponse) {\n\t\t\t\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(function(response) {\n\t\t\t\t\t\t\t\tdocument.querySelector('[data-id=\"' + myId + '\"]').classList.add('removed');\n\t\t\t\t\t\t\t\ttoast('Source has been deleted.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\t\t\ttoast('Source has not been deleted.', { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tfor (var s = 0; s < app.buttons.editSource.length; s++) {\n\t\t\t\tapp.buttons.editSource[s].addEventListener('click', function(evt) {\n\t\t\t\t\tapp.resources.sources.display(evt.currentTarget.dataset.id, false, true, false);\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tapp.getSubtitle = function(subtitle) {\n\t\tvar node = \"<section class='mdl-grid mdl-cell--12-col md-primary md-subheader _md md-altTheme-theme sticky' role='heading'>\";\n\t\tnode += \"\t<div class='md-subheader-inner'>\";\n\t\tnode += \"\t\t<div class='mdl-subheader-content'>\";\n\t\tnode += \"\t\t\t<span class='ng-scope'>\" + subtitle + \"</span>\";\n\t\tnode += \"\t\t</div>\";\n\t\tnode += \"\t</div>\";\n\t\tnode += \"</section>\";\n\t\treturn node;\n\t};\n\n\tapp.getUnits = function() {\n\t\tif (localStorage.getItem('units') == 'null' || !JSON.parse(localStorage.getItem('units'))) {\n\t\t\tvar myHeaders = new Headers();\n\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\t\tvar url = `${app.baseUrl}/${app.api_version}/units/`;\n\t\t\tfetch(url, myInit)\n\t\t\t\t.then(\n\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t).then(function(fetchResponse) {\n\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t})\n\t\t\t\t.then(function(response) {\n\t\t\t\t\tif (response.data) {\n\t\t\t\t\t\tfor (var i = 0; i < (response.data).length; i++) {\n\t\t\t\t\t\t\tvar u = response.data[i];\n\t\t\t\t\t\t\tapp.units.push({ name: u.id, value: u.attributes.type + ' - ' + u.attributes.name, format: u.attributes.format, system: u.attributes.system, description: u.attributes.description });\n\t\t\t\t\t\t}\n\t\t\t\t\t\t(app.units) = (app.units).sort(function(a, b) {\n\t\t\t\t\t\t\tif (a.value.toLowerCase() < b.value.toLowerCase()) { return -1; }\n\t\t\t\t\t\t\tif (a.value.toLowerCase() > b.value.toLowerCase()) { return 1; }\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlocalStorage.setItem('units', JSON.stringify(app.units));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t};\n\n\tapp.getFlows = function() {\n\t\tif (app.flows.length == 0 && (app.isLogged || localStorage.getItem('bearer'))) {\n\t\t\tvar myHeaders = new Headers();\n\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem('bearer'));\n\t\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\t\tvar url = `${app.baseUrl}/${app.api_version}/flows/?size=99999`;\n\t\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse){ \n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tif ( response.data ) {\n\t\t\t\t\tfor (var i=0; i < (response.data).length ; i++ ) {\n\t\t\t\t\t\tvar f = response.data[i];\n\t\t\t\t\t\tapp.flows.push( {id: f.id, name:f.attributes.name, type: 'flows'} );\n\t\t\t\t\t}\n\t\t\t\t\tlocalStorage.setItem('flows', JSON.stringify(app.flows));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tapp.getSnippets = function() {\n\t\tif (app.snippets.length == 0 && (app.isLogged || localStorage.getItem('bearer'))) {\n\t\t\tvar myHeaders = new Headers();\n\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem('bearer'));\n\t\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\t\tvar url = `${app.baseUrl}/${app.api_version}/snippets/?size=99999`;\n\t\t\tfetch(url, myInit)\n\t\t\t\t.then(\n\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t).then(function(fetchResponse) {\n\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t})\n\t\t\t\t.then(function(response) {\n\t\t\t\t\tif (response.data) {\n\t\t\t\t\t\tfor (var i = 0; i < (response.data).length; i++) {\n\t\t\t\t\t\t\tvar s = response.data[i];\n\t\t\t\t\t\t\tapp.snippets.push({ id: s.id, name: s.attributes.name, sType: s.attributes.type, type: 'snippets' });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlocalStorage.setItem('snippets', JSON.stringify(app.snippets));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t};\n\n\tapp.getDatatypes = function() {\n\t\tif (app.datatypes.length == 0) {\n\t\t\tvar myHeaders = new Headers();\n\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\t\tvar url = `${app.baseUrl}/${app.api_version}/datatypes/`;\n\t\t\tfetch(url, myInit)\n\t\t\t\t.then(\n\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t).then(function(fetchResponse) {\n\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t})\n\t\t\t\t.then(function(response) {\n\t\t\t\t\tif (response.data) {\n\t\t\t\t\t\tfor (var i = 0; i < (response.data).length; i++) {\n\t\t\t\t\t\t\tvar d = response.data[i];\n\t\t\t\t\t\t\tapp.datatypes.push({ name: d.id, value: d.attributes.name, type: d.attributes.type });\n\t\t\t\t\t\t}\n\t\t\t\t\t\t(app.datatypes) = (app.datatypes).sort(function(a, b) {\n\t\t\t\t\t\t\tif (a.value.toLowerCase() < b.value.toLowerCase()) { return -1; }\n\t\t\t\t\t\t\tif (a.value.toLowerCase() > b.value.toLowerCase()) { return 1; }\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlocalStorage.setItem('datatypes', JSON.stringify(app.datatypes));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t};\n\n\tapp.getSources = function() {\n\t\tif ((app.isLogged || localStorage.getItem('bearer'))) {\n\t\t\tvar myHeaders = new Headers();\n\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem('bearer'));\n\t\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\t\tvar url = `${app.baseUrl}/${app.api_version}/sources/?size=99999`;\n\t\t\tfetch(url, myInit)\n\t\t\t\t.then(\n\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t).then(function(fetchResponse) {\n\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t})\n\t\t\t\t.then(function(response) {\n\t\t\t\t\tif (response.data) {\n\t\t\t\t\t\tapp.sources = new Array();\n\t\t\t\t\t\tfor (var i = 0; i < (response.data).length; i++) {\n\t\t\t\t\t\t\tvar s = response.data[i];\n\t\t\t\t\t\t\tapp.sources.push({ id: s.id, name: s.attributes.name, version: s.attributes.version, subversions: s.attributes.subversions });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlocalStorage.setItem('sources', JSON.stringify(app.sources));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t};\n\n\tapp.getCard = function(card) {\n\t\tvar output = \"\";\n\t\tif (typeof card.className !== \"undefined\") {\n\t\t\toutput += \"<div class=\\\"\" + card.className + \"\\\">\";\n\t\t} else {\n\t\t\toutput += \"<div class=\\\"mdl-grid mdl-cell\\\">\";\n\t\t}\n\t\toutput += \"\t<div class=\\\"mdl-card mdl-shadow--2dp\\\">\";\n\t\tif (card.image) {\n\t\t\toutput += \"\t<div class=\\\"mdl-card__title\\\" style=\\\"background:url(\" + card.image + \") no-repeat 50% 50%;\\\">\";\n\t\t} else {\n\t\t\toutput += \"\t<div class=\\\"mdl-card__title\\\">\";\n\t\t}\n\t\toutput += \"\t\t\t<h3 class=\\\"mdl-card__title-text\\\">\" + card.title + \"</h3>\";\n\t\toutput += \"\t\t</div>\";\n\t\toutput += \"  \t<div class=\\\"mdl-card__supporting-text mdl-card--expand\\\">\" + card.description + \"</div>\";\n\t\tif (card.url || card.secondaryaction || card.action) {\n\t\t\toutput += \"  \t<div class=\\\"mdl-card__actions mdl-card--border\\\">\";\n\t\t\tif (card.url) {\n\t\t\t\toutput += \"\t\t<a href=\\\"\" + card.url + \"\\\"> Get Started</a>\";\n\t\t\t}\n\t\t\tif (card.secondaryaction) {\n\t\t\t\toutput += \"\t\t<a href=\\\"#\\\" onclick=\\\"app.setSection('\" + card.secondaryaction.id + \"');\\\" class=\\\"mdl-button mdl-button--colored\\\"> \" + card.secondaryaction.label + \"</a>&nbsp;\";\n\t\t\t}\n\t\t\tif (card.action && !card.internalAction) {\n\t\t\t\toutput += \"\t\t<button class=\\\"mdl-button mdl-js-button mdl-js-ripple-effect\\\" onclick=\\\"app.setSection('\" + card.action.id + \"');\\\"> \" + card.action.label + \"</button>\";\n\t\t\t}\n\t\t\tif (card.internalAction) {\n\t\t\t\toutput += \"\t\t<button class=\\\"mdl-button mdl-js-button mdl-js-ripple-effect\\\" onclick=\\\"\" + card.internalAction + \"\\\"> \" + card.action.label + \"</button>\";\n\t\t\t}\n\t\t\toutput += \"\t\t</div>\";\n\t\t}\n\t\toutput += \"\t\t</div>\";\n\t\toutput += \"</div>\";\n\t\treturn output;\n\t};\n\n\tapp.displayChip = function(chip) {\n\t\tvar chipElt = document.createElement('div');\n\t\tchipElt.setAttribute('class', 'mdl-chip');\n\t\tchipElt.setAttribute('data-id', chip.id);\n\t\tchipElt.innerHTML = \"<i class='material-icons md-18'>\" + app.icons[chip.type] + \"</i>\" + chip.name + \"<i class='material-icons close'>close</i>\";\n\t\tchipElt.querySelector('i.close').addEventListener('click', function(evt) {\n\t\t\tevt.preventDefault();\n\t\t\tevt.target.parentNode.remove();\n\t\t}, false);\n\t\treturn chipElt;\n\t};\n\n\tapp.addChipTo = function(container, chip) {\n\t\tdocument.getElementById(container).append(app.displayChip(chip));\n\t};\n\n\tapp.removeChipFrom = function(container) {\n\t\twhile (document.getElementById(container).firstChild) { document.getElementById(container).removeChild(document.getElementById(container).firstChild); }\n\t};\n\n\tapp.displayChipSnippet = function(chipSnippet) {\n\t\tvar displayChipSnippet = document.createElement('div');\n\t\tdisplayChipSnippet.setAttribute('class', 'mdl-chip mdl-list__item');\n\t\tdisplayChipSnippet.setAttribute('style', 'width: 100%; text-overflow: ellipsis; display: flex;');\n\t\tdisplayChipSnippet.setAttribute('draggable', true);\n\t\tdisplayChipSnippet.setAttribute('data-id', chipSnippet.id);\n\t\tdisplayChipSnippet.setAttribute('data-stype', chipSnippet.sType);\n\t\tdisplayChipSnippet.innerHTML = \"<i class='md-36 grippy'></i>\" +\n\t\t\t\"<i class='material-icons md-36' id='type-\" + chipSnippet.id + \"'>\" + app.icons[chipSnippet.type] + \"</i> <div class='mdl-tooltip mdl-tooltip--top' for='type-\" + chipSnippet.id + \"'>\" + chipSnippet.type + \" (\" + chipSnippet.sType + \")</div>\" +\n\t\t\t\"<span>\" + chipSnippet.name + \" (\" + chipSnippet.sType + \")</span>\" +\n\t\t\t\"<i class='material-icons close mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect' id='remove-\" + chipSnippet.id + \"'>close</i> <div class='mdl-tooltip mdl-tooltip--top' for='remove-\" + chipSnippet.id + \"'>Remove this \" + chipSnippet.type + \"</div>\" +\n\t\t\t\"<i class='material-icons edit mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect' id='edit-\" + chipSnippet.id + \"'>edit</i> <div class='mdl-tooltip mdl-tooltip--top' for='edit-\" + chipSnippet.id + \"'>Edit this \" + chipSnippet.type + \"</div>\";\n\t\tdisplayChipSnippet.querySelector('i.close').addEventListener('click', function(evt) {\n\t\t\tevt.preventDefault();\n\t\t\tevt.target.parentNode.parentNode.remove();\n\t\t}, false);\n\t\tdisplayChipSnippet.querySelector('i.edit').addEventListener('click', function(evt) {\n\t\t\tevt.preventDefault();\n\t\t\tapp.resources.snippets.display(\n\t\t\t\tapp.getSnippetIdFromIndex(evt.target.parentNode.parentNode.getAttribute('data-id')),\n\t\t\t\tfalse,\n\t\t\t\ttrue,\n\t\t\t\tfalse\n\t\t\t);\n\t\t}, false);\n\n\t\treturn displayChipSnippet;\n\t};\n\n\t/* Sort Snippets */\n\tvar dragSrcEl = null;\n\tapp.handleDragStart = function(e) {\n\t\t// Target (this) element is the source node.\n\t\tdragSrcEl = this;\n\t\te.dataTransfer.effectAllowed = 'move';\n\t\te.dataTransfer.setData('text/html', this.outerHTML);\n\t\tthis.classList.add('dragElem');\n\t};\n\tapp.handleDragOver = function(e) {\n\t\tif (e.preventDefault) {\n\t\t\te.preventDefault(); // Necessary. Allows us to drop.\n\t\t}\n\t\tthis.classList.add('over');\n\t\te.dataTransfer.dropEffect = 'move'; // See the section on the DataTransfer object.\n\t\treturn false;\n\t};\n\tapp.handleDragEnter = function(e) {\n\t\t// this / e.target is the current hover target.\n\t};\n\tapp.handleDragLeave = function(e) {\n\t\tthis.classList.remove('over'); // this / e.target is previous target element.\n\t}\n\tapp.handleDrop = function(e) {\n\t\t// this/e.target is current target element.\n\t\tif (e.stopPropagation) {\n\t\t\te.stopPropagation(); // Stops some browsers from redirecting.\n\t\t}\n\t\t// Don't do anything if dropping the same column we're dragging.\n\t\tif (dragSrcEl != this) {\n\t\t\t// Set the source column's HTML to the HTML of the column we dropped on.\n\t\t\t//alert(this.outerHTML);\n\t\t\t//dragSrcEl.innerHTML = this.innerHTML;\n\t\t\t//this.innerHTML = e.dataTransfer.getData('text/html');\n\t\t\tthis.parentNode.removeChild(dragSrcEl);\n\t\t\tvar dropHTML = e.dataTransfer.getData('text/html');\n\t\t\tthis.insertAdjacentHTML('beforebegin', dropHTML);\n\t\t\tvar dropElem = this.previousSibling;\n\t\t\tapp.addDnDHandlers(dropElem);\n\t\t}\n\t\tthis.classList.remove('over');\n\t\treturn false;\n\t};\n\tapp.handleDragEnd = function(e) {\n\t\t// this/e.target is the source node.\n\t\tthis.classList.remove('over');\n\t\t/*[].forEach.call(cols, function (col) {\n\t\t\tcol.classList.remove('over');\n\t\t});*/\n\t};\n\tapp.addDnDHandlers = function(e) {\n\t\te.addEventListener('dragstart', app.handleDragStart, false);\n\t\te.addEventListener('dragenter', app.handleDragEnter, false)\n\t\te.addEventListener('dragover', app.handleDragOver, false);\n\t\te.addEventListener('dragleave', app.handleDragLeave, false);\n\t\te.addEventListener('drop', app.handleDrop, false);\n\t\te.addEventListener('dragend', app.handleDragEnd, false);\n\t};\n\t/* END Sorting */\n\n\tapp.addChipSnippetTo = function(container, chipSnippet) {\n\t\tdocument.getElementById(container).append(app.displayChipSnippet(chipSnippet));\n\t};\n\tapp.getSnippetIdFromIndex = function(index) {\n\t\treturn ((JSON.parse(localStorage.getItem('snippets')))[index]).id;\n\t};\n\n\tapp.fetchItemsPaginated = function(type, filter, page, size) {\n\t\tlet promise = new Promise((resolve, reject) => {\n\t\t\tif (type !== \"objects\" && type !== \"flows\" && type !== \"dashboards\" && type !== \"snippets\" && type !== \"rules\" && type !== \"mqtts\" && type !== \"sources\") {\n\t\t\t\tresolve();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tapp.initNewSection(type);\n\n\t\t\tsize = size !== undefined ? size : app.itemsSize[type];\n\t\t\tpage = page !== undefined ? page : app.itemsPage[type];\n\n\t\t\tapp.containers.spinner.removeAttribute('hidden');\n\t\t\tapp.containers.spinner.classList.remove('hidden');\n\t\t\tvar myHeaders = new Headers();\n\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem('bearer'));\n\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\t\tvar defaultCard = {};\n\n\t\t\tif (type == 'objects') {\n\t\t\t\tvar container = (app.containers.objects).querySelector('.page-content');\n\t\t\t\tvar url = `${app.baseUrl}/${app.api_version}/objects`;\n\n\t\t\t\tif (page || size || filter) {\n\t\t\t\t\turl += '?';\n\t\t\t\t\tif (filter !== undefined) {\n\t\t\t\t\t\turl += 'name=' + escape(filter) + '&';\n\t\t\t\t\t}\n\t\t\t\t\tif (page !== undefined) {\n\t\t\t\t\t\turl += 'page=' + page + '&';\n\t\t\t\t\t}\n\t\t\t\t\tif (size !== undefined) {\n\t\t\t\t\t\turl += 'size=' + size + '&';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar title = 'My Objects';\n\t\t\t\tif (app.isLogged) defaultCard = { title: title, titlecolor: '#ffffff', description: 'Hey, it looks you don\\'t have any Object yet.', internalAction: false, action: { id: 'object_add', label: '<i class=\\'material-icons\\'>add</i>Add my first Object' }, className: \"mdl-grid mdl-cell mdl-cell--12-col\" };\n\t\t\t\telse defaultCard = { title: 'Connected Objects', titlecolor: '#ffffff', description: 'Connecting anything physical or virtual to t6 Api without any hassle. Embedded, Automatization, Domotic, Sensors, any Objects or Devices can be connected and communicate to t6 via RESTful API. Unic and dedicated application to rules them all and designed to simplify your journey.', className: \"mdl-grid mdl-cell mdl-cell--12-col\" }; // ,\n\n\t\t\t} else if (type == 'flows') {\n\t\t\t\tvar container = (app.containers.flows).querySelector('.page-content');\n\t\t\t\tvar url = `${app.baseUrl}/${app.api_version}/flows`;\n\t\t\t\tif (page || size || filter) {\n\t\t\t\t\turl += '?';\n\t\t\t\t\tif (filter !== undefined) {\n\t\t\t\t\t\turl += 'name=' + escape(filter) + '&';\n\t\t\t\t\t}\n\t\t\t\t\tif (page !== undefined) {\n\t\t\t\t\t\turl += 'page=' + page + '&';\n\t\t\t\t\t}\n\t\t\t\t\tif (size !== undefined) {\n\t\t\t\t\t\turl += 'size=' + size + '&';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar title = 'My Flows';\n\t\t\t\tif (app.isLogged) defaultCard = { title: title, titlecolor: '#ffffff', description: 'Hey, it looks you don\\'t have any Flow yet.', internalAction: false, action: { id: 'flow_add', label: '<i class=\\'material-icons\\'>add</i>Add my first Flow' }, className: \"mdl-grid mdl-cell mdl-cell--12-col\" };\n\t\t\t\telse defaultCard = { title: 'Time-series Datapoints', titlecolor: '#ffffff', description: 'Communication becomes easy in the platform with Timestamped values. Flows allows to retrieve and classify data.', className: \"mdl-grid mdl-cell mdl-cell--12-col\" };\n\t\t\t} else if (type == 'dashboards') {\n\t\t\t\tvar container = (app.containers.dashboards).querySelector('.page-content');\n\t\t\t\tvar url = `${app.baseUrl}/${app.api_version}/dashboards`;\n\t\t\t\tif (page || size) {\n\t\t\t\t\turl += '?';\n\t\t\t\t\tif (page !== undefined) {\n\t\t\t\t\t\turl += 'page=' + page + '&';\n\t\t\t\t\t}\n\t\t\t\t\tif (size !== undefined) {\n\t\t\t\t\t\turl += 'size=' + size + '&';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar title = 'My Dashboards';\n\t\t\t\tif (app.isLogged) {\n\t\t\t\t\tdefaultCard = { title: title, titlecolor: '#ffffff', description: 'Hey, it looks you don\\'t have any dashboard yet.', internalAction: false, action: { id: 'dashboard_add', label: '<i class=\\'material-icons\\'>add</i>Add my first Dashboard' }, className: \"mdl-grid mdl-cell mdl-cell--12-col\" };\n\t\t\t\t} else {\n\t\t\t\t\tdefaultCard = { title: 'Dashboards', titlecolor: '#ffffff', description: 't6 support multiple Snippets to create your own IoT Dashboards for data visualization. Snippets are ready to Use Html components integrated into the application. Dashboards allows to empower your data-management by Monitoring and Reporting activities.', className: \"mdl-grid mdl-cell mdl-cell--12-col\" };\n\t\t\t\t}\n\t\t\t} else if (type == 'snippets') {\n\t\t\t\tvar container = (app.containers.snippets).querySelector('.page-content');\n\t\t\t\tvar url = `${app.baseUrl}/${app.api_version}/snippets`;\n\t\t\t\tif (page || size) {\n\t\t\t\t\turl += '?';\n\t\t\t\t\tif (page !== undefined) {\n\t\t\t\t\t\turl += 'page=' + page + '&';\n\t\t\t\t\t}\n\t\t\t\t\tif (size !== undefined) {\n\t\t\t\t\t\turl += 'size=' + size + '&';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar title = 'My Snippets';\n\t\t\t\tif (app.isLogged) defaultCard = { title: title, titlecolor: '#ffffff', description: 'Hey, it looks you don\\'t have any snippet yet.', internalAction: false, action: { id: 'snippet_add', label: '<i class=\\'material-icons\\'>add</i>Add my first Snippet' } };\n\t\t\t\telse defaultCard = { title: 'Customize Snippets', titlecolor: '#ffffff', description: 'Snippets are components to embed into your dashboards and displays your data', className: \"mdl-grid mdl-cell mdl-cell--12-col\" }; // ,\n\n\t\t\t} else if (type == 'rules') {\n\t\t\t\tvar container = (app.containers.rules).querySelector('.page-content');\n\t\t\t\tvar url = `${app.baseUrl}/${app.api_version}/rules`;\n\t\t\t\tif (page || size) {\n\t\t\t\t\turl += '?';\n\t\t\t\t\tif (page !== undefined) {\n\t\t\t\t\t\turl += 'page=' + page + '&';\n\t\t\t\t\t}\n\t\t\t\t\tif (size !== undefined) {\n\t\t\t\t\t\turl += 'size=' + size + '&';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar title = 'My Rules';\n\t\t\t\tif (app.isLogged) defaultCard = { title: title, titlecolor: '#ffffff', description: 'Hey, it looks you don\\'t have any rule yet.', internalAction: false, action: { id: 'rule_add', label: '<i class=\\'material-icons\\'>add</i>Add my first Rule' }, className: \"mdl-grid mdl-cell mdl-cell--12-col\" };\n\t\t\t\telse defaultCard = { title: 'Decision Rules to get smart', titlecolor: '#ffffff', description: 'Trigger action from Mqtt and decision-tree. Let\\'s your Objects talk to the platform as events.', className: \"mdl-grid mdl-cell mdl-cell--12-col\" }; // ,\n\n\t\t\t} else if (type == 'mqtts') {\n\t\t\t\tvar container = (app.containers.mqtts).querySelector('.page-content');\n\t\t\t\tvar url = `${app.baseUrl}/${app.api_version}/mqtts`;\n\t\t\t\tif (page || size) {\n\t\t\t\t\turl += '?';\n\t\t\t\t\tif (page !== undefined) {\n\t\t\t\t\t\turl += 'page=' + page + '&';\n\t\t\t\t\t}\n\t\t\t\t\tif (size !== undefined) {\n\t\t\t\t\t\turl += 'size=' + size + '&';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar title = 'My Mqtts';\n\t\t\t\tif (app.isLogged) defaultCard = { title: title, titlecolor: '#ffffff', description: 'Hey, it looks you don\\'t have any mqtt topic yet.', action: { id: 'mqtt_add', label: '<i class=\\'material-icons\\'>add</i>Add my first Mqtt' }, className: \"mdl-grid mdl-cell mdl-cell--12-col\" };\n\t\t\t\telse defaultCard = { title: 'Sense events', titlecolor: '#ffffff', description: 'Whether it\\'s your own sensors or external Flows from Internet, sensors collect values and communicate them to t6.', className: \"mdl-grid mdl-cell mdl-cell--12-col\" }; // ,\n\n\t\t\t} else if (type == 'sources') {\n\t\t\t\tvar container = (app.containers.sources).querySelector('.page-content');\n\t\t\t\tvar url = `${app.baseUrl}/${app.api_version}/sources`;\n\t\t\t\tif (page || size) {\n\t\t\t\t\turl += '?';\n\t\t\t\t\tif (page !== undefined) {\n\t\t\t\t\t\turl += 'page=' + page + '&';\n\t\t\t\t\t}\n\t\t\t\t\tif (size !== undefined) {\n\t\t\t\t\t\turl += 'size=' + size + '&';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar title = 'My Sources';\n\t\t\t\tif (app.isLogged) defaultCard = { title: title, titlecolor: '#ffffff', description: 'Hey, it looks you don\\'t have any source yet.', action: { id: 'source_add', label: '<i class=\\'material-icons\\'>add</i>Add my first Source' }, className: \"mdl-grid mdl-cell mdl-cell--12-col\" };\n\t\t\t\telse defaultCard = { title: 'Code Source', titlecolor: '#ffffff', description: 'Deploy Arduino source Over The Air.', className: \"mdl-grid mdl-cell mdl-cell--12-col\" }; // ,\n\n\t\t\t} else if (type == 'tokens') {\n\t\t\t\tvar container = (app.containers.tokens).querySelector('.page-content');\n\t\t\t\tvar url = `${app.baseUrl}/${app.api_version}/tokens`;\n\t\t\t\tif (page || size) {\n\t\t\t\t\turl += '?';\n\t\t\t\t\tif (page !== undefined) {\n\t\t\t\t\t\turl += 'page=' + page + '&';\n\t\t\t\t\t}\n\t\t\t\t\tif (size !== undefined) {\n\t\t\t\t\t\turl += 'size=' + size + '&';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar title = 'My tokens';\n\t\t\t\tif (app.isLogged) defaultCard = { title: title, titlecolor: '#ffffff', description: 'Hey, it looks you don\\'t have any token yet.', action: { id: 'token_add', label: '<i class=\\'material-icons\\'>add</i>Add my first Token' }, className: \"mdl-grid mdl-cell mdl-cell--12-col\" };\n\t\t\t\telse defaultCard = { title: 'Sense events', titlecolor: '#ffffff', description: 'Whether it\\'s your own sensors or external Flows from Internet, sensors collect values and communicate them to t6.', className: \"mdl-grid mdl-cell mdl-cell--12-col\" }; // ,\n\n\t\t\t} else if (type == 'status') {\n\t\t\t\tvar icon = app.icons.status;\n\t\t\t\tvar container = (app.containers.status).querySelector('.page-content');\n\t\t\t\tdefaultCard = {};\n\t\t\t\tapp.getStatus();\n\n\t\t\t} else {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\tconsole.log('DEBUG Error no Type defined: ' + type);\n\t\t\t\t\ttoast('Error no Type defined.', { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t}\n\t\t\t\ttype = undefined;\n\t\t\t}\n\n\t\t\tif (!navigator.onLine) {\n\t\t\t\tcontainer.innerHTML = app.getCard(app.offlineCard);\n\t\t\t} else {\n\t\t\t\tif (app.isLogged && type !== undefined) {\n\t\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t\t\t).then(function(fetchResponse) {\n\t\t\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(function(response) {\n\t\t\t\t\t\t\tif (page == 1) {\n\t\t\t\t\t\t\t\tcontainer.innerHTML = \"\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!response.data || (response.data && (response.data).length == 0)) {\n\t\t\t\t\t\t\t\tcontainer.innerHTML = app.getCard(defaultCard);\n\t\t\t\t\t\t\t\tapp.displayLoginForm(container);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfor (var i = 0; i < (response.data).length; i++) {\n\t\t\t\t\t\t\t\t\tcontainer.innerHTML += (app.resources)[type].displayItem(response.data[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tapp.showAddFAB(type);\n\t\t\t\t\t\t\t\tcomponentHandler.upgradeDom();\n\t\t\t\t\t\t\t\tapp.setItemsClickAction(type);\n\t\t\t\t\t\t\t\tapp.setListActions(type);\n\t\t\t\t\t\t\t\tif (type == 'snippets') {\n\t\t\t\t\t\t\t\t\tapp.snippets = [];\n\t\t\t\t\t\t\t\t\t(response.data).map(function(snippet) {\n\t\t\t\t\t\t\t\t\t\tapp.snippets.push({ id: snippet.id, name: snippet.attributes.name, sType: snippet.attributes.type, type: snippets.attributes.type });\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tlocalStorage.setItem('snippets', JSON.stringify(app.snippets));\n\t\t\t\t\t\t\t\t} else if (type == 'flows') {\n\t\t\t\t\t\t\t\t\tapp.flows = [];\n\t\t\t\t\t\t\t\t\t(response.data).map(function(flow) {\n\t\t\t\t\t\t\t\t\t\tapp.flows.push({ id: flow.id, name: flow.attributes.name, type: flow.attributes.type });\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tlocalStorage.setItem('flows', JSON.stringify(app.flows));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tapp.containers.spinner.setAttribute('hidden', true);\n\t\t\t\t\t\t\tapp.containers.spinner.classList.add('hidden');\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\t\t\ttoast('fetchItemsPaginated ' + type + ' error occured...' + error, { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.innerHTML = app.getCard(defaultCard);\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn promise;\n\t};\n\n\tapp.getUsersList = function() {\n\t\tapp.containers.spinner.removeAttribute('hidden');\n\t\tapp.containers.spinner.classList.remove('hidden');\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem('bearer'));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\tvar container = (app.containers.usersList).querySelector('.page-content');\n\t\tvar url = `${app.baseUrl}/${app.api_version}/users/list`;\n\t\tvar title = 'Users List';\n\n\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse) {\n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tvar usersList = \"\";\n\t\t\t\tdocument.title = app.sectionsPageTitles['users-list'];\n\t\t\t\tfor (var i = 0; i < (response.data).length; i++) {\n\t\t\t\t\tvar user = response.data[i];\n\t\t\t\t\tvar num = (response.links.meta.count) - i;\n\t\t\t\t\tusersList += \"<div class=\\\"mdl-grid mdl-cell\\\" data-action=\\\"nothing\\\" data-type=\\\"user\\\" data-id=\\\"\" + user.id + \"\\\">\";\n\t\t\t\t\tusersList += \"\t<div class=\\\"mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tusersList += \"\t\t<div class=\\\"mdl-card__title\\\">\";\n\t\t\t\t\tusersList += \"\t\t\t<i class=\\\"material-icons\\\">perm_identity</i>\";\n\t\t\t\t\tusersList += \"\t\t\t<h3 class=\\\"mdl-card__title-text\\\">\" + num + \". \" + user.attributes.first_name + \" \" + user.attributes.last_name + \"</h3>\";\n\t\t\t\t\tusersList += \"\t\t</div>\";\n\t\t\t\t\tusersList += \"\t\t<div class=\\\"mdl-card__title\\\"><img src=\\\"//secure.gravatar.com/avatar/\" + hex_md5(user.attributes.email) + \"\\\" alt=\\\"\\\" class=\\\"user-image\\\"></div>\";\n\t\t\t\t\tusersList += app.getField('card_membership', 'User id', user.id, { type: 'text', style: \"text-transform: none !important;\", isEdit: false });\n\t\t\t\t\tusersList += app.getField('mail', 'Email', user.attributes.email, { type: 'text', style: \"text-transform: none !important;\", isEdit: false });\n\t\t\t\t\tif (user.attributes.push_subscription && typeof user.attributes.push_subscription === \"object\" && typeof user.attributes.push_subscription.keys === \"object\" && typeof user.attributes.push_subscription.keys.auth === \"string\") {\n\t\t\t\t\t\tusersList += app.getField('sms', 'Push notification Auth', user.attributes.push_subscription.keys.auth, { type: 'text', style: \"text-transform: none !important;\", isEdit: false });\n\t\t\t\t\t}\n\t\t\t\t\tif (user.attributes.location) {\n\t\t\t\t\t\tif (user.attributes.location.geo) {\n\t\t\t\t\t\t\tusersList += app.getField('my_location', 'Location', user.attributes.location.geo.city + \" (\" + user.attributes.location.geo.country + \")\", { type: 'text', isEdit: false });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (user.attributes.location.ip) {\n\t\t\t\t\t\t\tusersList += app.getField('dns', 'IP address', user.attributes.location.ip, { type: 'text', isEdit: false });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tusersList += app.getField('contact_mail', 'Password last update', moment((user.attributes.password_last_updated) / 1).format(app.date_format), { type: 'text', isEdit: false });\n\t\t\t\t\tusersList += app.getField('contact_mail', 'Reminder Email', moment((user.attributes.reminder_mail) / 1).format(app.date_format), { type: 'text', isEdit: false });\n\t\t\t\t\tusersList += app.getField('change_history', 'Password reset request', moment((user.attributes.change_password_mail) / 1).format(app.date_format), { type: 'text', isEdit: false });\n\t\t\t\t\tusersList += app.getField('new_releases', 'Newsletter', ((user.attributes.unsubscription)&&(typeof user.attributes.unsubscription.newsletter!==\"undefined\"))?\"Unsubscribed \"+moment((user.attributes.unsubscription.newsletter) / 1).format(app.date_format):\"Subscribed\", { type: 'text', isEdit: false });\n\n\t\t\t\t\tusersList += \"\t\t<div class=\\\"mdl-card__actions mdl-card--border\\\">\";\n\t\t\t\t\tusersList += \"\t\t\t<span class=\\\"pull-left mdl-card__date\\\">\";\n\t\t\t\t\tusersList += \"\t\t\t\t<button data-id=\\\"\" + user.id + \"\\\" class=\\\"swapDate mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect\\\">\";\n\t\t\t\t\tusersList += \"\t\t\t\t\t<i class=\\\"material-icons\\\">update</i>\";\n\t\t\t\t\tusersList += \"\t\t\t\t</button>\";\n\t\t\t\t\tusersList += \"\t\t\t\t<span data-date=\\\"created\\\" class=\\\"visible\\\">Subscribed on \" + moment((user.attributes.subscription_date) / 1).format(app.date_format) + \"</span>\";\n\t\t\t\t\tusersList += \"\t\t\t\t<span data-date=\\\"updated\\\" class=\\\"hidden\\\">Password last update on \" + moment((user.attributes.password_last_updated) / 1).format(app.date_format) + \"</span>\";\n\t\t\t\t\tusersList += \"\t\t\t</span>\";\n\t\t\t\t\tusersList += \"\t\t</div>\";\n\t\t\t\t\tusersList += \"\t</div>\";\n\t\t\t\t\tusersList += \"</div>\";\n\t\t\t\t}\n\t\t\t\tcontainer.innerHTML += usersList;\n\n\t\t\t\tcomponentHandler.upgradeDom();\n\t\t\t\tapp.setItemsClickAction('usersList');\n\t\t\t})\n\t\t\t.catch(function(error) {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\ttoast('getUsersList error out...' + error, { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t}\n\t\t\t});\n\t\tapp.containers.spinner.setAttribute('hidden', true);\n\t};\n\n\tapp.fetchProfile = function() {\n\t\tapp.containers.spinner.removeAttribute('hidden');\n\t\tapp.containers.spinner.classList.remove('hidden');\n\t\tapp.initNewSection(\"profile\");\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem('bearer'));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\tvar container = (app.containers.profile).querySelector('.page-content');\n\t\tvar url = `${app.baseUrl}/${app.api_version}/users/me/token`;\n\n\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse) {\n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tif (!navigator.onLine) {\n\t\t\t\t\tcontainer.innerHTML = app.getCard(app.offlineCard);\n\t\t\t\t} else {\n\t\t\t\t\tvar user = response.data;\n\t\t\t\t\tvar gravatar = user.attributes.gravatar.entry[0];\n\t\t\t\t\tvar node = \"\";\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp card card-user\\\">\";\n\t\t\t\t\tif (gravatar.profileBackground) {\n\t\t\t\t\t\tnode += \"\t<div class=\\\"card-heading heading-left\\\" style=\\\"background: url('\" + gravatar.profileBackground.url + \"') 50% 50% !important\\\">\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode += \"\t<div class=\\\"card-heading heading-left\\\" style=\\\"background: url('\" + app.baseUrlCdn + \"/img/opl_img.webp') 50% 50% !important\\\">\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t\t<img src=\\\"//secure.gravatar.com/avatar/\" + hex_md5(user.attributes.email) + \"\\\" alt=\\\"\\\" class=\\\"user-image\\\">\";\n\t\t\t\t\tnode += \"\t\t<h3 class=\\\"card-title text-color-white\\\">\" + user.attributes.first_name + \" \" + user.attributes.last_name + \"</h3>\";\n\t\t\t\t\tif (gravatar.currentLocation) {\n\t\t\t\t\t\tnode += \"\t\t<div class=\\\"subhead\\\">\";\n\t\t\t\t\t\tnode += gravatar.currentLocation;\n\t\t\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t</div>\";\n\n\t\t\t\t\tnode += \"\t<div class=\\\"card-body\\\">\";\n\t\t\t\t\tnode += app.getField('face', 'First name', user.attributes.first_name, { type: 'input', id: 'firstName', isEdit: true, pattern: app.patterns.name, error: 'Must be greater than 3 chars.' });\n\t\t\t\t\tnode += app.getField('face', 'Last name', user.attributes.last_name, { type: 'input', id: 'lastName', isEdit: true, pattern: app.patterns.name, error: 'Must be greater than 3 chars.' });\n\t\t\t\t\tnode += app.getField('lock', 'Email', user.attributes.email, { type: 'text', id: 'email', style: 'text-transform: none !important;', isEdit: false });\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-card__actions mdl-card--border\\\">\";\n\t\t\t\t\tnode += \"\t\t<a class=\\\"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect\\\" id=\\\"saveProfileButton\\\"><i class=\\\"material-icons\\\">edit</i>Save t6 profile</a>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\n\t\t\t\t\tnode += app.getSubtitle('Gravatar contacts');\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\t\tnode += \"<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp card card-user\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"card-header heading-left\\\">&nbsp;</div>\";\n\t\t\t\t\tnode += \"\t<div class=\\\"card-body\\\">\";\n\t\t\t\t\tfor (var phone in gravatar.phoneNumbers) {\n\t\t\t\t\t\tnode += app.getField('phone', gravatar.phoneNumbers[phone].type, gravatar.phoneNumbers[phone].value, { type: 'text', isEdit: false });\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t\t<ul class=\\\"social-links\\\">\";\n\t\t\t\t\tfor (var account in gravatar.accounts) {\n\t\t\t\t\t\tnode += \"\t\t<li><a href=\\\"\" + gravatar.accounts[account].url + \"\\\"><i class=\\\"material-icons mdl-textfield__icon\\\">link</i><span class=\\\"mdl-list__item-sub-title\\\">\" + gravatar.accounts[account].shortname + \"</span></a></li>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t\t</ul>\";\n\t\t\t\t\tnode += \"\t\t<ul class='social-links'>\";\n\t\t\t\t\tfor (var url in gravatar.urls) {\n\t\t\t\t\t\tnode += \"\t\t<li><a href=\\\"\" + gravatar.urls[url].value + \"\\\" target=\\\"_blank\\\"><i class=\\\"material-icons\\\">bookmark</i><span class=\\\"mdl-list__item-sub-title\\\">\" + gravatar.urls[url].title + \"</span></a></li>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t\t</ul>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-card__actions mdl-card--border\\\">\";\n\t\t\t\t\tnode += \"\t\t<a class=\\\"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect\\\" href=\\\"\" + gravatar.profileUrl + \"\\\" target=\\\"_blank\\\"><i class=\\\"material-icons\\\">launch</i>Edit my gravatar</a>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\n\t\t\t\t\tcontainer.innerHTML = node;\n\t\t\t\t\tcomponentHandler.upgradeDom();\n\t\t\t\t\t// Profile Storage\n\t\t\t\t\tlocalStorage.setItem('currentUserId', user.id);\n\t\t\t\t\tlocalStorage.setItem(\"currentUserName\", user.attributes.first_name + \" \" + user.attributes.last_name);\n\t\t\t\t\tlocalStorage.setItem(\"currentUserEmail\", user.attributes.email);\n\t\t\t\t\tlocalStorage.setItem(\"notifications.email\", user.attributes.email);\n\t\t\t\t\tlocalStorage.setItem(\"notifications.unsubscription_token\", user.attributes.unsubscription_token);\n\t\t\t\t\tlocalStorage.setItem(\"currentUserHeader\", gravatar.photos[0].value);\n\t\t\t\t\tif (gravatar.profileBackground && gravatar.profileBackground.url) {\n\t\t\t\t\t\tlocalStorage.setItem(\"currentUserBackground\", gravatar.profileBackground.url);\n\t\t\t\t\t}\n\t\t\t\t\tif (app.gtm && app.getCookie('cookieconsentNoGTM') !== \"true\" && typeof self.dataLayer !== \"undefined\") {\n\t\t\t\t\t\tself.dataLayer.push({\n\t\t\t\t\t\t\t\"userEmail\": user.attributes.email,\n\t\t\t\t\t\t\t\"userRole\": user.attributes.role,\n\t\t\t\t\t\t\t\"userId\": user.id\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (typeof firebase !== \"undefined\" && !firebase.apps.length) {\n\t\t\t\t\t\t\tfirebase.analytics().setUserProperties({ 'userId': user.id });\n\t\t\t\t\t\t\tfirebase.analytics().setUserProperties({ 'userRole': user.attributes.role });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof Tawk_API !== \"undefined\" && typeof Tawk_API.setAttributes === \"function\") {\n\t\t\t\t\t\t\tTawk_API.setAttributes({\n\t\t\t\t\t\t\t\t'name': user.attributes.first_name + \" \" + user.attributes.last_name,\n\t\t\t\t\t\t\t\t'email': user.attributes.email\n\t\t\t\t\t\t\t}, function(error) { });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tapp.setDrawer();\n\t\t\t\t\tapp.fetchUnsubscriptions();\n\t\t\t\t\tapp.displayUnsubscriptions((app.containers.profile).querySelector('.page-content'));\n\n\t\t\t\t\tdocument.getElementById(\"saveProfileButton\").addEventListener(\"click\", function(evt) {\n\t\t\t\t\t\tapp.onSaveProfileButtonClick();\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t});\n\n\t\t\t\t\tif (user.attributes.role === \"admin\" && !document.querySelector('#drawer nav a.mdl-navigation__link[href=\"#users-list\"]')) {\n\t\t\t\t\t\tlocalStorage.setItem(\"role\", 'admin');\n\t\t\t\t\t\tapp.addMenuItem('Users Accounts', 'supervisor_account', '#users-list', null);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function(error) {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\ttoast('fetchProfile error out...' + error, { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t}\n\t\t\t});\n\t\tapp.containers.spinner.setAttribute('hidden', true);\n\t};\n\n\tapp.fetchUnsubscriptions = function() {\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem('bearer'));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\tvar url = `${app.baseUrl}/${app.api_version}/notifications/list/unsubscribed`;\n\n\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse) {\n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tvar notifications = response.unsubscription !== undefined ? response.unsubscription : {};\n\t\t\t\tlocalStorage.setItem(\"notifications.unsubscribed\", JSON.stringify(notifications));\n\t\t\t})\n\t\t\t.catch(function(error) {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\ttoast('fetchUnsubscriptions error' + error, { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tapp.displayUnsubscriptions = function(container) {\n\t\tvar notifications = JSON.parse(app.getSetting('notifications.unsubscribed'));\n\t\tvar node = \"\";\n\t\tnode += app.getSubtitle('Email Notifications');\n\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\tnode += \"<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp card card-user\\\">\";\n\t\tnode += \"\t<div class=\\\"card-header heading-left\\\">&nbsp;</div>\";\n\t\tnode += \"\t<div class=\\\"card-body\\\">\";\n\t\tvar value;\n\t\tvar isEdit = true;\n\t\tvalue = notifications.reminder !== null ? 'false' : 'true';\n\t\tnode += app.getField('mail_outline', 'Reminder Welcome email', value, { type: 'switch', id: 'profile.notifications.reminder', isEdit: isEdit });\n\n\t\tvalue = notifications.changePassword !== null ? 'false' : 'true';\n\t\tnode += app.getField('mail_outline', 'Reminder to change Password', value, { type: 'switch', id: 'profile.notifications.changePassword', isEdit: isEdit });\n\n\t\tvalue = notifications.newsletter !== null ? 'false' : 'true';\n\t\tnode += app.getField('mail_outline', 't6 Newsletter', value, { type: 'switch', id: 'profile.notifications.newsletter', isEdit: isEdit });\n\n\t\tnode += app.getField('mail_outline', 'Security notification related to your account', true, { type: 'switch', id: 'profile.notifications.security', isEdit: false });\n\t\tnode += \"\t</div>\";\n\t\tnode += \"</section>\";\n\n\t\tcontainer.innerHTML += node;\n\t\tcomponentHandler.upgradeDom();\n\n\t\tlet element1 = document.getElementById('switch-profile.notifications.reminder').parentNode;\n\t\tif (element1) {\n\t\t\telement1.addEventListener('change', function(e) {\n\t\t\t\tif (app.getSetting('notifications.email') && app.getSetting('notifications.unsubscription_token')) {\n\t\t\t\t\tvar name = 'reminder';\n\t\t\t\t\tvar type = element1.classList.contains('is-checked') !== false ? 'subscribe' : 'unsubscribe';\n\t\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\t\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\t\t\t\tvar url = app.baseUrl + '/mail/' + app.getSetting('notifications.email') + '/' + type + '/' + name + '/' + app.getSetting('notifications.unsubscription_token') + '/';\n\n\t\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t\t\t).then(function(response) {\n\t\t\t\t\t\t\ttoast('Subscription ' + name + ' (' + type + ') updated.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\t\t\ttoast('Error occured on saving Notifications...' + error, { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\ttoast('Error occured on saving Notifications...', { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tvar element2 = document.getElementById('switch-profile.notifications.changePassword').parentNode;\n\t\tif (element2) {\n\t\t\telement2.addEventListener('change', function(e) {\n\t\t\t\tif (app.getSetting('notifications.email') && app.getSetting('notifications.unsubscription_token')) {\n\t\t\t\t\tvar name = 'changePassword';\n\t\t\t\t\tvar type = element2.classList.contains('is-checked') !== false ? 'subscribe' : 'unsubscribe';\n\t\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\t\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\t\t\t\tvar url = app.baseUrl + '/mail/' + app.getSetting('notifications.email') + '/' + type + '/' + name + '/' + app.getSetting('notifications.unsubscription_token') + '/';\n\n\t\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t\t\t).then(function(response) {\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\tif (type == 'unsubscribe') {\n\t\t\t\t\t\t\t\tapp.setSetting('notifications.unsubscribed', {'reminder': app.getSetting('notifications.unsubscribed.reminder'), 'changePassword': 1234});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tapp.setSetting('notifications.unsubscribed.changePassword', {'reminder': app.getSetting('notifications.unsubscribed.reminder'), 'changePassword': null});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\ttoast('Subscription ' + name + ' (' + type + ') updated.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\t\t\ttoast('Error occured on saving Notifications...' + error, { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\ttoast('Error occured on saving Notifications...', { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tlet element3 = document.getElementById('switch-profile.notifications.newsletter').parentNode;\n\t\tif (element3) {\n\t\t\telement3.addEventListener('change', function(e) {\n\t\t\t\tif (app.getSetting('notifications.email') && app.getSetting('notifications.unsubscription_token')) {\n\t\t\t\t\tvar name = 'newsletter';\n\t\t\t\t\tvar type = element3.classList.contains('is-checked') !== false ? 'subscribe' : 'unsubscribe';\n\t\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\t\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\t\t\t\tvar url = app.baseUrl + '/mail/' + app.getSetting('notifications.email') + '/' + type + '/' + name + '/' + app.getSetting('notifications.unsubscription_token') + '/';\n\n\t\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t\t\t).then(function(response) {\n\t\t\t\t\t\t\ttoast('Subscription ' + name + ' (' + type + ') updated.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\t\t\ttoast('Error occured on saving Notifications...' + error, { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\ttoast('Error occured on saving Notifications...', { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tapp.setDrawer = function() {\n\t\tif (localStorage.getItem(\"currentUserName\") != 'null') { document.getElementById(\"currentUserName\").innerHTML = localStorage.getItem(\"currentUserName\") }\n\t\telse { document.getElementById(\"currentUserName\").innerHTML = \"t6 IoT App\"; }\n\t\tif (localStorage.getItem(\"currentUserEmail\") != 'null') { document.getElementById(\"currentUserEmail\").innerHTML = localStorage.getItem(\"currentUserEmail\") }\n\t\telse { document.getElementById(\"currentUserEmail\").innerHTML = \"\"; }\n\t\tif (document.getElementById(\"imgIconMenu\") && localStorage.getItem(\"currentUserHeader\") != 'null' && localStorage.getItem(\"currentUserHeader\")) {\n\t\t\tdocument.getElementById(\"currentUserHeader\").setAttribute('src', localStorage.getItem(\"currentUserHeader\"));\n\t\t\tdocument.getElementById(\"imgIconMenu\").outerHTML = \"<img id=\\\"imgIconMenu\\\" src=\\\"\" + localStorage.getItem(\"currentUserHeader\") + \"\\\" alt=\\\"Current user avatar\\\" style=\\\"border-radius: 50%; width: 30px; height: 30px; padding: 0px;border: 2px solid #fff;margin: 0px 0px;\\\">\";\n\t\t}\n\t\telse { document.getElementById(\"currentUserHeader\").setAttribute('src', app.baseUrlCdn + \"/img/m/icons/icon-128x128.png\"); }\n\t\tif (localStorage.getItem(\"currentUserBackground\") !== null) { document.getElementById(\"currentUserBackground\").style.background = \"#795548 url(\" + localStorage.getItem(\"currentUserBackground\") + \") 50% 50% / cover\" }\n\t\telse { document.getElementById(\"currentUserBackground\").style.background = \"#795548 url(\" + app.baseUrlCdn + \"/img/m/side-nav-bg.webp) 50% 50% / cover\" }\n\t};\n\n\tapp.resetDrawer = function() {\n\t\tlocalStorage.removeItem(\"currentUserName\");\n\t\tlocalStorage.removeItem(\"currentUserEmail\");\n\t\tlocalStorage.removeItem(\"currentUserHeader\");\n\t\tlocalStorage.removeItem(\"currentUserBackground\");\n\t\tif (document.getElementById(\"imgIconMenu\")) document.getElementById(\"imgIconMenu\").outerHTML = \"<i id=\\\"imgIconMenu\\\" class=\\\"material-icons\\\">menu</i>\";\n\t\tapp.setDrawer();\n\t};\n\n\tapp.displayLoginForm = function(container) {\n\t\tcontainer.querySelectorAll('form.signin').forEach(function(e) { if (e) { e.parentNode.remove(); } });\n\t\tif (app.isLogged === false) {\n\t\t\tvar login = \"<section class='content-grid mdl-grid'>\" +\n\t\t\t\t\"\t<div class='mdl-layout-spacer'></div>\" +\n\t\t\t\t\"\t<form class='signin'>\" +\n\t\t\t\t\"\t\t<div class='mdl-card mdl-card__title mdl-shadow--2dp'>\" +\n\t\t\t\t\"\t\t\t<img src='\" + app.baseUrlCdn + \"/img/opl_img.webp' alt='t6 Connect your Objects' aria-hidden='true'>\" +\n\t\t\t\t\"\t\t\t<div class='mdl-card__title'>\" +\n\t\t\t\t\"\t\t\t\tConnect your Objects to collect their data and show your own Dashboards.\" +\n\t\t\t\t\"\t\t\t</div>\" +\n\t\t\t\t\"\t\t\t<div class='mdl-card__supporting-text'>\" +\n\t\t\t\t\"\t\t\t\t<div class='mdl-textfield mdl-js-textfield mdl-textfield--floating-label'>\" +\n\t\t\t\t\"\t\t\t\t\t<i class='material-icons mdl-textfield__icon'>lock</i>\" +\n\t\t\t\t\"\t\t\t\t\t<input name='username' inputmode='email' autocomplete='username email' pattern=\\\"\" + app.patterns.username + \"\\\" class='mdl-textfield__input' type='text' id='signin.username'>\" +\n\t\t\t\t\"\t\t\t\t\t<label for='signin.username' class='mdl-textfield__label'>Username</label>\" +\n\t\t\t\t\"\t\t\t\t\t<span class='mdl-textfield__error'>Username should be your email address</span>\" +\n\t\t\t\t\"\t\t\t\t</div>\" +\n\t\t\t\t\"\t\t\t\t<div class='mdl-textfield mdl-js-textfield mdl-textfield--floating-label'>\" +\n\t\t\t\t\"\t\t\t\t\t<i class='material-icons mdl-textfield__icon'>vpn_key</i>\" +\n\t\t\t\t\"\t\t\t\t\t<input name='password' pattern=\\\"\" + app.patterns.password + \"\\\" class='mdl-textfield__input' type='password' autocomplete='current-password' id='signin.password'>\" +\n\t\t\t\t\"\t\t\t\t\t<label for='signin.password' class='mdl-textfield__label'>Password</label>\" +\n\t\t\t\t\"\t\t\t\t\t<span class='mdl-textfield__error'>Password must be provided</span>\" +\n\t\t\t\t\"\t\t\t\t</div>\" +\n\t\t\t\t\"\t\t\t</div>\" +\n\t\t\t\t\"\t\t\t<div class='mdl-card__supporting-text'>\" +\n\t\t\t\t//app.getField(null, \"Notifications\", app.getSetting('settings.notifications')!==undefined?app.getSetting('settings.notifications'):true, {type: 'switch', id:'login.notifications', isEdit: true}) +\n\t\t\t\t\"\t\t\t</div>\" +\n\t\t\t\t\"\t\t\t<div class='mdl-card__supporting-text mdl-grid'>\" +\n\t\t\t\t\"\t\t\t\t<span class='mdl-layout-spacer'></span>\" +\n\t\t\t\t\"\t\t\t\t<button class='login_button mdl-button mdl-js-button mdl-js-ripple-effect'>\" +\n\t\t\t\t\"\t\t\t\t\t<i class='material-icons'>lock</i>Log in\" +\n\t\t\t\t\"\t\t\t\t</button>\" +\n\t\t\t\t\"\t\t\t</div>\" +\n\t\t\t\t\"\t\t\t<div class='mdl-card__actions mdl-card--border'>\" +\n\t\t\t\t\"\t\t\t\t<span class='mdl-layout-spacer'></span>\" +\n\t\t\t\t\"\t\t\t\t<a onclick=\\\"app.setSection('signup');\\\" href='#signup' class='mdl-button small'>Sign Up</a> or \" +\n\t\t\t\t\"\t\t\t\t<a onclick=\\\"app.setSection('forgot-password');\\\" href='#forgot-password' class='mdl-button small'>Reset password</a>\" +\n\t\t\t\t\"\t\t\t</div>\" +\n\t\t\t\t\"\t\t</div>\" +\n\t\t\t\t\"\t</form>\" +\n\t\t\t\t\"\t<div class='mdl-layout-spacer'></div>\" +\n\t\t\t\t\"</section>\";\n\t\t\tcontainer.innerHTML += login;\n\t\t\tcomponentHandler.upgradeDom();\n\n\t\t\tvar updated = document.querySelectorAll('.page-content form div.mdl-js-textfield');\n\t\t\tfor (var i = 0; i < updated.length; i++) {\n\t\t\t\tupdated[i].classList.remove('is-upgraded');\n\t\t\t\tupdated[i].removeAttribute('data-upgraded');\n\t\t\t}\n\t\t\tapp.refreshButtonsSelectors();\n\t\t\tapp.setLoginAction();\n\t\t\tapp.setSignupAction();\n\t\t}\n\t};\n\n\tapp.fetchIndex = function() {\n\t\tvar node = \"\";\n\t\tvar container = (app.containers.index).querySelector('.page-content');\n\t\tapp.containers.spinner.removeAttribute('hidden');\n\t\tapp.containers.spinner.classList.remove('hidden');\n\t\tif (!localStorage.getItem('index')) {\n\t\t\tvar myHeaders = new Headers();\n\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem('bearer'));\n\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\t\tvar url = `${app.baseUrl}/${app.api_version}/index`;\n\t\t\tvar title = '';\n\n\t\t\tfetch(url, myInit)\n\t\t\t\t.then(\n\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t).then(function(fetchResponse) {\n\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t})\n\t\t\t\t.then(function(response) {\n\t\t\t\t\tfor (var i = 0; i < (response).length; i++) {\n\t\t\t\t\t\tnode += app.getCard(response[i]);\n\t\t\t\t\t}\n\t\t\t\t\tlocalStorage.setItem('index', JSON.stringify(response));\n\t\t\t\t\tcontainer.innerHTML = node;\n\t\t\t\t\tapp.imageLazyLoading();\n\t\t\t\t})\n\t\t\t\t.catch(function(error) {\n\t\t\t\t\tcontainer.innerHTML = app.getCard({ image: app.baseUrlCdn + '/img/opl_img2.webp', title: 'Oops, something has not been loaded correctly..', titlecolor: '#ffffff', description: 'We are sorry, the content cannot be loaded, please try again later, there might a temporary network outage. :-)' });\n\t\t\t\t\tapp.displayLoginForm(container);\n\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\ttoast('fetchIndex error out...' + error, { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t} else {\n\t\t\tvar index = JSON.parse(localStorage.getItem('index'));\n\t\t\tfor (var i = 0; i < index.length; i++) {\n\t\t\t\tnode += app.getCard(index[i]);\n\t\t\t}\n\t\t\tcontainer.innerHTML = node;\n\t\t}\n\t\tapp.containers.spinner.setAttribute('hidden', true);\n\t};\n\n\tapp.showAddFAB = function(type) {\n\t\tvar container;\n\t\tvar showFAB = false;\n\t\tif (type === 'objects') {\n\t\t\tvar id = 'createObject';\n\t\t\tcontainer = (app.containers.objects).querySelector('.page-content');\n\t\t\tshowFAB = true;\n\t\t}\n\t\tif (type === 'flows') {\n\t\t\tvar id = 'createFlow';\n\t\t\tcontainer = (app.containers.flows).querySelector('.page-content');\n\t\t\tshowFAB = true;\n\t\t}\n\t\tif (type === 'dashboards') {\n\t\t\tvar id = 'createDashboard';\n\t\t\tcontainer = (app.containers.dashboards).querySelector('.page-content');\n\t\t\tshowFAB = true;\n\t\t}\n\t\tif (type === 'snippets') {\n\t\t\tvar id = 'createSnippet';\n\t\t\tcontainer = (app.containers.snippets).querySelector('.page-content');\n\t\t\tshowFAB = true;\n\t\t}\n\t\tif (type === 'rules') {\n\t\t\tvar id = 'createRule';\n\t\t\tcontainer = (app.containers.rules).querySelector('.page-content');\n\t\t\tshowFAB = true;\n\t\t}\n\t\tif (type === 'mqtts') {\n\t\t\tvar id = 'createMqtt';\n\t\t\tcontainer = (app.containers.mqtts).querySelector('.page-content');\n\t\t\tshowFAB = true;\n\t\t}\n\t\tif (type === 'sources') {\n\t\t\tvar id = 'createSource';\n\t\t\tcontainer = (app.containers.sources).querySelector('.page-content');\n\t\t\tshowFAB = true;\n\t\t}\n\t\tif (type === 'exploration') {\n\t\t\tvar id = 'exploreFlowsFAB';\n\t\t\tcontainer = (app.containers.exploration).querySelector('.page-content');\n\t\t\tvar fabClass = app.getSetting('settings.fab_position') !== null ? app.getSetting('settings.fab_position') : 'fab__bottom';\n\t\t\tvar fab = \"<div class='mdl-button--fab_flinger-container \" + fabClass + \"'>\";\n\t\t\tfab += \"\t<button id='\" + id + \"' class='mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-shadow--8dp'>\";\n\t\t\tfab += \"\t\t<i class='material-icons'>flare</i>\";\n\t\t\tfab += \"\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\" + id + \"'>Explore</label>\";\n\t\t\tfab += \"\t</button>\";\n\t\t\tfab += \"</div>\";\n\t\t\tcontainer.innerHTML += fab;\n\t\t\tcomponentHandler.upgradeDom();\n\t\t\tif (document.getElementById(\"exploreFlowsFAB\")) {\n\t\t\t\tdocument.getElementById(\"exploreFlowsFAB\").addEventListener(\"click\", function(evt) {\n\t\t\t\t\ttoast(\"Exploring... Please wait.\", { timeout: app.toastDuration, type: \"info\" });\n\t\t\t\t\tvar myForm = evt.target.parentNode.parentNode.parentNode;\n\t\t\t\t\tvar my_flow_id = Array.prototype.map.call(myForm.querySelectorAll(\".mdl-chips .mdl-chip\"), function(flow) { return ((JSON.parse(localStorage.getItem(\"flows\")))[flow.getAttribute(\"data-id\")]).id; });\n\t\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem(\"bearer\"));\n\t\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\t\t\tvar myInit = { method: \"GET\", headers: myHeaders };\n\t\t\t\t\tvar start = typeof myForm.querySelector(\"#start\").value !== \"undefined\" ? \"&start=\" + myForm.querySelector(\"#start\").value : \"\";\n\t\t\t\t\tvar end = typeof myForm.querySelector(\"#end\").value !== \"undefined\" ? \"&end=\" + myForm.querySelector(\"#end\").value : \"\";\n\t\t\t\t\tvar url = app.baseUrl + \"/\" + app.api_version + `/exploration/summary?flow_id=${my_flow_id}${start}${end}`;\n\t\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t\t\t).then(function(fetchResponse) {\n\t\t\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(function(response) {\n\t\t\t\t\t\t\tdocument.getElementById(\"exploreResults\").innerHTML = \"\";\n\t\t\t\t\t\t\tdocument.getElementById(\"exploreResults\").innerHTML += app.getField(\"timeline\", \"Data Type\", `${response.data_type.name} ${response.data_type.type} (${response.data_type.classification})`, { type: \"text\" });\n\t\t\t\t\t\t\tfor (const [key, value] of Object.entries(response)) {\n\t\t\t\t\t\t\t\tif (typeof value!==\"object\") {\n\t\t\t\t\t\t\t\t\tdocument.getElementById(\"exploreResults\").innerHTML += app.getField(\"bubble_chart\", key, value, { type: \"text\" });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tvar start = typeof myForm.querySelector(\"#start\").value !== \"undefined\" ? \"&start=\" + myForm.querySelector(\"#start\").value : \"\";\n\t\t\t\t\t\t\tvar end = typeof myForm.querySelector(\"#end\").value !== \"undefined\" ? \"&end=\" + myForm.querySelector(\"#end\").value : \"\";\n\t\t\t\t\t\t\tvar url = app.baseUrl + \"/\" + app.api_version + `/exploration/${my_flow_id}/exploration?graphType=boxplot&width=200&height=600&xAxis=Boxplot&${start}${end}`;\n\t\t\t\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.then(response => response.text())\n\t\t\t\t\t\t\t\t.then(function(svg) {document.getElementById(\"explorationBoxPlot\").innerHTML = svg})\n\t\t\t\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\t\t\t\ttoast(\"Exploring error.\", { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar url = app.baseUrl + \"/\" + app.api_version + `/exploration/frequencyDistribution?flow_id=${my_flow_id}&group=1h&width=800&height=300&ticks=20${start}${end}`;\n\t\t\t\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.then(response => response.text())\n\t\t\t\t\t\t\t\t.then(function(svg) {document.getElementById(\"explorationFrequencyDistribution\").innerHTML = svg})\n\t\t\t\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\t\t\t\ttoast(\"Exploring error.\", { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\t\ttoast(\"Exploring error.\", { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t\t});\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t}, false);\n\t\t\t}\n\t\t}\n\t\tif (showFAB && container) {\n\t\t\tvar fabClass = app.getSetting('settings.fab_position') !== null ? app.getSetting('settings.fab_position') : 'fab__bottom';\n\t\t\tvar fab = \"<div class='mdl-button--fab_flinger-container \" + fabClass + \"'>\";\n\t\t\tfab += \"\t<button id='\" + id + \"' class='mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-shadow--8dp'>\";\n\t\t\tfab += \"\t\t<i class='material-icons'>add</i>\";\n\t\t\tfab += \"\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\" + id + \"'>Add a new \" + type.slice(0, -1) + \"</label>\";\n\t\t\tfab += \"\t</button>\";\n\t\t\tfab += \"</div>\";\n\n\t\t\t// Add spacer\n\t\t\tvar from = (parseInt(app.itemsPage[type]) * parseInt(app.itemsSize[type])) + 1;\n\t\t\tvar to = (parseInt(app.itemsPage[type]) + 1) * parseInt(app.itemsSize[type]);\n\t\t\tvar page = parseInt(app.itemsPage[type]) + 1;\n\t\t\tvar max = 5; // hardcoded! # TODO\n\t\t\t//if ( to < max ) {\n\t\t\tfab += \"<div class='mdl-grid mdl-cell mdl-cell--12-col spacer'>\";\n\t\t\tfab += \"\t<span class='mdl-layout-spacer'></span>\";\n\t\t\tfab += \"\t\t<button data-size='\" + parseInt(app.itemsSize[type]) + \"' data-page='\" + page + \"' data-type='\" + type + \"' class='lazyloading mdl-cell--12-col mdl-button mdl-js-button mdl-js-ripple-effect'>\";\n\t\t\tfab += \"\t\t\t<i class='material-icons'>expand_more</i>\";\n\t\t\tfab += \"\t\t</button>\";\n\t\t\tfab += \"\t<span class='mdl-layout-spacer'></span>\";\n\t\t\tfab += \"</div>\";\n\t\t\t//}\n\t\t\tcontainer.innerHTML += fab;\n\t\t\tcomponentHandler.upgradeDom();\n\n\t\t\tapp.refreshButtonsSelectors();\n\t\t\tif (app.buttons.createObject) app.buttons.createObject.addEventListener('click', function() { app.setSection('object_add'); }, false);\n\t\t\tif (app.buttons.createFlow) app.buttons.createFlow.addEventListener('click', function() { app.setSection('flow_add'); }, false);\n\t\t\tif (app.buttons.createSnippet) app.buttons.createSnippet.addEventListener('click', function() { app.setSection('snippet_add'); }, false);\n\t\t\tif (app.buttons.createDashboard) app.buttons.createDashboard.addEventListener('click', function() { app.setSection('dashboard_add'); }, false);\n\t\t\tif (app.buttons.createRule) app.buttons.createRule.addEventListener('click', function() { app.setSection('rule_add'); }, false);\n\t\t\tif (app.buttons.createMqtt) app.buttons.createMqtt.addEventListener('click', function() { app.setSection('mqtt_add') }, false);\n\t\t\tif (app.buttons.createSource) app.buttons.createSource.addEventListener('click', function() { app.setSection('source_add') }, false);\n\t\t}\n\t};\n\n\tapp.getField = function(icon, label, value, options) {\n\t\tif (options.type === 'hidden') {\n\t\t\toptions.isVisible = false;\n\t\t}\n\t\tvar hidden = options.isVisible !== false ? \"\" : \" hidden\";\n\t\tvar expand = options.isExpand === false ? \"\" : \" mdl-card--expand\";\n\t\tvar enterkeyhint = typeof options.enterkeyhint !== \"undefined\" ? sprintf(\" enterkeyhint=\\\"%s\\\"\", options.enterkeyhint) : \"\";\n\t\tvar inputmode = typeof options.inputmode !== \"undefined\" ? sprintf(\" inputmode=\\\"%s\\\"\", options.inputmode) : \"\";\n\t\tvar field = \"\";\n\t\tfield += \"<div class='mdl-list__item--three-line small-padding \" + hidden + expand + \"'>\";\n\t\tif (typeof options === 'object') {\n\t\t\tvar id = options.id !== null ? options.id : app.getUniqueId();\n\n\t\t\tif (options.type === 'input' || options.type === 'text') {\n\t\t\t\tvar style = options.style !== undefined ? \"style='\" + options.style + \"'\" : \"\";\n\t\t\t\tif (options.isEdit === true) {\n\t\t\t\t\tvar pattern = options.pattern !== undefined ? \"pattern='\" + options.pattern + \"'\" : \"\";\n\t\t\t\t\tfield += \"<div class='mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-list__item-sub-title'>\";\n\t\t\t\t\tif (icon) field += \"\t<i class='material-icons mdl-textfield__icon' for='\" + id + \"'>\" + icon + \"</i>\";\n\t\t\t\t\tfield += \"\t<input type='text' \" + style + \" \" + inputmode + \" \" + enterkeyhint + \" value='\" + app.escapeHtml(value) + \"' \" + pattern + \" class='mdl-textfield__input' name='\" + label + \"' id='\" + id + \"' />\";\n\t\t\t\t\tif (label) field += \"\t<label class='mdl-textfield__label' for='\" + id + \"'>\" + label + \"</label>\";\n\t\t\t\t\tif (options.error) field += \"\t<span class='mdl-textfield__error'>\" + options.error + \"</span>\";\n\t\t\t\t\tfield += \"</div>\";\n\t\t\t\t} else {\n\t\t\t\t\tfield += \"<div class='mdl-list__item-sub-title'>\";\n\t\t\t\t\tif (icon) field += \"\t<i class='material-icons mdl-textfield__icon'>\" + icon + \"</i>\";\n\t\t\t\t\tif (label) field += \"\t<label class='mdl-textfield__label'>\" + label + \"</label>\";\n\t\t\t\t\tif (value) field += \"\t<span class='mdl-list__item-sub-title' \" + style + \">\" + app.escapeHtml(value) + \"</span>\";\n\t\t\t\t\tfield += \"</div>\";\n\t\t\t\t}\n\t\t\t} else if (options.type === 'container') {\n\t\t\t\tfield += \"<div class='mdl-list__item-sub-title'>\";\n\t\t\t\tfield += \"\t<i class='material-icons mdl-textfield__icon' for='\" + id + \"'>view_module</i>\";\n\t\t\t\tif (label) field += \"\t<label class='mdl-textfield__label' for='\" + id + \"'>\" + label + \"</label>\";\n\t\t\t\tfield += \"\t<div class='' id='\" + id + \"'></div>\";\n\t\t\t\tfield += \"</div>\";\n\t\t\t} else if (options.type === 'hidden') {\n\t\t\t\tvar pattern = options.pattern !== undefined ? \"pattern='\" + options.pattern + \"'\" : \"\";\n\t\t\t\tfield += \"<div class='mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-list__item-sub-title'>\";\n\t\t\t\tif (icon) field += \"\t<i class='material-icons mdl-textfield__icon' for='\" + id + \"'>\" + icon + \"</i>\";\n\t\t\t\tfield += \"\t<input type='hidden' value='\" + value + \"' \" + pattern + \" class='mdl-textfield__input' name='\" + label + \"' id='\" + id + \"' />\";\n\t\t\t\tif (label) field += \"\t<label class='mdl-textfield__label' for='\" + id + \"'>\" + label + \"</label>\";\n\t\t\t\tif (options.error) field += \"\t<span class='mdl-textfield__error'>\" + options.error + \"</span>\";\n\t\t\t\tfield += \"</div>\";\n\t\t\t} else if (options.type === 'textarea') {\n\t\t\t\tif (options.isEdit === true) {\n\t\t\t\t\tfield += \"<div class='mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-list__item-sub-title'>\";\n\t\t\t\t\tif (icon) field += \"\t<i class='material-icons mdl-textfield__icon' for='\" + id + \"'>\" + icon + \"</i>\";\n\t\t\t\t\tfield += \"\t<textarea style='width:100%; height:100%;' type='text' rows='3' class='mdl-textfield__input' name='\" + label + \"' id='\" + id + \"'>\" + value + \"</textarea>\";\n\t\t\t\t\tif (label) field += \"\t<label class='mdl-textfield__label' for='\" + id + \"'>\" + label + \"</label>\";\n\t\t\t\t\tif (options.error) field += \"\t<span class='mdl-textfield__error'>\" + options.error + \"</span>\";\n\t\t\t\t\tfield += \"</div>\";\n\t\t\t\t} else {\n\t\t\t\t\tif (value) field += \"<span class='mdl-list__item-sub-title'>\" + value + \"</span>\";\n\t\t\t\t}\n\t\t\t} else if (options.type === 'radio') {\n\t\t\t\tif (options.isEdit === true) {\n\t\t\t\t\tfield += \"<div class='mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-list__item-sub-title'>\";\n\t\t\t\t\tif (icon) field += \"\t<i class='material-icons mdl-textfield__icon'> /!\\ radio \" + icon + \"</i>\";\n\t\t\t\t\tif (label) field += \"\t<label class='mdl-textfield__label'> /!\\ radio \" + label + \"</label>\";\n\t\t\t\t\tif (options.error) field += \"\t<span class='mdl-textfield__error'>\" + options.error + \"</span>\";\n\t\t\t\t\tfield += \"</div>\";\n\t\t\t\t} else {\n\t\t\t\t\tfield += \"<div class='mdl-list__item-sub-title'>\";\n\t\t\t\t\tif (icon) field += \"\t<i class='material-icons mdl-textfield__icon'>\" + icon + \"</i>\";\n\t\t\t\t\tif (label) field += \"\t<label class='mdl-radio__label'>\" + label + \"</label>\";\n\t\t\t\t\tif (value) field += \"\t<span class='mdl-list__item-sub-title'>\" + value + \"</span>\";\n\t\t\t\t\tfield += \"</div>\";\n\t\t\t\t}\n\t\t\t} else if (options.type === 'checkbox') {\n\t\t\t\tvar isChecked = value === true || value === \"true\" ? \" checked\" : \"\";\n\t\t\t\tvar className = value === true || value === \"true\" ? \"is-checked\" : \"\";\n\t\t\t\tif (options.isEdit === true) {\n\t\t\t\t\tfield += \"<label class='mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-textfield--floating-label \" + className + \"' for='checkbox-\" + id + \"' data-id='checkbox-\" + id + \"'>\";\n\t\t\t\t\tif (icon) field += \"\t<i class='material-icons mdl-textfield__icon' for='\" + id + \"'>\" + icon + \"</i>\";\n\t\t\t\t\tfield += \"\t<input type='checkbox' id='checkbox-\" + id + \"' class='mdl-checkbox__input' name='\" + label + \"' value='\" + value + \"' placeholder='\" + label + \"' \" + isChecked + \">\";\n\t\t\t\t\tif (label) field += \"\t<div class='mdl-checkbox__label'>\" + label + \"</div>\";\n\t\t\t\t\tfield += \"</label>\";\n\t\t\t\t\tif (options.error) field += \"\t<span class='mdl-textfield__error'>\" + options.error + \"</span>\";\n\t\t\t\t} else {\n\t\t\t\t\tfield += \"<div class='mdl-list__item-sub-title'>\";\n\t\t\t\t\tif (icon) field += \"\t<i class='material-icons mdl-textfield__icon'>\" + icon + \"</i>\";\n\t\t\t\t\tif (label) field += \"\t<label class='mdl-switch__label'>\" + label + \"</label>\";\n\t\t\t\t\tif (value) field += \"\t<span class='mdl-list__item-sub-title'>\" + value + \"</span>\";\n\t\t\t\t\tfield += \"</div>\";\n\t\t\t\t}\n\t\t\t} else if (options.type === 'switch') {\n\t\t\t\tvar isChecked = value === true || value === \"true\" ? \" checked\" : \"\";\n\t\t\t\tvar className = value === true || value === \"true\" ? \"is-checked\" : \"\";\n\t\t\t\tif (options.isEdit === true) {\n\t\t\t\t\tfield += \"<label class='mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-textfield--floating-label \" + className + \"' for='switch-\" + id + \"' data-id='switch-\" + id + \"'>\";\n\t\t\t\t\tif (icon) field += \"\t<i class='material-icons mdl-textfield__icon' for='\" + id + \"'>\" + icon + \"</i>\";\n\t\t\t\t\tfield += \"\t<input type='checkbox' id='switch-\" + id + \"' class='mdl-switch__input' name='\" + label + \"' value='\" + value + \"' placeholder='\" + label + \"' \" + isChecked + \">\";\n\t\t\t\t\tif (label) field += \"\t<div class='mdl-switch__label'>\" + label + \"</div>\";\n\t\t\t\t\tfield += \"</label>\";\n\t\t\t\t\tif (options.error) field += \"\t<span class='mdl-textfield__error'>\" + options.error + \"</span>\";\n\t\t\t\t} else {\n\t\t\t\t\tfield += \"<div class='mdl-list__item-sub-title'>\";\n\t\t\t\t\tif (icon) field += \"\t<i class='material-icons mdl-textfield__icon'>\" + icon + \"</i>\";\n\t\t\t\t\tif (label) field += \"\t<label class='mdl-switch__label'>\" + label + \"</label>\";\n\t\t\t\t\tif (value) field += \"\t<span class='mdl-list__item-sub-title'>\" + value + \"</span>\";\n\t\t\t\t\tfield += \"</div>\";\n\t\t\t\t}\n\t\t\t} else if (options.type === 'select') {\n\t\t\t\tif (options.isEdit == true) {\n\t\t\t\t\tvar isMultiple = options.isMultiple == true ? 'multiple' : '';\n\n\t\t\t\t\tfield += \"<div class='mdl-selectfield mdl-js-selectfield mdl-textfield--floating-label'>\";\n\t\t\t\t\tif (icon) field += \"\t<i class='material-icons mdl-textfield__icon' for='\" + id + \"'>\" + icon + \"</i>\";\n\t\t\t\t\tif (label) field += \"\t<label class='mdl-selectfield__label' for='\" + id + \"'>\" + label + \"</label>\";\n\t\t\t\t\tfield += \"\t<select class='mdl-textfield__input mdl-selectfield__select' name='\" + label + \"' id='\" + id + \"' \" + isMultiple + \">\";\n\t\t\t\t\tif (options.options) {\n\t\t\t\t\t\tfor (var n = 0; n < options.options.length; n++) {\n\t\t\t\t\t\t\tlet selected = value == options.options[n].name ? 'selected' : '';\n\t\t\t\t\t\t\tlet displayName = options.options[n].value;\n\t\t\t\t\t\t\tif (typeof options.options[n].type !== \"undefined\") {\n\t\t\t\t\t\t\t\tdisplayName += ` (${options.options[n].type})`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfield += \"\t<option \" + selected + \" value='\" + options.options[n].name + \"' data-stype='\" + options.options[n].sType + \"'>\" + displayName + \"</option>\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfield += \"\t</select>\";\n\t\t\t\t\tif (options.error) field += \"\t<span class='mdl-textfield__error'>\" + options.error + \"</span>\";\n\t\t\t\t\tfield += \"</div>\";\n\t\t\t\t} else {\n\t\t\t\t\tvar selectedValue = (options.options.filter(function(cur) { return cur.name === value }));\n\t\t\t\t\tselectedValue = selectedValue[0] !== undefined ? selectedValue[0].value : '';\n\t\t\t\t\tfield += \"<div class='mdl-list__item-sub-title'>\";\n\t\t\t\t\tif (icon) field += \"\t<i class='material-icons mdl-textfield__icon'>\" + icon + \"</i>\";\n\t\t\t\t\tif (label) field += \"\t<label class='mdl-selectfield__label'>\" + label + \"</label>\";\n\t\t\t\t\tif (value) field += \"\t<span class='mdl-list__item-sub-title'>\" + value + \"</span>\";\n\t\t\t\t\tfield += \"</div>\";\n\t\t\t\t}\n\t\t\t} else if (options.type === '2inputs') {\n\t\t\t\tvar pattern = new Array();\n\t\t\t\tpattern[0] = options.pattern[0] !== undefined ? \"pattern='\" + options.pattern[0] + \"'\" : \"\";\n\t\t\t\tpattern[1] = options.pattern[1] !== undefined ? \"pattern='\" + options.pattern[1] + \"'\" : \"\";\n\t\t\t\tif (options.isEdit == true) {\n\t\t\t\t\tfield += \"<div class='half mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-list__item-sub-title' style='width: calc(50% - 20px) !important;'>\";\n\t\t\t\t\tif (icon) field += \"\t<i class='material-icons mdl-textfield__icon' for='\" + id[0] + \"'>\" + icon + \"</i>\";\n\n\t\t\t\t\tfield += \"\t<input type='text' value='\" + value[0] + \"'\" + pattern[0] + \" class='mdl-textfield__input' name='\" + id[0] + \"' id='\" + id[0] + \"' />\";\n\t\t\t\t\tif (label[0]) field += \"\t<label class='mdl-textfield__label' for='\" + id[0] + \"'>\" + label[0] + \"</label>\";\n\t\t\t\t\tif (options.error[0]) field += \"\t<span class='mdl-textfield__error'>\" + options.error[0] + \"</span>\";\n\t\t\t\t\tfield += \"</div>\";\n\n\t\t\t\t\tfield += \"<div class='half mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-list__item-sub-title' style='width: calc(50% - 20px) !important;'>\";\n\t\t\t\t\tfield += \"\t<input type='text' value='\" + value[1] + \"'\" + pattern[1] + \" class='mdl-textfield__input' name='\" + id[1] + \"' id='\" + id[1] + \"' />\";\n\t\t\t\t\tif (label[1]) field += \"\t<label class='mdl-textfield__label' for='\" + id[1] + \"'>\" + label[1] + \"</label>\";\n\t\t\t\t\tif (options.error[1]) field += \"\t<span class='mdl-textfield__error'>\" + options.error[1] + \"</span>\";\n\t\t\t\t\tfield += \"</div>\";\n\n\t\t\t\t\tfield += \"<div class='half mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-list__item-sub-title' style='width: 40px !important;'>\";\n\t\t\t\t\tfield += \"\t<button class='mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' style='position: absolute; bottom: -10px;'><i class='material-icons'>add</i></button>\";\n\t\t\t\t\tfield += \"</div>\";\n\n\t\t\t\t} else {\n\t\t\t\t\tvalue = (options.options.filter(function(cur) { return cur.name === value }))[0].value;\n\t\t\t\t\tfield += \"<div class='mdl-list__item-sub-title'>\";\n\t\t\t\t\tif (icon) field += \"\t<i class='material-icons mdl-textfield__icon'>\" + icon + \"</i>\";\n\t\t\t\t\tif (value) field += \"\t<span class='mdl-list__item-sub-title'>\" + value + \"</span>\";\n\t\t\t\t\tfield += \"</div>\";\n\t\t\t\t}\n\t\t\t} else if (options.type === 'progress-status') {\n\t\t\t\tfield += \"<span class='mdl-progress mdl-js-progress' id='progress-status' title=''><br />\" + value + \"</span>\";\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log(\"Error on options: \", options);\n\t\t}\n\n\t\tif (options.action !== undefined) {\n\t\t\tfield += \"\t<span class='mdl-list__item-secondary-action'>\";\n\t\t\tfield += \"\t\t<a href='#' \" + options.action + \">\";\n\t\t\tfield += \"\t\t\t<i class='material-icons'>chevron_right</i>\";\n\t\t\tfield += \"\t\t</a>\";\n\t\t\tfield += \"\t</span>\";\n\t\t}\n\t\tfield += \"</div>\";\n\t\treturn field;\n\t};\n\n\tapp.getSnippet = function(icon, snippet_id, container) {\n\t\tapp.containers.spinner.removeAttribute('hidden');\n\t\tapp.containers.spinner.classList.remove('hidden');\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem('bearer'));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\tvar myContainer = container != null ? container : (app.containers.dashboard).querySelector('.page-content');\n\t\tvar url = `${app.baseUrl}/${app.api_version}/snippets/${snippet_id}`;\n\n\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse) {\n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tif (response.data[0]) {\n\t\t\t\t\tvar my_snippet = response.data[0];\n\t\t\t\t\tvar s = app.snippetTypes.find(function(snippet) {\n\t\t\t\t\t\treturn (snippet.name).toLowerCase() === (my_snippet.attributes.type).toLowerCase();\n\t\t\t\t\t});\n\t\t\t\t\tvar snippet = s.getHtml({ name: my_snippet.attributes.name, id: my_snippet.id, icon: my_snippet.attributes.icon, color: my_snippet.attributes.color });\n\n\t\t\t\t\tvar c = document.createElement(\"div\");\n\t\t\t\t\tc.setAttribute('class', 'mdl-grid mdl-cell');\n\t\t\t\t\tc.innerHTML = snippet;\n\t\t\t\t\tmyContainer.appendChild(c);\n\t\t\t\t\tcomponentHandler.upgradeDom();\n\n\t\t\t\t\tmy_snippet.flowNames = [];\n\t\t\t\t\tmy_snippet.attributes.flows.map(function(f) {\n\t\t\t\t\t\tif (localStorage.getItem('flows') != 'null' && JSON.parse(localStorage.getItem('flows'))) {\n\t\t\t\t\t\t\tvar theFlow = (JSON.parse(localStorage.getItem('flows'))).find(function(storedF) { return storedF.id == f; });\n\t\t\t\t\t\t\tif (theFlow) {\n\t\t\t\t\t\t\t\tmy_snippet.flowNames.push(theFlow.name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (typeof my_snippet.attributes.options !== \"undefined\") {\n\t\t\t\t\t\ts.setOptions(my_snippet.attributes.options);\n\t\t\t\t\t}\n\t\t\t\t\ts.activateOnce(my_snippet);\n\n\t\t\t\t\t// Set the buttons on edit Snippets\n\t\t\t\t\tvar editSnippetButtons = document.querySelectorAll(\".edit-snippet\");\n\t\t\t\t\tfor (var b in editSnippetButtons) {\n\t\t\t\t\t\tif ((editSnippetButtons[b]).childElementCount > -1) {\n\t\t\t\t\t\t\t(editSnippetButtons[b]).addEventListener(\"click\", function(evt) {\n\t\t\t\t\t\t\t\tapp.resources.snippets.display(evt.target.parentNode.getAttribute(\"data-snippet-id\"), false, true, false);\n\t\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function(error) {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\ttoast(\"getSnippet error out...\" + error, { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t}\n\t\t\t});\n\t\tapp.containers.spinner.setAttribute('hidden', true);\n\t};\n\n\tapp.refreshFromNow = function(id, time, fromNow) {\n\t\tif (document.getElementById(id)) {\n\t\t\tdocument.getElementById(id).innerHTML = moment(time).format(app.date_format);\n\t\t\tif (fromNow !== null) {\n\t\t\t\tdocument.getElementById(id).innerHTML += \"<small>, \" + moment(time).fromNow() + \"</small>\";\n\t\t\t}\n\t\t}\n\t};\n\n\tapp.getQrcodeImg = function(icon, label, id) {\n\t\tvar field = \"<div class='mdl-list__item small-padding'>\";\n\t\tfield += \"\t\t<span class='mdl-list__item-primary-content'>\";\n\t\tfield += \"\t\t\t<i class='material-icons mdl-textfield__icon'>link</i>\";\n\t\tfield += \"\t\t\t<label class=\\\"mdl-switch__label\\\">QR Code<sup>TM</sup></label>\";\n\t\tfield += \"\t\t</span>\";\n\t\tfield += \"\t\t<span class='mdl-list__item-secondary-content'>\";\n\t\tfield += \"\t\t\t<img src='' id='qr-\" + id + \"' class='img-responsive' style='margin:0 auto;' />\";\n\t\tfield += \"\t\t</span>\";\n\t\tfield += \"</div>\";\n\t\treturn field;\n\t};\n\n\tapp.getQrcode = function(icon, label, id) {\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem('bearer'));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\tvar url = `${app.baseUrl}/${app.api_version}/objects/${id}/qrcode/8/M`;\n\n\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse) {\n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tif (response) {\n\t\t\t\t\tvar container = document.getElementById('qr-' + id);\n\t\t\t\t\tcontainer.setAttribute('src', (new DOMParser()).parseFromString(response.data, \"text/html\").images[0].src);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function(error) {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\ttoast('fetch Qrcode error out...' + error, { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t}\n\t\t\t});\n\t\tapp.containers.spinner.setAttribute('hidden', true);\n\t};\n\n\tapp.getMap = function(icon, id, longitude, latitude, isEditable, isActionable) {\n\t\tvar field = \"<div class='mdl-list__item'>\";\n\t\tfield += \"\t<span class='mdl-list__item-primary-content map' id='\" + id + \"' style='width:100%; height:400px;'></span>\";\n\t\tfield += \"</div>\";\n\t\treturn field;\n\t};\n\n\tapp.authenticate = function() {\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tapp.auth.pushSubscription = {\n\t\t\tendpoint: app.getSetting('settings.pushSubscription.endpoint'),\n\t\t\tkeys: {\n\t\t\t\tauth: app.getSetting('settings.pushSubscription.keys.auth'),\n\t\t\t\tp256dh: app.getSetting('settings.pushSubscription.keys.p256dh')\n\t\t\t}\n\t\t};\n\t\tvar myInit = { method: 'POST', headers: myHeaders, body: JSON.stringify(app.auth) };\n\t\tvar url = `${app.baseUrl}/${app.api_version}/authenticate`;\n\n\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse) {\n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tif (response.token && response.refresh_token && response.refreshTokenExp) {\n\t\t\t\t\tlocalStorage.setItem('bearer', response.token);\n\t\t\t\t\tlocalStorage.setItem('refresh_token', response.refresh_token);\n\t\t\t\t\tlocalStorage.setItem('refreshTokenExp', response.refreshTokenExp);\n\t\t\t\t\tapp.isLogged = true;\n\t\t\t\t\tapp.resetSections();\n\t\t\t\t\tapp.fetchProfile();\n\t\t\t\t\tapp.fetchUnsubscriptions();\n\t\t\t\t\tif (window.location.hash && window.location.hash.substr(1) === 'object_add') {\n\t\t\t\t\t\tapp.displayAddObject(app.defaultResources.object);\n\t\t\t\t\t} else if (window.location.hash && window.location.hash.substr(1) === 'flow_add') {\n\t\t\t\t\t\tapp.displayAddFlow(app.defaultResources.flow);\n\t\t\t\t\t} else if (window.location.hash && window.location.hash.substr(1) === 'dashboard_add') {\n\t\t\t\t\t\tapp.displayAddDashboard(app.defaultResources.dashboard);\n\t\t\t\t\t} else if (window.location.hash && window.location.hash.substr(1) === 'snippet_add') {\n\t\t\t\t\t\tapp.displayAddSnippet(app.defaultResources.snippet);\n\t\t\t\t\t} else if (window.location.hash && window.location.hash.substr(1) === 'rule_add') {\n\t\t\t\t\t\tapp.displayAddRule(app.defaultResources.rule);\n\t\t\t\t\t} else if (window.location.hash && window.location.hash.substr(1) === 'mqtt_add') {\n\t\t\t\t\t\tapp.displayAddMqtt(app.defaultResources.mqtt);\n\t\t\t\t\t} else if (window.location.hash && window.location.hash.substr(1) === 'source_add') {\n\t\t\t\t\t\tapp.displayAddSource(app.defaultResources.source);\n\t\t\t\t\t} else if (window.location.hash && window.location.hash.substr(1) !== 'login') {\n\t\t\t\t\t\tapp.setSection(window.location.hash.substr(1));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.setSection('index');\n\t\t\t\t\t}\n\t\t\t\t\tapp.setHiddenElement(\"signin_button\");\n\t\t\t\t\tapp.setVisibleElement(\"logout_button\");\n\n\t\t\t\t\ttoast('Hey. Welcome Back! :-)', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t\tif (typeof firebase !== \"undefined\") {\n\t\t\t\t\t\tfirebase.analytics().setUserProperties({ 'isLoggedIn': 1 });\n\t\t\t\t\t\tfirebase.analytics().logEvent('login');\n\t\t\t\t\t}\n\t\t\t\t\tsetInterval(app.refreshAuthenticate, app.refreshExpiresInSeconds);\n\t\t\t\t\tapp.getUnits();\n\t\t\t\t\tapp.getDatatypes();\n\t\t\t\t\tapp.getFlows();\n\t\t\t\t\tapp.getSnippets();\n\t\t\t\t\tapp.getSources();\n\t\t\t\t} else {\n\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\ttoast('Auth internal error', { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t}\n\t\t\t\t\tapp.resetDrawer();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function(error) {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\ttoast('We can\\'t process your identification. Please resubmit your credentials!', { timeout: app.toastDuration, type: \"warning\" });\n\t\t\t\t\tdocument.querySelectorAll(\".mdl-spinner\").forEach(function(e) { e.parentNode.removeChild(e); });\n\t\t\t\t}\n\t\t\t});\n\t\tapp.auth = {};\n\t};\n\n\tapp.refreshAuthenticate = function() {\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tapp.auth.pushSubscription = {\n\t\t\tendpoint: app.getSetting('settings.pushSubscription.endpoint'),\n\t\t\tkeys: {\n\t\t\t\tauth: app.getSetting('settings.pushSubscription.keys.auth'),\n\t\t\t\tp256dh: app.getSetting('settings.pushSubscription.keys.p256dh')\n\t\t\t}\n\t\t};\n\t\tvar refreshPOST = { \"grant_type\": \"refresh_token\", \"refresh_token\": localStorage.getItem('refresh_token'), pushSubscription: app.auth.pushSubscription };\n\t\tvar myInit = { method: 'POST', headers: myHeaders, body: JSON.stringify(refreshPOST) };\n\t\tvar url = `${app.baseUrl}/${app.api_version}/authenticate`;\n\n\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse) {\n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tif (response.token && response.refresh_token && response.refreshTokenExp) {\n\t\t\t\t\tlocalStorage.setItem('bearer', response.token);\n\t\t\t\t\tlocalStorage.setItem('refresh_token', response.refresh_token);\n\t\t\t\t\tlocalStorage.setItem('refreshTokenExp', response.refreshTokenExp);\n\n\t\t\t\t\tapp.isLogged = true;\n\t\t\t\t\tif (typeof firebase !== \"undefined\") {\n\t\t\t\t\t\tfirebase.analytics().setUserProperties({ 'isLoggedIn': 1 });\n\t\t\t\t\t\tfirebase.analytics().logEvent('refreshAuthenticate');\n\t\t\t\t\t}\n\t\t\t\t\tapp.fetchProfile();\n\t\t\t\t\t//app.resetSections();\n\n\t\t\t\t\tapp.setHiddenElement(\"signin_button\");\n\t\t\t\t\tapp.setVisibleElement(\"logout_button\");\n\t\t\t\t} else {\n\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\ttoast('Auth internal error', { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t}\n\t\t\t\t\tapp.resetDrawer();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function(error) {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\ttoast('We can\\'t process your identification. Please resubmit your credentials on login page!', { timeout: app.toastDuration, type: \"warning\" });\n\t\t\t\t}\n\t\t\t});\n\t\tapp.auth = {};\n\t};\n\n\tapp.addMenuItem = function(title, icon, link, position) {\n\t\tvar menuElt = document.createElement(\"a\");\n\t\tmenuElt.setAttribute('href', link);\n\t\tmenuElt.setAttribute('class', 'mdl-navigation__link');\n\t\tvar iconElt = document.createElement(\"i\");\n\t\ticonElt.setAttribute('class', 'material-icons');\n\t\ticonElt.appendChild(document.createTextNode(icon));\n\t\tmenuElt.appendChild(iconElt);\n\t\tmenuElt.appendChild(document.createTextNode(title));\n\t\tmenuElt.addEventListener('click', function(evt) {\n\t\t\tapp.setSection((evt.target.getAttribute('hash') !== null ? evt.target.getAttribute('hash') : evt.target.getAttribute('href')).substr(1));\n\t\t\tapp.hideMenu();\n\t\t}, false);\n\n\t\tif (position && position > -1) {\n\n\t\t} else {\n\t\t\tdocument.querySelector('#drawer nav.mdl-navigation.menu__list').appendChild(menuElt);\n\t\t}\n\t};\n\n\tapp.getSettings = function() {\n\t\tvar settings = \"\";\n\n\t\tsettings += app.getSubtitle('Application settings');\n\t\tsettings += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\tsettings += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\tsettings += \"\t<div class=\\\"card-header heading-left\\\">&nbsp;</div>\";\n\t\tsettings += app.getField('radio_button_checked', 'Floating Action Buttons', app.getSetting('settings.fab_position') !== null ? app.getSetting('settings.fab_position') : 'fab__bottom', { type: 'select', id: 'settings.fab_position', options: [{ name: 'fab__top', value: 'Top position' }, { name: 'fab__bottom', value: 'Bottom position' }], isEdit: true });\n\t\tsettings += app.getField('format_textdirection_l_to_r', 'Action buttons', app.getSetting('settings.isLtr') !== null ? app.getSetting('settings.isLtr') : true, { type: 'select', id: 'settings.isLtr', options: [{ name: 'true', value: 'Aligned to the right' }, { name: 'false', value: 'Aligned to the left' }], isEdit: true });\n\t\tsettings += app.getField('date_range', 'Date Format', app.getSetting('settings.date_format') !== null ? app.getSetting('settings.date_format') : app.date_format, { type: 'input', id: 'settings.date_format', isEdit: true });\n\t\tsettings += app.getField('subject', 'Card Chars Limit', app.getSetting('settings.cardMaxChars') !== null ? app.getSetting('settings.cardMaxChars') : app.cardMaxChars, { type: 'input', id: 'settings.cardMaxChars', isEdit: true, pattern: app.patterns.cardMaxChars, error: 'Must be an Integer.' });\n\t\tsettings += app.getField('room', app.getSetting('settings.geolocalization') != 'false' ? \"Geolocalization is enabled\" : \"Geolocalization is disabled\", app.getSetting('settings.geolocalization') !== null ? app.getSetting('settings.geolocalization') : true, { type: 'switch', id: 'settings.geolocalization', isEdit: true });\n\t\tsettings += app.getField('bug_report', app.getSetting('settings.debug') != 'false' ? \"Debug is enabled\" : \"Debug is disabled\", app.getSetting('settings.debug') !== null ? app.getSetting('settings.debug') : app.debug, { type: 'switch', id: 'settings.debug', options: [{ name: 'true', value: 'True' }, { name: 'false', value: 'False' }], isEdit: true });\n\t\tsettings += app.getField('voice_over_off', 'Do Not Track (DNT) header', navigator.doNotTrack == '1' ? \"Enabled, you are not being tracked. This setting is customized on your browser.\" : \"Disabled, you are tracked :-) and it can be customized on your browser settings.\", { type: 'switch', isEdit: false });\n\t\tsettings += \"\t</div>\";\n\t\tsettings += \"</section>\";\n\n\t\tsettings += app.getSubtitle('API Notifications');\n\t\tsettings += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\tsettings += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\tsettings += \"\t<div class=\\\"card-header heading-left\\\">&nbsp;</div>\";\n\t\tsettings += app.getField('notifications', app.getSetting('settings.notifications') != 'false' ? \"Notifications are enabled\" : \"Notifications are disabled\", app.getSetting('settings.notifications') !== undefined ? app.getSetting('settings.notifications') : true, { type: 'switch', id: 'settings.notifications', isEdit: true });\n\t\tif (app.getSetting('settings.pushSubscription.keys.p256dh') && app.getSetting('settings.notifications') != \"false\" && app.getSetting('settings.debug') != \"false\") {\n\t\t\tsettings += app.getField('cloud', 'Endpoint', app.getSetting('settings.pushSubscription.endpoint'), { type: 'input', id: 'settings.pushSubscription.endpoint', isEdit: true, style: \"text-transform: none !important;\" });\n\t\t\tsettings += app.getField('vpn_key', 'Key', app.getSetting('settings.pushSubscription.keys.p256dh'), { type: 'input', id: 'settings.pushSubscription.keys.p256dh', isEdit: true, style: \"text-transform: none !important;\" });\n\t\t\tsettings += app.getField('vpn_lock', 'Auth', app.getSetting('settings.pushSubscription.keys.auth'), { type: 'input', id: 'settings.pushSubscription.keys.auth', isEdit: true, style: \"text-transform: none !important;\" });\n\t\t}\n\t\tsettings += \"\t</div>\";\n\t\tsettings += \"</section>\";\n\n\t\t(app.containers.settings).querySelector('.page-content').innerHTML = settings;\n\t\tcomponentHandler.upgradeDom();\n\n\t\tif (document.getElementById('settings.fab_position')) {\n\t\t\tdocument.getElementById('settings.fab_position').addEventListener('change', function(e) {\n\t\t\t\tapp.setSetting('settings.fab_position', e.target.value);\n\t\t\t\tvar fabs = document.querySelectorAll('.mdl-button--fab_flinger-container');\n\t\t\t\tif (e.target.value == 'fab__top') {\n\t\t\t\t\tfor (var f in fabs) {\n\t\t\t\t\t\tif ((fabs[f]).childElementCount > -1) {\n\t\t\t\t\t\t\t(fabs[f]).classList.add('fab__top');\n\t\t\t\t\t\t\t(fabs[f]).classList.remove('fab__bottom');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttoast('Floating Button are aligned Top.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t} else {\n\t\t\t\t\tfor (var f in fabs) {\n\t\t\t\t\t\tif ((fabs[f]).childElementCount > -1) {\n\t\t\t\t\t\t\t(fabs[f]).classList.remove('fab__top');\n\t\t\t\t\t\t\t(fabs[f]).classList.add('fab__bottom');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttoast('Floating Button are aligned Bottom.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif (document.getElementById('settings.isLtr')) {\n\t\t\tdocument.getElementById('settings.isLtr').addEventListener('change', function(e) {\n\t\t\t\tapp.setSetting('settings.isLtr', e.target.value);\n\t\t\t\tvar fabs = document.querySelectorAll('.mdl-button--fab_flinger-container');\n\t\t\t\tif (e.target.value == 'true') {\n\t\t\t\t\tapp.setSetting('settings.isLtr', true);\n\t\t\t\t\ttoast('Action buttons are aligned to the right.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t} else {\n\t\t\t\t\tapp.setSetting('settings.isLtr', false);\n\t\t\t\t\ttoast('Action buttons are aligned to the left.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif (document.getElementById('switch-settings.notifications')) {\n\t\t\tdocument.getElementById('switch-settings.notifications').addEventListener('change', function(e) {\n\t\t\t\tvar label = e.target.parentElement.querySelector('div.mdl-switch__label');\n\t\t\t\tif (document.getElementById('switch-settings.notifications').checked === true) {\n\t\t\t\t\tapp.setSetting('settings.notifications', true);\n\t\t\t\t\tapp.askPermission();\n\t\t\t\t\tapp.subscribeUserToPush();\n\t\t\t\t\tlabel.innerText = \"Notifications are enabled\";\n\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\ttoast('Awsome, Notifications are enabled.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlabel.innerText = \"Notifications are disabled\";\n\t\t\t\t\tapp.setSetting('settings.notifications', false);\n\t\t\t\t\ttoast('Notifications are disabled.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif (document.getElementById('switch-settings.geolocalization')) {\n\t\t\tdocument.getElementById('switch-settings.geolocalization').addEventListener('change', function(e) {\n\t\t\t\tvar label = e.target.parentElement.querySelector('div.mdl-switch__label');\n\t\t\t\tif (document.getElementById('switch-settings.geolocalization').checked === true) {\n\t\t\t\t\tapp.setSetting('settings.geolocalization', true);\n\t\t\t\t\tlabel.innerText = \"Geolocalization is enabled\";\n\t\t\t\t\tapp.getLocation();\n\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\ttoast('Awsome, Geolocalization is enabled.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tapp.setSetting('settings.geolocalization', false);\n\t\t\t\t\tlabel.innerText = \"Geolocalization is disabled\";\n\t\t\t\t\ttoast('Geolocalization is disabled.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif (document.getElementById('switch-settings.debug')) {\n\t\t\tdocument.getElementById('switch-settings.debug').addEventListener('change', function(e) {\n\t\t\t\tvar label = e.target.parentElement.querySelector('div.mdl-switch__label');\n\t\t\t\tif (document.getElementById('switch-settings.debug').checked === true) {\n\t\t\t\t\tapp.setSetting('settings.debug', true);\n\t\t\t\t\tlabel.innerText = \"Debug is enabled\";\n\t\t\t\t\tdocument.dispatchEvent(new Event(\"clearCache\"));\n\t\t\t\t\tapp.debug = true;\n\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\ttoast('Awsome, Debug mode is activated and cache is now cleared.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tapp.setSetting('settings.debug', false);\n\t\t\t\t\tlabel.innerText = \"Debug is disabled\";\n\t\t\t\t\tapp.debug = false;\n\t\t\t\t\ttoast('Debug mode is disabled.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif (document.getElementById('settings.date_format')) {\n\t\t\tdocument.getElementById('settings.date_format').addEventListener('keyup', function(e) {\n\t\t\t\tapp.setSetting('settings.date_format', document.getElementById('settings.date_format').value);\n\t\t\t\tapp.date_format = document.getElementById('settings.date_format').value;\n\t\t\t\ttoast('Date Format has been updated on ' + moment().format(app.date_format), { timeout: app.toastDuration, type: \"done\" });\n\t\t\t});\n\t\t}\n\t\tif (document.getElementById('settings.cardMaxChars')) {\n\t\t\tdocument.getElementById('settings.cardMaxChars').addEventListener('keyup', function(e) {\n\t\t\t\tif ((document.getElementById('settings.cardMaxChars').value).match(app.patterns.cardMaxChars)) {\n\t\t\t\t\tapp.setSetting('settings.cardMaxChars', document.getElementById('settings.cardMaxChars').value);\n\t\t\t\t\tapp.cardMaxChars = document.getElementById('settings.cardMaxChars').value;\n\t\t\t\t\ttoast('Card Limit is set to ' + app.cardMaxChars + '.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t} else {\n\t\t\t\t\ttoast('Card Limit remain ' + app.cardMaxChars + '.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tapp.getStatus = function() {\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\tvar url = `${app.baseUrl}/${app.api_version}/status`;\n\n\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse) {\n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tif (!navigator.onLine) {\n\t\t\t\t\t(app.containers.status).querySelector('.page-content').innerHTML = app.getCard(app.offlineCard);\n\t\t\t\t} else {\n\t\t\t\t\tvar status = \"\";\n\t\t\t\t\tstatus += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\t\tstatus += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tstatus += \"\t\t<div class=\\\"mdl-list__item\\\">\";\n\t\t\t\t\tstatus += \"\t\t\t<span class='mdl-list__item-primary-content'>\";\n\t\t\t\t\tstatus += \"\t\t\t\t<i class=\\\"material-icons\\\">\" + app.icons.status + \"</i>\";\n\t\t\t\t\tstatus += \"\t\t\t\t<h3 class=\\\"mdl-card__title-text\\\">\" + app.sectionsPageTitles.status + \"</h3>\";\n\t\t\t\t\tstatus += \"\t\t\t</span>\";\n\t\t\t\t\tstatus += \"\t\t\t<span class='mdl-list__item-secondary-action'>\";\n\t\t\t\t\tstatus += \"\t\t\t\t<button role='button' class='mdl-button mdl-js-button mdl-button--icon right showdescription_button' for='status-details'>\";\n\t\t\t\t\tstatus += \"\t\t\t\t\t<i class='material-icons'>expand_more</i>\";\n\t\t\t\t\tstatus += \"\t\t\t\t</button>\";\n\t\t\t\t\tstatus += \"\t\t\t</span>\";\n\t\t\t\t\tstatus += \"\t\t</div>\";\n\t\t\t\t\tstatus += \"\t\t<div class=\\\"card-body\\\">\";\n\t\t\t\t\tstatus += \"\t\t\t<div class='mdl-list__item--three-line small-padding  mdl-card--expand' id='status-details'>\";\n\t\t\t\t\tstatus += app.getField('thumb_up', 'Application Name', response.appName, { type: 'text', style: 'text-transform: none !important;', isEdit: false });\n\t\t\t\t\tstatus += app.getField('favorite', 'Status', response.status, { type: 'text', isEdit: false });\n\t\t\t\t\tstatus += app.getField('volume_down', 'Mqtt Topic Info', response.mqttInfo, { type: 'text', style: 'text-transform: none !important;', isEdit: false });\n\t\t\t\t\tstatus += app.getField('verified_user', 'Api Version', response.version, { type: 'text', style: 'text-transform: none !important;', isEdit: false });\n\t\t\t\t\tstatus += app.getField('verified_user', 'Build Version', response.t6BuildVersion, { type: 'text', style: 'text-transform: none !important;', isEdit: false });\n\t\t\t\t\tstatus += app.getField('alarm', 'Build Date', moment(response.t6BuildDate, \"DD/MM/YYYY HH:mm:ss\").format(app.date_format), { type: 'text', style: 'text-transform: none !important;', isEdit: false });\n\t\t\t\t\tstatus += app.getField('alarm', 'Server Last Update', moment(response.started_at, \"DD/MM/YYYY HH:mm:ss\").format(app.date_format), { type: 'text', isEdit: false });\n\t\t\t\t\tstatus += app.getField('trip_origin', 'appId', firebaseConfig.appId, { type: 'text', isEdit: false });\n\t\t\t\t\tstatus += \"\t\t\t</div>\";\n\t\t\t\t\tstatus += \"\t\t</div>\";\n\t\t\t\t\tstatus += \"\t</div>\";\n\t\t\t\t\tstatus += \"</section>\";\n\n\t\t\t\t\tif (app.RateLimit.Limit && app.RateLimit.Remaining) {\n\t\t\t\t\t\tstatus += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\t\t\tstatus += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\t\tstatus += \"\t\t<div class=\\\"mdl-list__item\\\">\";\n\t\t\t\t\t\tstatus += \"\t\t\t<span class='mdl-list__item-primary-content'>\";\n\t\t\t\t\t\tstatus += \"\t\t\t\t<i class=\\\"material-icons\\\">crop_free</i>\";\n\t\t\t\t\t\tstatus += \"\t\t\t\t<h3 class=\\\"mdl-card__title-text\\\">API Usage</h3>\";\n\t\t\t\t\t\tstatus += \"\t\t\t</span>\";\n\t\t\t\t\t\tstatus += \"\t\t\t<span class='mdl-list__item-secondary-action'>\";\n\t\t\t\t\t\tstatus += \"\t\t\t\t<button role='button' class='mdl-button mdl-js-button mdl-button--icon right showdescription_button' for='status-usage'>\";\n\t\t\t\t\t\tstatus += \"\t\t\t\t\t<i class='material-icons'>expand_more</i>\";\n\t\t\t\t\t\tstatus += \"\t\t\t\t</button>\";\n\t\t\t\t\t\tstatus += \"\t\t\t</span>\";\n\t\t\t\t\t\tstatus += \"\t\t</div>\";\n\t\t\t\t\t\tstatus += \"\t\t<div class='mdl-cell--12-col' id='status-usage'>\";\n\t\t\t\t\t\tif (app.RateLimit.Used && app.RateLimit.Limit) {\n\t\t\t\t\t\t\tstatus += app.getField('center_focus_weak', 'Used', app.RateLimit.Used + '/' + app.RateLimit.Limit, { type: 'progress-status', isEdit: false });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstatus += \"\t\t</div>\";\n\t\t\t\t\t\tstatus += \"\t</div>\";\n\t\t\t\t\t\tstatus += \"</section>\";\n\t\t\t\t\t}\n\n\t\t\t\t\t(app.containers.status).querySelector('.page-content').innerHTML = status;\n\t\t\t\t\tif (app.RateLimit.Used && app.RateLimit.Limit) {\n\t\t\t\t\t\tvar rate = Math.ceil((app.RateLimit.Used * 100 / app.RateLimit.Limit) / 10) * 10;\n\t\t\t\t\t\tdocument.querySelector('#progress-status').addEventListener('mdl-componentupgraded', function() {\n\t\t\t\t\t\t\tthis.MaterialProgress.setProgress(rate);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tapp.setExpandAction();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function(error) {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\ttoast('Can\\'t display Status...' + error, { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t}\n\t\t\t});\n\t\tapp.containers.spinner.setAttribute('hidden', true);\n\t};\n\n\tapp.getTerms = function() {\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\tvar url = `${app.baseUrl}/${app.api_version}/terms`;\n\n\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse) {\n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tvar terms = \"\";\n\t\t\t\tfor (var i = 0; i < (response).length; i++) {\n\t\t\t\t\tterms += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\t\tterms += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tif (response[i].title) {\n\t\t\t\t\t\tterms += \"\t<div class=\\\"mdl-card__title\\\">\";\n\t\t\t\t\t\tterms += \"\t\t<i class=\\\"material-icons\\\">business_center</i></span>\";\n\t\t\t\t\t\tterms += \"\t\t<h3 class=\\\"mdl-card__title-text\\\">\" + response[i].title + \"</h3>\";\n\t\t\t\t\t\tterms += \"\t</div>\";\n\t\t\t\t\t}\n\t\t\t\t\tterms += \"\t\t<div class=\\\"mdl-card__supporting-text no-padding\\\">\";\n\t\t\t\t\tterms += response[i].description;\n\t\t\t\t\tterms += \"\t\t</div>\";\n\t\t\t\t\tterms += \"\t</div>\";\n\t\t\t\t\tterms += \"</section>\";\n\t\t\t\t}\n\n\t\t\t\t(app.containers.terms).querySelector('.page-content').innerHTML = terms;\n\t\t\t})\n\t\t\t.catch(function(error) {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\ttoast('Can\\'t display Terms...' + error, { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t}\n\t\t\t});\n\t\tapp.containers.spinner.setAttribute('hidden', true);\n\t};\n\n\tapp.getCompatibleDevices = function() {\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"GET\", headers: myHeaders };\n\t\tvar url = `${app.baseUrl}/${app.api_version}/compatible-devices`;\n\n\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse) {\n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tvar compatibledevices = \"\";\n\t\t\t\tfor (var i = 0; i < (response).length; i++) {\n\t\t\t\t\tcompatibledevices += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\t\tcompatibledevices += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tif (response[i].title) {\n\t\t\t\t\t\tcompatibledevices += \"\t<div class=\\\"mdl-card__title\\\">\";\n\t\t\t\t\t\tcompatibledevices += \"\t\t<i class=\\\"material-icons\\\">devices_other</i>\";\n\t\t\t\t\t\tcompatibledevices += \"\t\t<h3 class=\\\"mdl-card__title-text\\\">\" + response[i].title + \"</h3>\";\n\t\t\t\t\t\tcompatibledevices += \"\t</div>\";\n\t\t\t\t\t}\n\t\t\t\t\tcompatibledevices += \"\t\t<div class=\\\"mdl-card__supporting-text no-padding\\\">\";\n\t\t\t\t\tcompatibledevices += \"\t\t\t<img src=\\\"/img/m/placeholder.png\\\" class=\\\"lazyloading img-responsive\\\" data-src=\\\"\" + app.baseUrlCdn + response[i].image + \"\\\" align=\\\"left\\\" style=\\\"margin-right: 5px;\\\" width=\\\"100\\\" alt=\\\"\" + app.baseUrlCdn + response[i].title + \"\\\" />\"\n\t\t\t\t\tcompatibledevices += response[i].description;\n\t\t\t\t\tcompatibledevices += \"\t\t</div>\";\n\t\t\t\t\tcompatibledevices += \"\t</div>\";\n\t\t\t\t\tcompatibledevices += \"</section>\";\n\t\t\t\t}\n\t\t\t\t(app.containers.compatibleDevices).querySelector('.page-content').innerHTML = compatibledevices;\n\t\t\t\tapp.imageLazyLoading();\n\t\t\t})\n\t\t\t.catch(function(error) {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\ttoast('Can\\'t display compatible devices...' + error, { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t}\n\t\t\t});\n\t\tapp.containers.spinner.setAttribute('hidden', true);\n\t};\n\n\tapp.getOpenSourceLicenses = function() {\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: 'GET', headers: myHeaders };\n\t\tvar url = `${app.baseUrl}/${app.api_version}/open-source-licenses`;\n\n\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse) {\n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tvar openSourceLicenses = \"\";\n\t\t\t\tfor (var i = 0; i < (response).length; i++) {\n\t\t\t\t\topenSourceLicenses += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\t\topenSourceLicenses += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tif (response[i].title) {\n\t\t\t\t\t\topenSourceLicenses += \"\t<div class=\\\"mdl-card__title\\\">\";\n\t\t\t\t\t\topenSourceLicenses += \"\t\t<i class=\\\"material-icons\\\">book</i>\";\n\t\t\t\t\t\topenSourceLicenses += \"\t\t<h3 class=\\\"mdl-card__title-text\\\">\" + response[i].title + \"</h3>\";\n\t\t\t\t\t\topenSourceLicenses += \"\t\t<p>\" + response[i].license + \"</p>\";\n\t\t\t\t\t\topenSourceLicenses += \"\t</div>\";\n\t\t\t\t\t}\n\t\t\t\t\topenSourceLicenses += \"\t\t<div class=\\\"mdl-card__supporting-text no-padding\\\">\";\n\t\t\t\t\topenSourceLicenses += response[i].description;\n\t\t\t\t\topenSourceLicenses += \"\t\t</div>\";\n\t\t\t\t\tif (response[i].dependencies) {\n\t\t\t\t\t\topenSourceLicenses += \"\t\t<pre>\";\n\t\t\t\t\t\topenSourceLicenses += response[i].dependencies;\n\t\t\t\t\t\topenSourceLicenses += \"\t\t</pre>\";\n\t\t\t\t\t}\n\t\t\t\t\topenSourceLicenses += \"\t\t<div class=\\\"mdl-card__actions mdl-card--border\\\">\";\n\t\t\t\t\topenSourceLicenses += \"\t\t\t<button class=\\\"mdl-button mdl-js-button mdl-js-ripple-effect\\\" onclick=\\\"document.location.href=\\'\" + response[i].linkFullReport + \"\\';\\\"> Get dependencies full report</button>\";\n\t\t\t\t\topenSourceLicenses += \"\t\t</div>\";\n\t\t\t\t\topenSourceLicenses += \"\t</div>\";\n\t\t\t\t\topenSourceLicenses += \"</section>\";\n\t\t\t\t}\n\t\t\t\t(app.containers.openSourceLicenses).querySelector('.page-content').innerHTML = openSourceLicenses;\n\t\t\t\tapp.imageLazyLoading();\n\t\t\t})\n\t\t\t.catch(function(error) {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\ttoast('Can\\'t display Open-Source Licenses...' + error, { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t}\n\t\t\t});\n\t\tapp.containers.spinner.setAttribute('hidden', true);\n\t};\n\n\tapp.getExploration = function() {\n\t\tif (app.isLogged) {\n\t\t\tlet explorationNode = \"\";\n\t\t\texplorationNode += app.getSubtitle('Data Flows to explore');\n\t\t\texplorationNode += \"<section class='mdl-grid mdl-cell--12-col' data-id=''>\";\n\t\t\texplorationNode += \"\t<div class='mdl-cell--12-col mdl-card mdl-shadow--2dp'>\";\n\t\t\texplorationNode += \"\t\t<div>&nbsp;</div>\";\n\n\t\t\tif (localStorage.getItem(\"flows\") != \"null\") {\n\t\t\t\tvar flows = JSON.parse(localStorage.getItem(\"flows\")).map(function(flow) {\n\t\t\t\t\treturn { value: flow.name, name: flow.id };\n\t\t\t\t});\n\t\t\t\texplorationNode += app.getField(app.icons.flows, \"Flows to explore\", \"\", { type: \"select\", id: \"flowsChipsSelect\", isEdit: true, options: flows });\n\t\t\t} else {\n\t\t\t\tapp.getFlows();\n\t\t\t\texplorationNode += app.getField(app.icons.flows, \"Flows to explore\", \"\", { type: \"select\", id: \"flowsChipsSelect\", isEdit: true, options: {} });\n\t\t\t}\n\t\t\texplorationNode += \"\t\t<div class='mdl-list__item--three-line small-padding  mdl-card--expand mdl-chips chips-initial input-field' id='flowsChips'>\";\n\t\t\texplorationNode += \"\t\t\t<span class='mdl-chips__arrow-down__container mdl-selectfield__arrow-down__container'><span class='mdl-chips__arrow-down'></span></span>\";\n\t\t\texplorationNode += \"\t\t</div>\";\n\t\t\texplorationNode += \"\t\t<div>&nbsp;</div>\";\n\t\t\texplorationNode += \"\t</div>\";\n\t\t\texplorationNode += \"</section>\";\n\n\t\t\texplorationNode += app.getSubtitle('Filters');\n\t\t\texplorationNode += \"<section class='mdl-grid mdl-cell--12-col'>\";\n\t\t\texplorationNode += \"\t<div class='mdl-cell--12-col mdl-card mdl-shadow--2dp'>\";\n\t\t\texplorationNode += \"\t\t<div>&nbsp;</div>\";\n\t\t\texplorationNode += app.getField(app.icons.date, \"From date\", moment().subtract(7, \"days\").format(\"YYYY-MM-DD HH:mm:ss\"), { type: \"text\", id: \"start\", pattern: app.patterns.date, isEdit: true });\n\t\t\texplorationNode += app.getField(app.icons.date, \"To date\", moment().format(\"YYYY-MM-DD HH:mm:ss\"), { type: \"text\", id: \"end\", pattern: app.patterns.date, isEdit: true });\n\t\t\texplorationNode += \"\t\t<div>&nbsp;</div>\";\n\t\t\texplorationNode += \"\t</div>\";\n\t\t\texplorationNode += \"</section>\";\n\n\t\t\texplorationNode += app.getSubtitle('Exploration');\n\t\t\texplorationNode += \"<section class='mdl-grid mdl-cell--9-col'>\";\n\t\t\texplorationNode += \"\t<div class='mdl-cell--12-col mdl-card mdl-shadow--2dp'>\";\n\t\t\texplorationNode += \"\t\t<div>&nbsp;</div>\";\n\t\t\texplorationNode += \"\t\t<div class='mdl-list__item--three-line small-padding' id='exploreResults'></div>\";\n\t\t\texplorationNode += \"\t\t<div>&nbsp;</div>\";\n\t\t\texplorationNode += \"\t</div>\";\n\t\t\texplorationNode += \"</section>\";\n\n\t\t\texplorationNode += \"<section class='mdl-grid mdl-cell--3-col'>\";\n\t\t\texplorationNode += \"\t<div class='mdl-cell--12-col mdl-card mdl-shadow--2dp'>\";\n\t\t\texplorationNode += \"\t\t<div>&nbsp;</div>\";\n\t\t\texplorationNode += \"\t\t<div class='mdl-list__item--three-line small-padding' id='explorationBoxPlot'></div>\";\n\t\t\texplorationNode += \"\t\t<div>&nbsp;</div>\";\n\t\t\texplorationNode += \"\t</div>\";\n\t\t\texplorationNode += \"</section>\";\n\n\t\t\texplorationNode += \"<section class='mdl-grid mdl-cell--12-col'>\";\n\t\t\texplorationNode += \"\t<div class='mdl-cell--12-col mdl-card mdl-shadow--2dp'>\";\n\t\t\texplorationNode += \"\t\t<div>&nbsp;</div>\";\n\t\t\texplorationNode += \"\t\t<div class='mdl-list__item--three-line small-padding' id='explorationFrequencyDistribution'></div>\";\n\t\t\texplorationNode += \"\t\t<div>&nbsp;</div>\";\n\t\t\texplorationNode += \"\t</div>\";\n\t\t\texplorationNode += \"</section>\";\n\n\t\t\t(app.containers.exploration).querySelector('.page-content').innerHTML = explorationNode;\n\t\t\tapp.showAddFAB(\"exploration\");\n\t\t\tcomponentHandler.upgradeDom();\n\t\t\tdocument.getElementById(\"flowsChipsSelect\").parentNode.querySelector(\"div.mdl-selectfield__list-option-box ul\").addEventListener(\"click\", function(evt) {\n\t\t\t\tvar id = evt.target.getAttribute(\"data-value\");\n\t\t\t\tvar name = evt.target.innerText;\n\t\t\t\tapp.removeChipFrom(\"flowsChips\");\n\t\t\t\tapp.addChipTo(\"flowsChips\", { name: name, id: id, type: \"flows\" });\n\t\t\t\tevt.preventDefault();\n\t\t\t}, false);\n\t\t}\n\t\tapp.containers.spinner.setAttribute('hidden', true);\n\t};\n\n\tapp.toggleElement = function(id) {\n\t\tdocument.querySelector('#' + id).classList.toggle('hidden');\n\t};\n\n\tapp.setHiddenElement = function(id) {\n\t\tdocument.querySelector('#' + id).classList.add('hidden');\n\t};\n\n\tapp.setVisibleElement = function(id) {\n\t\tdocument.querySelector('#' + id).classList.remove('hidden');\n\t};\n\n\tapp.showNotification = function() {\n\t\ttoast('You are offline.', { timeout: app.toastDuration, type: \"warning\" });\n\t};\n\n\tapp.sessionExpired = function() {\n\t\tlocalStorage.setItem('bearer', null);\n\t\tlocalStorage.setItem('refresh_token', null);\n\t\tlocalStorage.setItem('refreshTokenExp', null);\n\t\tlocalStorage.setItem('flows', null);\n\t\tlocalStorage.setItem('snippets', null);\n\t\tlocalStorage.setItem('sources', null);\n\t\tlocalStorage.setItem('currentUserId', null);\n\t\tlocalStorage.setItem('currentUserName', null);\n\t\tlocalStorage.setItem('currentUserEmail', null);\n\t\tlocalStorage.setItem('currentUserHeader', null);\n\t\tlocalStorage.setItem('notifications.unsubscribed', null);\n\t\tlocalStorage.setItem('notifications.unsubscription_token', null);\n\t\tlocalStorage.setItem('notifications.email', null);\n\t\tlocalStorage.setItem('role', null);\n\n\t\tapp.auth = {};\n\t\tapp.RateLimit = { Limit: null, Remaining: null, Used: null };\n\t\tapp.itemsSize = { objects: 15, flows: 15, snippets: 15, dashboards: 15, mqtts: 15, rules: 15, sources: 15 };\n\t\tapp.itemsPage = { objects: 1, flows: 1, snippets: 1, dashboards: 1, mqtts: 1, rules: 1, sources: 1 };\n\t\tif (!app.isLogged) toast('Your session has expired. You must sign-in again.', { timeout: app.toastDuration, type: \"error\" });\n\t\tapp.isLogged = false;\n\t\tapp.resetDrawer();\n\n\t\tapp.setVisibleElement(\"signin_button\");\n\t\tapp.setHiddenElement(\"logout_button\");\n\t\tapp.setDrawer();\n\n\t\tapp.refreshButtonsSelectors();\n\t\tcomponentHandler.upgradeDom();\n\n\t\tif (app.containers.profile) {\n\t\t\t(app.containers.profile).querySelector('.page-content').innerHTML = \"\";\n\t\t}\n\t\tif (app.containers.objects) {\n\t\t\t(app.containers.objects).querySelector('.page-content').innerHTML = app.getCard({ title: 'Connected Objects', titlecolor: '#ffffff', description: 'Connecting anything physical or virtual to t6 Api without any hassle. Embedded, Automatization, Domotic, Sensors, any Objects or Devices can be connected and communicate to t6 via RESTful API. Unic and dedicated application to rules them all and designed to simplify your journey.' });\n\t\t\tapp.displayLoginForm((app.containers.objects).querySelector('.page-content'));\n\t\t}\n\t\tif (app.containers.flows) {\n\t\t\t(app.containers.flows).querySelector('.page-content').innerHTML = app.getCard({ title: 'Time-series Datapoints', titlecolor: '#ffffff', description: 'Communication becomes easy in the platform with Timestamped values. Flows allows to retrieve and classify data.', action: { id: 'login', label: 'Sign-In' }, secondaryaction: { id: 'signup', label: 'Create an account' } });\n\t\t\tapp.displayLoginForm((app.containers.flows).querySelector('.page-content'));\n\t\t}\n\t\tif (app.containers.dashboards) {\n\t\t\t(app.containers.dashboards).querySelector('.page-content').innerHTML = app.getCard({ title: 'Dashboards', titlecolor: '#ffffff', description: 't6 support multiple Snippets to create your own IoT Dashboards for data visualization. Snippets are ready to Use Html components integrated into the application. Dashboards allows to empower your data-management by Monitoring and Reporting activities.', action: { id: 'login', label: 'Sign-In' }, secondaryaction: { id: 'signup', label: 'Create an account' } });\n\t\t\tapp.displayLoginForm((app.containers.dashboards).querySelector('.page-content'));\n\t\t}\n\t\tif (app.containers.snippets) {\n\t\t\t(app.containers.snippets).querySelector('.page-content').innerHTML = app.getCard({ title: 'Snippets', titlecolor: '#ffffff', description: 'Snippets are components to embed into your dashboards and displays your data', action: { id: 'login', label: 'Sign-In' }, secondaryaction: { id: 'signup', label: 'Create an account' } });\n\t\t\tapp.displayLoginForm((app.containers.snippets).querySelector('.page-content'));\n\t\t}\n\t\tif (app.containers.rules) {\n\t\t\t(app.containers.rules).querySelector('.page-content').innerHTML = app.getCard({ title: 'Decision Rules to get smart', titlecolor: '#ffffff', description: 'Trigger action from Mqtt and decision-tree. Let\\'s your Objects talk to the platform as events.', action: { id: 'login', label: 'Sign-In' }, secondaryaction: { id: 'signup', label: 'Create an account' } });\n\t\t\tapp.displayLoginForm((app.containers.rules).querySelector('.page-content'));\n\t\t}\n\t\tif (app.containers.mqtts) {\n\t\t\t(app.containers.mqtts).querySelector('.page-content').innerHTML = app.getCard({ title: 'Sense events', titlecolor: '#ffffff', description: 'Whether it\\'s your own sensors or external Flows from Internet, sensors collect values and communicate them to t6.', action: { id: 'login', label: 'Sign-In' }, secondaryaction: { id: 'signup', label: 'Create an account' } });\n\t\t\tapp.displayLoginForm((app.containers.mqtts).querySelector('.page-content'));\n\t\t}\n\t\tif (app.containers.sources) {\n\t\t\t(app.containers.sources).querySelector('.page-content').innerHTML = app.getCard({ title: 'Code Source', titlecolor: '#ffffff', description: 'Deploy Arduino source Over The Air.', action: { id: 'login', label: 'Sign-In' }, secondaryaction: { id: 'signup', label: 'Create an account' } });\n\t\t\tapp.displayLoginForm((app.containers.sources).querySelector('.page-content'));\n\t\t}\n\n\t\tvar updated = document.querySelectorAll('.page-content form div.mdl-js-textfield');\n\t\tfor (var i = 0; i < updated.length; i++) {\n\t\t\tupdated[i].classList.remove('is-upgraded');\n\t\t\tupdated[i].removeAttribute('data-upgraded');\n\t\t}\n\n\t\tcomponentHandler.upgradeDom();\n\t\tapp.refreshButtonsSelectors();\n\t\tapp.setLoginAction();\n\t\tapp.setSignupAction();\n\t};\n\n\tapp.resetSections = function() {\n\t\t/* reset views to default */\n\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") { console.log('DEBUG', 'resetSections()'); }\n\t\tif (app.containers.objects) { (app.containers.objects).querySelector('.page-content').innerHTML = ''; }\n\t\tif (app.containers.object) { (app.containers.object).querySelector('.page-content').innerHTML = ''; }\n\t\tif (app.containers.flows) { (app.containers.flows).querySelector('.page-content').innerHTML = ''; }\n\t\tif (app.containers.flow) { (app.containers.flow).querySelector('.page-content').innerHTML = ''; }\n\t\tif (app.containers.dashboards) { (app.containers.dashboards).querySelector('.page-content').innerHTML = ''; }\n\t\tif (app.containers.dashboard) { (app.containers.dashboard).querySelector('.page-content').innerHTML = ''; }\n\t\tif (app.containers.snippets) { (app.containers.snippets).querySelector('.page-content').innerHTML = ''; }\n\t\tif (app.containers.snippet) { (app.containers.snippet).querySelector('.page-content').innerHTML = ''; }\n\t\tif (app.containers.profile) { (app.containers.profile).querySelector('.page-content').innerHTML = ''; }\n\t\tif (app.containers.rules) { (app.containers.rules).querySelector('.page-content').innerHTML = ''; }\n\t\tif (app.containers.rule) { (app.containers.rule).querySelector('.page-content').innerHTML = ''; }\n\t\tif (app.containers.mqtts) { (app.containers.mqtts).querySelector('.page-content').innerHTML = ''; }\n\t\tif (app.containers.mqtt) { (app.containers.mqtt).querySelector('.page-content').innerHTML = ''; }\n\t\tif (app.containers.sources) { (app.containers.sources).querySelector('.page-content').innerHTML = ''; }\n\t\tif (app.containers.source) { (app.containers.source).querySelector('.page-content').innerHTML = ''; }\n\t};\n\n\tapp.showOrientation = function() {\n\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\ttoast(screen.orientation.type + \" - \" + screen.orientation.angle + \"°.\", { timeout: app.toastDuration, type: \"info\" });\n\t\t}\n\t};\n\n\tapp.setPosition = function(position) {\n\t\tapp.defaultResources.object.attributes.longitude = position.coords.longitude;\n\t\tapp.defaultResources.object.attributes.latitude = position.coords.latitude;\n\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\ttoast(\"Geolocation (Accuracy=\" + position.coords.accuracy + \") is set to: L\" + position.coords.longitude + \" - l\" + position.coords.latitude, { timeout: app.toastDuration, type: \"info\" });\n\t\t}\n\t};\n\n\tapp.setPositionError = function(error) {\n\t\tswitch (error.code) {\n\t\t\tcase error.TIMEOUT:\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\ttoast(\"Browser geolocation error !\\n\\nTimeout.\", { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase error.POSITION_UNAVAILABLE:\n\t\t\t\t// dirty hack for safari\n\t\t\t\tif (error.message.indexOf(\"Origin does not have permission to use Geolocation service\") == 0) {\n\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\ttoast(\"Origin does not have permission to use Geolocation service - no fallback.\", { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\ttoast(\"Browser geolocation error !\\n\\nPosition unavailable.\", { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase error.PERMISSION_DENIED:\n\t\t\t\tif (error.message.indexOf(\"Only secure origins are allowed\") == 0) {\n\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\ttoast(\"Only secure origins are allowed - no fallback.\", { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase error.UNKNOWN_ERROR:\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\ttoast(\"Can't find your position - no fallback.\", { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tapp.getLocation = function() {\n\t\tif (navigator.geolocation) {\n\t\t\tvar options = { enableHighAccuracy: false, timeout: 200000, maximumAge: 500000 };\n\t\t\tnavigator.geolocation.getCurrentPosition(app.setPosition, app.setPositionError, options);\n\t\t} else {\n\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\ttoast(\"Geolocation is not supported by this browser.\", { timeout: app.toastDuration, type: \"warning\" });\n\t\t\t}\n\t\t}\n\t};\n\n\tapp.getCookie = function(cname) {\n\t\tvar name = cname + \"=\";\n\t\tvar ca = document.cookie.split(';');\n\t\tfor (var i = 0; i < ca.length; i++) {\n\t\t\tvar c = ca[i];\n\t\t\twhile (c.charAt(0) == ' ') {\n\t\t\t\tc = c.substring(1);\n\t\t\t}\n\t\t\tif (c.indexOf(name) == 0) {\n\t\t\t\treturn c.substring(name.length, c.length);\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t};\n\n\tapp.showMenu = function() {\n\t\tapp.containers.menuElement.style.transform = \"translateX(0) !important\";\n\t\tapp.containers.menuElement.classList.add('menu--show');\n\t\tapp.containers.menuOverlayElement.classList.add('menu__overlay--show');\n\t\tapp.containers.drawerObfuscatorElement.remove();\n\t};\n\n\tapp.hideMenu = function() {\n\t\tapp.containers.menuElement.style.transform = \"translateX(-120%) !important\";\n\t\tapp.containers.menuElement.classList.remove('menu--show');\n\t\tapp.containers.menuOverlayElement.classList.add('menu__overlay--hide');\n\t\tapp.containers.menuOverlayElement.classList.remove('menu__overlay--show');\n\t\tapp.containers.menuElement.addEventListener('transitionend', app.onTransitionEnd, false);\n\t\tapp.containers.menuElement.classList.remove('is-visible');\n\t};\n\n\tapp.onTransitionEnd = function() {\n\t\tif (touchStartPoint < 10) {\n\t\t\tapp.containers.menuElement.style.transform = \"translateX(0)\";\n\t\t\tapp.containers.menuOverlayElement.classList.add('menu__overlay--show');\n\t\t\tapp.containers.menuElement.removeEventListener('transitionend', app.onTransitionEnd, false);\n\t\t}\n\t};\n\n\tapp.updateNetworkStatus = function() {\n\t\tlet msg = \"\";\n\t\tlet type = \"\";\n\t\tif (navigator.onLine) {\n\t\t\tmsg = \"You are now online...\";\n\t\t\ttype = \"done\";\n\t\t\tapp.setHiddenElement(\"notification\");\n\t\t\tnavigator.serviceWorker.controller.postMessage(\"setOnline\");\n\t\t}\n\t\telse {\n\t\t\tmsg = \"You are now offline...\";\n\t\t\ttype = \"warning\";\n\t\t\tapp.setVisibleElement(\"notification\");\n\t\t\tnavigator.serviceWorker.controller.postMessage(\"setOffline\");\n\t\t}\n\t\ttoast(msg, { timeout: app.toastDuration, type: type });\n\t};\n\n\tapp.clearCache = function() {\n\t\ttoast(\"Please clear cache manually... :-)\", { timeout: app.toastDuration, type: \"warning\" });\n\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\tconsole.log(\"[clearCache]\", \"Please clear cache manually... :-)\");\n\t\t}\n\t};\n\n\tapp.imageLazyLoading = function() {\n\t\tif (!('IntersectionObserver' in window)) {\n\t\t\tvar LL = document.querySelectorAll('img.lazyloading');\n\t\t\tfor (var image in LL) {\n\t\t\t\tif ((LL[image]).childElementCount > -1) {\n\t\t\t\t\tapp.preloadImage(LL[image]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tvar io = new IntersectionObserver(\n\t\t\t\tentries => {\n\t\t\t\t\tentries.map(function(IOentry) {\n\t\t\t\t\t\tif (IOentry.intersectionRatio > 0 && navigator.onLine) {\n\t\t\t\t\t\t\tio.unobserve(IOentry.target);\n\t\t\t\t\t\t\tapp.preloadImage(IOentry.target);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, {}\n\t\t\t);\n\t\t\tvar LL = document.querySelectorAll('img.lazyloading');\n\t\t\tfor (var image in LL) {\n\t\t\t\tif ((LL[image]).childElementCount > -1) {\n\t\t\t\t\t(LL[image]).src = app.baseUrlCdn + '/img/m/placeholder.png';\n\t\t\t\t\tio.observe(LL[image]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tapp.managePage = function() {\n\t\tvar currentPage = localStorage.getItem(\"currentPage\");\n\t\tif (window.location.hash) {\n\t\t\tcurrentPage = window.location.hash.substr(1);\n\t\t\tif (currentPage === 'terms') {\n\t\t\t\tapp.onTermsButtonClick();\n\t\t\t} else if (currentPage === 'compatible-devices') {\n\t\t\t\tapp.getCompatibleDevices();\n\t\t\t\tapp.setSection('compatible-devices');\n\t\t\t} else if (currentPage === 'openSourceLicenses') {\n\t\t\t\tapp.getOpenSourceLicenses();\n\t\t\t\tapp.setSection('openSourceLicenses');\n\t\t\t} else if (currentPage === 'docs') {\n\t\t\t\tapp.onDocsButtonClick();\n\t\t\t} else if (currentPage === 'status') {\n\t\t\t\tapp.onStatusButtonClick();\n\t\t\t} else if (currentPage === 'settings') {\n\t\t\t\tapp.onSettingsButtonClick();\n\t\t\t} else if (currentPage === 'exploration') {\n\t\t\t\tapp.setSection('exploration');\n\t\t\t\tapp.getExploration();\n\t\t\t} else if (currentPage === 'login') {\n\t\t\t\tapp.isLogged = false;\n\t\t\t\tlocalStorage.setItem(\"bearer\", null);\n\t\t\t\tapp.setSection(currentPage);\n\t\t\t} else {\n\t\t\t\t//let section = currentPage.split(\"?\")[0];\n\t\t\t\tapp.setSection(currentPage);\n\t\t\t}\n\t\t} else if (currentPage) {\n\t\t\tif ((currentPage === 'object' || currentPage === 'objects')) {\n\t\t\t\tapp.setSection('objects');\n\t\t\t} else if ((currentPage === 'flow' || currentPage === 'flows')) {\n\t\t\t\tapp.setSection('flows');\n\t\t\t} else if ((currentPage === 'dashboard' || currentPage === 'dashboards')) {\n\t\t\t\tapp.setSection('dashboards');\n\t\t\t} else if ((currentPage === 'snippet' || currentPage === 'snippets')) {\n\t\t\t\tapp.setSection('snippets');\n\t\t\t} else if ((currentPage === 'rule' || currentPage === 'rules')) {\n\t\t\t\tapp.setSection('rules');\n\t\t\t} else if ((currentPage === 'mqtt' || currentPage === 'mqtts')) {\n\t\t\t\tapp.setSection('mqtts');\n\t\t\t} else if ((currentPage === 'source' || currentPage === 'sources')) {\n\t\t\t\tapp.setSection('sources');\n\t\t\t} else {\n\t\t\t\tapp.setSection(currentPage);\n\t\t\t}\n\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\ttoast(\"Back to last page view if available in browser storage\", { timeout: app.toastDuration, type: \"info\" });\n\t\t\t}\n\t\t} else {\n\t\t\tapp.setSection('index');\n\t\t}\n\t};\n\t\n\tapp.setInteractiveLinks = function() {\n\t\tapp.refreshContainers();\n\t\tapp.refreshButtonsSelectors();\n\t\tlogout_button.addEventListener('click', function(evt) {\n\t\t\tapp.auth = {};\n\t\t\tapp.resetDrawer();\n\t\t\tapp.sessionExpired();\n\t\t\ttoast('You have been disconnected :-(', { timeout: app.toastDuration, type: \"done\" });\n\t\t\tapp.setSection((evt.currentTarget.querySelector('a').getAttribute('hash') !== null ? evt.currentTarget.querySelector('a').getAttribute('hash') : evt.currentTarget.querySelector('a').getAttribute('href')).substr(1));\n\t\t}, false);\n\t\tsignin_button.addEventListener('click', function(evt) {\n\t\t\tapp.auth = {};\n\t\t\tapp.setSection('login');\n\t\t}, false);\n\t\tapp.buttons.notification.addEventListener('click', function(evt) {\n\t\t\tapp.showNotification();\n\t\t}, false);\n\t\tprofile_button.addEventListener('click', function(evt) {\n\t\t\tif (app.isLogged) {\n\t\t\t\tapp.setSection((evt.currentTarget.querySelector('a').getAttribute('hash') !== null ? evt.currentTarget.querySelector('a').getAttribute('hash') : evt.currentTarget.querySelector('a').getAttribute('href')).substr(1));\n\t\t\t} else {\n\t\t\t\tapp.setSection('login');\n\t\t\t}\n\t\t}, false);\n\t\tif (document.querySelector('.sticky')) {\n\t\t\tif (!window.getComputedStyle(document.querySelector('.sticky')).position.match('sticky')) {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\ttoast(\"Your browser does not support 'position: sticky'!!.\", { timeout: app.toastDuration, type: \"info\" });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (app.containers.menuIconElement) {\n\t\t\tapp.containers.menuIconElement.addEventListener('click', app.showMenu, false);\n\t\t\tapp.containers.menuIconElement.querySelector('i.material-icons').setAttribute('id', 'imgIconMenu');\n\t\t\tapp.containers.menuOverlayElement.addEventListener('click', app.hideMenu, false);\n\t\t\tapp.containers.menuElement.addEventListener('transitionend', app.onTransitionEnd, false);\n\t\t\tfor (var item in app.containers.menuItems) {\n\t\t\t\tif (app.containers.menuItems[item].childElementCount > -1) {\n\t\t\t\t\t(app.containers.menuItems[item]).addEventListener('click', function(evt) {\n\t\t\t\t\t\tapp.setSection((evt.currentTarget.getAttribute('href')).substr(1));\n\t\t\t\t\t\tapp.hideMenu();\n\t\t\t\t\t}, false);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tvar pMatches = document.querySelectorAll('.passmatch');\n\t\tfor (var p in pMatches) {\n\t\t\tif ((pMatches[p]).childElementCount > -1) {\n\t\t\t\t(pMatches[p]).addEventListener('input', function(event) {\n\t\t\t\t\tif (document.querySelector('#p2').value != '' && document.querySelector('#p1').value != document.querySelector('#p2').value) {\n\t\t\t\t\t\tdocument.querySelector('#p2').parentNode.classList.add('is-invalid');\n\t\t\t\t\t\tdocument.querySelector('#p2').parentNode.classList.add('is-dirty');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdocument.querySelector('#p2').parentNode.classList.remove('is-invalid');\n\t\t\t\t\t\tdocument.querySelector('#p2').parentNode.classList.remove('is-dirty');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tfor (var item in app.containers.menuTabItems) {\n\t\t\tif (app.containers.menuTabItems[item].childElementCount > -1) {\n\t\t\t\tapp.initNewSection(app.containers.menuTabItems[item].getAttribute(\"for\"));\n\t\t\t\t//initNewSection\n\t\t\t\t(app.containers.menuTabItems[item]).addEventListener('click', function(evt) {\n\t\t\t\t\tapp.setSection((evt.target.parentNode.getAttribute('hash') !== null ? evt.target.parentNode.getAttribute('hash') : evt.target.parentNode.getAttribute('href')).substr(1));\n\t\t\t\t}, false);\n\t\t\t}\n\t\t};\n\t\tfor (var i in app.buttons.status) {\n\t\t\tif (app.buttons.status[i].childElementCount > -1) {\n\t\t\t\tapp.buttons.status[i].removeEventListener('click', app.onStatusButtonClick, false);\n\t\t\t\tapp.buttons.status[i].addEventListener('click', app.onStatusButtonClick, false);\n\t\t\t}\n\t\t};\n\t\tfor (var i in app.buttons.settings) {\n\t\t\tif (app.buttons.settings[i].childElementCount > -1) {\n\t\t\t\tapp.buttons.settings[i].removeEventListener('click', app.onSettingsButtonClick, false);\n\t\t\t\tapp.buttons.settings[i].addEventListener('click', app.onSettingsButtonClick, false);\n\t\t\t}\n\t\t};\n\t\tfor (var i in app.buttons.docs) {\n\t\t\tif (app.buttons.docs[i].childElementCount > -1) {\n\t\t\t\tapp.buttons.docs[i].removeEventListener('click', app.onDocsButtonClick, false);\n\t\t\t\tapp.buttons.docs[i].addEventListener('click', app.onDocsButtonClick, false);\n\t\t\t}\n\t\t}\n\t\tfor (var i in app.buttons.terms) {\n\t\t\tif (app.buttons.terms[i].childElementCount > -1) {\n\t\t\t\tapp.buttons.terms[i].removeEventListener('click', app.onTermsButtonClick, false);\n\t\t\t\tapp.buttons.terms[i].addEventListener('click', app.onTermsButtonClick, false);\n\t\t\t}\n\t\t};\n\t\t// Search\n\t\tif (document.getElementById('search-exp')) {\n\t\t\tdocument.getElementById('search-exp').addEventListener('keypress', function(e) {\n\t\t\t\tif (e.keyCode === 13) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar input = this.value;\n\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\talert(\"Searching for \" + input);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\t// Filter\n\t\tif (document.getElementById('filter-exp')) {\n\t\t\tdocument.getElementById('filter-exp').addEventListener('keypress', function(e) {\n\t\t\t\tif (e.keyCode === 13) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar input = this.value;\n\t\t\t\t\tvar type = 'objects';\n\t\t\t\t\tvar size;\n\t\t\t\t\tif (document.querySelector('section#objects').classList.contains('is-active')) {\n\t\t\t\t\t\ttype = 'objects';\n\t\t\t\t\t\tsize = app.itemsSize.objects;\n\t\t\t\t\t} else if (document.querySelector('section#flows').classList.contains('is-active')) {\n\t\t\t\t\t\ttype = 'flows';\n\t\t\t\t\t\tsize = app.itemsSize.flows;\n\t\t\t\t\t}\n\t\t\t\t\tapp.fetchItemsPaginated(type, this.value, 1, size);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\t// Lazy loading\n\t\tvar paginatedContainer = Array(Array(app.containers.objects, 'objects'), Array(app.containers.flows, 'flows'), Array(app.containers.snippets, 'snippets'), Array(app.containers.dashboards, 'dashboards'), Array(app.containers.mqtts, 'mqtts'), Array(app.containers.sources, 'sources'), Array(app.containers.rules, 'rules'));\n\t\tpaginatedContainer.map(function(c) {\n\t\t\tif (c[0]) {\n\t\t\t\tc[0].addEventListener('DOMMouseScroll', function(event) {\n\t\t\t\t\tvar height = (document.body.scrollHeight || window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0);\n\t\t\t\t\tvar bottom = (document.querySelector('section#' + c[1])).getBoundingClientRect().bottom;\n\t\t\t\t\tif (bottom <= height && c[0].classList.contains('is-active')) {\n\t\t\t\t\t\t//console.log(\"Lazy loading -->\", c[0].offsetHeight, height, bottom);\n\t\t\t\t\t\t//console.log('Lazy loading page=', ++(app.itemsPage[c[1]]));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t// Cookie Consent\n\t\tvar d = new Date();\n\t\td.setTime(d.getTime() + (app.cookieconsent * 24 * 60 * 60 * 1000));\n\t\tdocument.getElementById('cookieconsent.agree').addEventListener('click', function(evt) {\n\t\t\tdocument.getElementById('cookieconsent').remove();\n\t\t\tdocument.cookie = \"cookieconsent=true;expires=\" + d.toUTCString() + \";path=/\";\n\t\t\tdocument.cookie = \"cookieconsentNoGTM=false;expires=\" + d.toUTCString() + \";path=/\";\n\t\t\tevt.preventDefault();\n\t\t}, false);\n\t\tdocument.getElementById('cookieconsent.noGTM').addEventListener('click', function(evt) {\n\t\t\tdocument.getElementById('cookieconsent').remove();\n\t\t\tdocument.cookie = \"cookieconsent=true;expires=\" + d.toUTCString() + \";path=/\";\n\t\t\tdocument.cookie = \"cookieconsentNoGTM=true;expires=\" + d.toUTCString() + \";path=/\";\n\t\t\tif (typeof mixpanel !== \"undefined\") {\n\t\t\t\tmixpanel.opt_out_tracking();\n\t\t\t}\n\t\t\tevt.preventDefault();\n\t\t}, false);\n\t\tdocument.getElementById('cookieconsent.read').addEventListener('click', function(evt) {\n\t\t\tapp.getTerms();\n\t\t\tapp.setSection('terms');\n\t\t\tevt.preventDefault();\n\t\t}, false);\n\t\tif (app.getCookie('cookieconsent') !== \"true\") {\n\t\t\tdocument.getElementById('cookieconsent').classList.add('is-visible');\n\t\t\tdocument.getElementById('cookieconsent').classList.remove('hidden');\n\t\t} else {\n\t\t\tdocument.getElementById('cookieconsent').classList.add('hidden');\n\t\t\tdocument.getElementById('cookieconsent').classList.remove('is-visible');\n\t\t}\n\t};\n\t\n\tapp.setServiceWorker = function() {\n\t\tif (!('serviceWorker' in navigator)) {\n\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\tconsole.log('[ServiceWorker]', 'Service Worker isn\\'t supported on this browser.');\n\t\t\t}\n\t\t\treturn;\n\t\t} else {\n\t\t\tif (!('PushManager' in window)) {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\tconsole.log('[pushSubscription]', 'Push isn\\'t supported on this browser.');\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\tconsole.log('[pushSubscription]', 'askPermission && subscribeUserToPush');\n\t\t\t\t}\n\t\t\t\tapp.askPermission();\n\t\t\t\tapp.subscribeUserToPush();\n\t\t\t}\n\t\t};\n\t};\n\n\t/*\n\t * *********************************** Run the App ***********************************\n\t */\n\tif (localStorage.getItem('refresh_token') !== null && localStorage.getItem('refreshTokenExp') !== null && localStorage.getItem('refreshTokenExp') > moment().unix()) {\n\t\tapp.isLogged = true;\n\t}\n\n\tif (!app.isLogged || app.auth.username === undefined) {\n\t\tif (localStorage.getItem('refresh_token') !== null && localStorage.getItem('refreshTokenExp') !== null && localStorage.getItem('refreshTokenExp') > moment().unix()) {\n\t\t\tapp.refreshAuthenticate();\n\n\t\t\tapp.setHiddenElement(\"signin_button\");\n\t\t\tapp.setVisibleElement(\"logout_button\");\n\t\t\tapp.getUnits();\n\t\t\tapp.getDatatypes();\n\t\t\tapp.getSnippets();\n\t\t\tapp.getFlows();\n\t\t\tapp.getSources();\n\t\t\tsetInterval(app.refreshAuthenticate, app.refreshExpiresInSeconds);\n\t\t\tif (localStorage.getItem('role') == 'admin') {\n\t\t\t\tapp.addMenuItem('Users Accounts', 'supervisor_account', '#users-list', null);\n\t\t\t}\n\t\t} else {\n\t\t\tapp.sessionExpired();\n\t\t}\n\t}\n\n\t// Notifications\n\tfor (var i in app.buttons.notifications) {\n\t\tif (app.buttons.notifications[i].childElementCount > -1) {\n\t\t\tapp.buttons.notifications[i].addEventListener('click', function(e) {\n\t\t\t\tlet email, token;\n\t\t\t\tif (getParameterByName(\"email\", null)) {\n\t\t\t\t\temail = decodeURI(getParameterByName(\"email\", null));\n\t\t\t\t} else {\n\t\t\t\t\temail = app.getSetting(\"notifications.email\");\n\t\t\t\t}\n\t\t\t\tif (getParameterByName(\"token\", null)) {\n\t\t\t\t\ttoken = decodeURI(getParameterByName(\"token\", null));\n\t\t\t\t} else {\n\t\t\t\t\ttoken = app.getSetting(\"notifications.unsubscription_token\");\n\t\t\t\t}\n\t\t\t\tif (email!==null && token!==null) {\n\t\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + localStorage.getItem(\"bearer\"));\n\t\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\t\t\tvar myInit = { method: \"GET\", headers: myHeaders };\n\t\t\t\t\tvar type = e.target.parentNode.classList.contains(\"is-checked\") ? \"unsubscribe\" : \"subscribe\";\n\t\t\t\t\tvar url = `${app.baseUrl}/mail/${email}/${type}/${e.target.getAttribute(\"name\")}/${token}/`;\n\t\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t\t\t).then(function(fetchResponse) {\n\t\t\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(function(response) {\n\t\t\t\t\t\t\tconsole.log(response);\n\t\t\t\t\t\t\ttoast('Settings updated.', { timeout: app.toastDuration, type: \"done\" });\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\t\t\ttoast('Error occured on saving Notifications...' + error, { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\t\ttoast(\"Error occured on saving Notifications. Missing parameter.\", { timeout: app.toastDuration, type: \"error\" });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, false);\n\t\t}\n\t}\n\n\tvar ce = function(e, n) { var a = document.createEvent(\"CustomEvent\"); a.initCustomEvent(n, true, true, e.target); e.target.dispatchEvent(a); a = null; return false },\n\t\tnm = true, sp = { x: 0, y: 0 }, ep = { x: 0, y: 0 },\n\t\ttouch = {\n\t\t\ttouchstart: function(e) { sp = { x: e.touches[0].pageX, y: e.touches[0].pageY } },\n\t\t\ttouchmove: function(e) { nm = false; ep = { x: e.touches[0].pageX, y: e.touches[0].pageY } },\n\t\t\ttouchend: function(e) { if (nm) { ce(e, 'fc') } else { var x = ep.x - sp.x, xr = Math.abs(x), y = ep.y - sp.y, yr = Math.abs(y); if (Math.max(x, r)  > 20) { e(e, (xr  > yr ? (x < 0 ? 'swl' : 'swr') : (y < 0 ? 'swu' : 'swd'))) } }; nm = true },\n\t\t\ttouchcancel: function(e) { nm = false }\n\t\t};\n\tfor (var a in touch) { document.addEventListener(a, touch[a], false); }\n\tdocument.body.addEventListener('touchstart', function(event) {\n\t\ttouchStartPoint = event.changedTouches[0].pageX;\n\t\ttouchMovePoint = touchStartPoint;\n\n\t\tvar fabs = document.querySelectorAll('section.is-active div.page-content.mdl-grid .mdl-button--fab, div.play-fab');\n\t\tfor (var f in fabs) {\n\t\t\tif (fabs[f].classList) {\n\t\t\t\tfabs[f].classList.remove('is-here');\n\t\t\t\tfabs[f].classList.add('is-not-here');\n\t\t\t}\n\t\t}\n\t}, false);\n\tdocument.body.addEventListener('touchmove', function(event) {\n\t\ttouchMovePoint = event.touches[0].pageX;\n\t\tif (touchStartPoint < 10 && touchMovePoint > 100) {\n\t\t\tapp.containers.menuElement.classList.add('is-visible');\n\t\t}\n\t}, false);\n\tdocument.body.addEventListener('touchend', function(event) {\n\t\tvar fabs = document.querySelectorAll('section.is-active div.page-content.mdl-grid .mdl-button--fab, div.play-fab');\n\t\tfor (var f in fabs) {\n\t\t\tif (fabs[f].classList) {\n\t\t\t\tfabs[f].classList.remove('is-not-here');\n\t\t\t\tfabs[f].classList.add('is-here');\n\t\t\t}\n\t\t}\n\t}, false);\n\n\tdocument.addEventListener(\"readystatechange\", event => {\n\t\tif (event.target.readyState === \"loading\") {\n\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\tvar loadingTime = new Date();\n\t\t\t\tconsole.log(\"DEBUG\", \"loading: \", loadingTime - startTime, \"ms\");\n\t\t\t}\n\t\t} else if (event.target.readyState === \"interactive\") {\n\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\tvar interactiveTime = new Date();\n\t\t\t\tconsole.log(\"DEBUG\", \"interactive: \", interactiveTime - startTime, \"ms\");\n\t\t\t}\n\t\t} else if (event.target.readyState === \"complete\") {\n\t\t\tapp.refreshContainers();\n\t\t\tapp.managePage();\n\t\t\tapp.fetchIndex('index');\n\t\t\tapp.setInteractiveLinks();\n\t\t\tapp.setLoginAction();\n\t\t\tapp.setSignupAction();\n\t\t\tapp.setForgotAction();\n\t\t\tapp.setPasswordResetAction();\n\t\t\tapp.refreshButtonsSelectors();\n\t\t\tapp.imageLazyLoading();\n\t\t\tapp.setDrawer();\n\t\t\tapp.setHiddenElement(\"notification\");\n\t\t\tapp.setServiceWorker();\n\n\t\t\tif (typeof screen.orientation !== \"undefined\") {\n\t\t\t\tscreen.orientation.addEventListener(\"change\", app.showOrientation);\n\t\t\t}\n\t\t\twindow.addEventListener(\"online\", app.updateNetworkStatus, false);\n\t\t\twindow.addEventListener(\"offline\", app.updateNetworkStatus, false);\n\t\t\twindow.addEventListener(\"clearCache\", app.clearCache, false);\n\t\t\twindow.addEventListener(\"hashchange\", function() {\n\t\t\t\tif (window.history && window.history.pushState) {\n\t\t\t\t\tlocalStorage.setItem(\"currentPage\", window.location.hash.substr(1));\n\t\t\t\t\tvar id = getParameterByName('id', null);\n\t\t\t\t\tvar id2 = window.location.hash;\n\t\t\t\t\tif (id) {\n\t\t\t\t\t\tlocalStorage.setItem(\"currentResourceId\", id);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlocalStorage.setItem(\"currentResourceId\", null);\n\t\t\t\t\t}\n\t\t\t\t\tapp.managePage();\n\t\t\t\t}\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\tconsole.log('[History]', 'hashchange');\n\t\t\t\t\tconsole.log('[History]', 'resource id', id2);\n\t\t\t\t}\n\t\t\t}, false);\n\t\t\tif (app.gtm !== \"\" && app.getCookie('cookieconsentNoGTM') !== \"true\") {\n\t\t\t\t(function(w, d, s, l, i) {\n\t\t\t\t\tw[l] = w[l] || []; w[l].push({\n\t\t\t\t\t\t'gtm.start':\n\t\t\t\t\t\t\tnew Date().getTime(), event: 'gtm.js'\n\t\t\t\t\t}); var f = d.getElementsByTagName(s)[0],\n\t\t\t\t\t\tj = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =\n\t\t\t\t\t\t\t'//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);\n\t\t\t\t})(window, document, 'script', 'dataLayer', app.gtm);\n\t\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\t\tconsole.log('[gtm]', 'gtm.start');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (localStorage.getItem(\"settings.debug\") == \"true\") {\n\t\t\t\tvar completeTime = new Date();\n\t\t\t\tconsole.log(\"DEBUG\", \"complete: \", completeTime - startTime, \"ms\");\n\t\t\t}\n\t\t}\n\t});\n})();","\"use strict\";\napp.resources.objects = {\n\tonEdit: function(evt) {\n\t\tvar object_id = evt.target.parentNode.getAttribute(\"data-id\")?evt.target.parentNode.getAttribute(\"data-id\"):evt.target.getAttribute(\"data-id\");\n\t\tif ( !object_id ) {\n\t\t\ttoast(\"No Object id found!\", {timeout:3000, type: \"error\"});\n\t\t} else {\n\t\t\tvar myForm = evt.target.parentNode.parentNode.parentNode.parentNode;\n\t\t\tvar body = {\n\t\t\t\ttype: myForm.querySelector(\"select[name='Type']\").value,\n\t\t\t\tname: myForm.querySelector(\"input[name='Name']\").value,\n\t\t\t\tdescription: myForm.querySelector(\"textarea[name='Description']\").value,\n\t\t\t\tposition: myForm.querySelector(\"input[name='Position']\")!==null?myForm.querySelector(\"input[name='Position']\").value:\"\",\n\t\t\t\tlongitude: myForm.querySelector(\"input[name='Longitude']\")!==null?myForm.querySelector(\"input[name='Longitude']\").value:\"\",\n\t\t\t\tlatitude: myForm.querySelector(\"input[name='Latitude']\")!==null?myForm.querySelector(\"input[name='Latitude']\").value:\"\",\n\t\t\t\tipv4: myForm.querySelector(\"input[name='IPv4']\")!==null?myForm.querySelector(\"input[name='IPv4']\").value:\"\",\n\t\t\t\tipv6: myForm.querySelector(\"input[name='IPv6']\")!==null?myForm.querySelector(\"input[name='IPv6']\").value:\"\",\n\t\t\t\tsecret_key_crypt: myForm.querySelector(\"input[id='secret_key_crypt']\")!==null?myForm.querySelector(\"input[id='secret_key_crypt']\").value:\"\",\n\t\t\t\tsecret_key: myForm.querySelector(\"input[id='secret_key']\")!==null?myForm.querySelector(\"input[id='secret_key']\").value:\"\",\n\t\t\t\tisPublic: myForm.querySelector(\"label.mdl-switch\").classList.contains(\"is-checked\")===true?\"true\":\"false\",\n\t\t\t\tfqbn: myForm.querySelector(\"input[id='fqbn']\")!==null?myForm.querySelector(\"input[id='fqbn']\").value:\"\",\n\t\t\t\tsource_id: myForm.querySelector(\"select[id='source_id']\")!==null?myForm.querySelector(\"select[id='source_id']\").value:\"\",\n\t\t\t\tsource_version: myForm.querySelector(\"select[id='source_version']\")!==null?myForm.querySelector(\"select[id='source_version']\").value:\"\",\n\t\t\t\tcommunication: { \"allowed_commands\" : [], \"interface\" : myForm.querySelector(\"select[id='interface']\")!==null?myForm.querySelector(\"select[id='interface']\").value:\"\", },\n\t\t\t\tui_id: myForm.querySelector(\"input[id='ui_id']\")!==null?myForm.querySelector(\"input[id='ui_id']\").value:\"\",\n\t\t\t\tmeta: {revision: myForm.querySelector(\"input[name='meta.revision']\").value, },\n\t\t\t};\n\t\t\tif (myForm.querySelector(\"label.mdl-checkbox[data-id='checkbox-communication.command_onoff']\").classList.contains(\"is-checked\")===true) {\n\t\t\t\tbody.communication.allowed_commands.push(\"onoff\");\n\t\t\t}\n\t\t\tif (myForm.querySelector(\"label.mdl-checkbox[data-id='checkbox-communication.command_lowerupper']\").classList.contains(\"is-checked\")===true) {\n\t\t\t\tbody.communication.allowed_commands.push(\"lowerupper\");\n\t\t\t}\n\t\t\tif (myForm.querySelector(\"label.mdl-checkbox[data-id='checkbox-communication.command_openclose']\").classList.contains(\"is-checked\")===true) {\n\t\t\t\tbody.communication.allowed_commands.push(\"openclose\");\n\t\t\t}\n\t\t\tif (myForm.querySelector(\"label.mdl-checkbox[data-id='checkbox-communication.command_setvalgetval']\").classList.contains(\"is-checked\")===true) {\n\t\t\t\tbody.communication.allowed_commands.push(\"setvalgetval\");\n\t\t\t}\n\t\n\t\t\tvar myHeaders = new Headers();\n\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\tvar myInit = { method: \"PUT\", headers: myHeaders, body: JSON.stringify(body) };\n\t\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/objects/\"+object_id;\n\t\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse){ \n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tapp.setSection(\"objects\");\n\t\t\t\ttoast(\"Object has been saved.\", {timeout:3000, type: \"done\"});\n\t\t\t\t//var objectContainer = document.querySelector(\"section#objects div[data-id='\"+object_id+\"']\");\n\t\t\t\t//objectContainer.querySelector(\"h2\").innerHTML = body.name;\n\t\t\t\t//objectContainer.querySelector(\"div.mdl-list__item--three-line.small-padding span.mdl-list__item-sub-title\").innerHTML = app.nl2br(body.description.substring(0, app.cardMaxChars));\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\ttoast(\"Object has not been saved.\", {timeout:3000, type: \"error\"});\n\t\t\t});\n\t\t\tevt.preventDefault();\n\t\t}\n\t},\n\tonAdd: function(evt) {\n\t\tvar myForm = evt.target.parentNode.parentNode.parentNode.parentNode;\n\t\tvar body = {\n\t\t\ttype: myForm.querySelector(\"select[name='Type']\").value,\n\t\t\tname: myForm.querySelector(\"input[name='Name']\").value,\n\t\t\tdescription: myForm.querySelector(\"textarea[name='Description']\").value,\n\t\t\tposition: myForm.querySelector(\"input[name='Position']\")!==null?myForm.querySelector(\"input[name='Position']\").value:\"\",\n\t\t\tlongitude: myForm.querySelector(\"input[name='Longitude']\")!==null?myForm.querySelector(\"input[name='Longitude']\").value:\"\",\n\t\t\tlatitude: myForm.querySelector(\"input[name='Latitude']\")!==null?myForm.querySelector(\"input[name='Latitude']\").value:\"\",\n\t\t\tipv4: myForm.querySelector(\"input[name='IPv4']\")!==null?myForm.querySelector(\"input[name='IPv4']\").value:\"\",\n\t\t\tipv6: myForm.querySelector(\"input[name='IPv6']\")!==null?myForm.querySelector(\"input[name='IPv6']\").value:\"\",\n\t\t\tsecret_key: myForm.querySelector(\"input[id='secret_key']\")!==null?myForm.querySelector(\"input[id='secret_key']\").value:\"\",\n\t\t\tsecret_key_crypt: myForm.querySelector(\"input[id='secret_key_crypt']\")!==null?myForm.querySelector(\"input[id='secret_key_crypt']\").value:\"\",\n\t\t\tisPublic: myForm.querySelector(\"label.mdl-switch\").classList.contains(\"is-checked\")===true?\"true\":\"false\",\n\t\t\tfqbn: myForm.querySelector(\"input[id='fqbn']\")!==null?myForm.querySelector(\"input[id='fqbn']\").value:\"\",\n\t\t\tsource_id: myForm.querySelector(\"select[id='source_id']\")!==null?myForm.querySelector(\"select[id='source_id']\").value:\"\",\n\t\t\tsource_version: myForm.querySelector(\"select[id='source_version']\")!==null?myForm.querySelector(\"select[id='source_version']\").value:\"\",\n\t\t\tui_id: myForm.querySelector(\"input[id='ui_id']\")!==null?myForm.querySelector(\"input[id='ui_id']\").value:\"\",\n\t\t\tcommunication: { \"allowed_commands\" : [], \"interface\" : myForm.querySelector(\"select[id='interface']\")!==null?myForm.querySelector(\"select[id='interface']\").value:\"\", },\n\t\t};\n\t\tif (body.source_id === \"-\") { body.source_id = \"\"; }\n\t\tif (myForm.querySelector(\"label.mdl-checkbox[data-id='checkbox-communication.command_onoff']\").classList.contains(\"is-checked\")===true) {\n\t\t\tbody.communication.allowed_commands.push(\"onoff\");\n\t\t}\n\t\tif (myForm.querySelector(\"label.mdl-checkbox[data-id='checkbox-communication.command_lowerupper']\").classList.contains(\"is-checked\")===true) {\n\t\t\tbody.communication.allowed_commands.push(\"lowerupper\");\n\t\t}\n\t\tif (myForm.querySelector(\"label.mdl-checkbox[data-id='checkbox-communication.command_openclose']\").classList.contains(\"is-checked\")===true) {\n\t\t\tbody.communication.allowed_commands.push(\"openclose\");\n\t\t}\n\t\tif (myForm.querySelector(\"label.mdl-checkbox[data-id='checkbox-communication.command_setvalgetval']\").classList.contains(\"is-checked\")===true) {\n\t\t\tbody.communication.allowed_commands.push(\"setvalgetval\");\n\t\t}\n\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"POST\", headers: myHeaders, body: JSON.stringify(body) };\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/objects/\";\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\tapp.setSection(\"objects\");\n\t\t\ttoast(\"Object has been added.\", {timeout:3000, type: \"done\"});\n\t\t})\n\t\t.catch(function (error) {\n\t\t\ttoast(\"Object has not been added.\", {timeout:3000, type: \"error\"});\n\t\t});\n\t\tevt.preventDefault();\n\t},\n\tonDelete: function(id) {\n\t\t\n\t},\n\tonDeploy: function(source_id, object_id) {\n\t\t// Get all objects linked to the source\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"POST\", headers: myHeaders };\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/ota/\"+source_id+\"/deploy/\"+object_id;\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\ttoast(\"Source is deploying to 1 available Object. This can take several minutes.\", {timeout:10000, type: \"info\"});\n\t\t});\n\t\t\n\t},\n\tonBuild: function(id, object_id) {\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"POST\", headers: myHeaders };\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/objects/\"+object_id+\"/build\";\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\ttoast(\"Source is building 1 Object. This can take several minutes.\", {timeout:10000, type: \"info\"});\n\t\t});\n\t\t\n\t},\n\tonViewUi: function(object_id) {\n\t\twindow.open(app.baseUrl+\"/\"+app.api_version+\"/objects/\"+object_id+\"/show/\");\n\t},\n\tdisplay: function(id, isAdd, isEdit, isPublic) {\n\t\twindow.scrollTo(0, 0);\n\t\tif (isPublic) {\n\t\t\tdisplayPublic(id, isAdd, isEdit, isPublic);\n\t\t}\n\t\tif (id instanceof Object && isAdd) {\n\t\t\tdisplayAdd(id, isAdd, isEdit, isPublic);\n\t\t} else {\n\t\t\thistory.pushState( {section: \"object\" }, window.location.hash.substr(1), \"#object?id=\"+id );\n\t\t}\n\t\tapp.initNewSection(\"object\");\n\t\tapp.containers.spinner.removeAttribute(\"hidden\");\n\t\tapp.containers.spinner.classList.remove(\"hidden\");\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"GET\", headers: myHeaders };\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/objects/\"+id;\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\tfor (var i=0; i < (response.data).length ; i++ ) {\n\t\t\t\tvar object = response.data[i];\n\t\t\t\tvar description = object.attributes.description!==undefined?object.attributes.description:\"\";\n\n\t\t\t\tdocument.title = (app.sectionsPageTitles[\"object\"]).replace(/%s/g, object.attributes.name);\n\t\t\t\tif ((app.containers.object)) {\n\t\t\t\t\t((app.containers.object).querySelector(\".page-content\")).innerHTML = \"\";\n\t\t\t\t}\n\t\t\t\tvar node = \"\";\n\t\t\t\tnode = \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+object.id+\"\\\">\";\n\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\tnode += \"\t\t<div class=\\\"mdl-list__item\\\">\";\n\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-primary-content'>\";\n\t\t\t\tnode += \"\t\t\t\t<i class=\\\"material-icons mdl-textfield__icon\\\">\"+app.icons.objects+\"</i>\";\n\t\t\t\tnode += \"\t\t\t\t<h2 class=\\\"mdl-card__title-text\\\">\"+object.attributes.name+\"</h2>\";\n\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-secondary-action'>\";\n\t\t\t\tnode += \"\t\t\t\t<button role='button' class='mdl-button mdl-js-button mdl-button--icon right showdescription_button' for='description-\"+object.id+\"'>\";\n\t\t\t\tnode += \"\t\t\t\t\t<i class='material-icons'>expand_more</i>\";\n\t\t\t\tnode += \"\t\t\t\t</button>\";\n\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\tnode += \"\t\t<div class='mdl-cell--12-col hidden' id='description-\"+object.id+\"'>\";\n\n\t\t\t\tnode += app.getField(app.icons.code, \"Id\", object.id, {type: \"text\", style:\"text-transform: none !important;\"});\n\t\t\t\tif ( object.attributes.description && isEdit!==true ) {\n\t\t\t\t\tnode += app.getField(app.icons.description, \"Description\", description, {type: \"text\"});\n\t\t\t\t}\n\t\t\t\tif ( object.attributes.meta.created ) {\n\t\t\t\t\tnode += app.getField(app.icons.date, \"Created\", moment(object.attributes.meta.created).format(app.date_format), {type: \"text\"});\n\t\t\t\t}\n\t\t\t\tif ( object.attributes.meta.updated ) {\n\t\t\t\t\tnode += app.getField(app.icons.date, \"Updated\", moment(object.attributes.meta.updated).format(app.date_format), {type: \"text\"});\n\t\t\t\t}\n\t\t\t\tif ( object.attributes.meta.revision ) {\n\t\t\t\t\tnode += app.getField(app.icons.update, \"Revision\", object.attributes.meta.revision, {type: \"text\"});\n\t\t\t\t}\n\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\tnode += \"\t</div>\";\n\t\t\t\tnode += \"</section>\";\n\t\t\t\t\n\t\t\t\tnode += app.getSubtitle(\"Parameters\");\n\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\tif ( isEdit===true ) {\n\t\t\t\t\tnode += app.getField(null, \"meta.revision\", object.attributes.meta.revision, {type: \"hidden\", id: \"meta.revision\", pattern: app.patterns.meta_revision});\n\t\t\t\t\tnode += app.getField(app.icons.name, \"Name\", object.attributes.name, {type: \"text\", id: \"Name\", isEdit: isEdit, pattern: app.patterns.name, error:\"Name should be set and more than 3 chars length.\"});\n\t\t\t\t}\n\t\t\t\tif ( object.attributes.type ) {\n\t\t\t\t\tvar d = app.types.find( function(type) { return type.name == object.attributes.type; });\n\t\t\t\t\td = d!==undefined?d:\"\";\n\t\t\t\t\tif ( isEdit===true ) {\n\t\t\t\t\t\tnode += app.getField(app.icons.type, \"Type\", d.name, {type: \"select\", id: \"Type\", isEdit: isEdit, options: app.types });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode += app.getField(app.icons.type, \"Type\", d.value, {type: \"select\", id: \"Type\", isEdit: isEdit, options: app.types });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ( isEdit===true ) {\n\t\t\t\t\tnode += app.getField(app.icons.description, \"Description\", description, {type: \"textarea\", id: \"Description\", isEdit: isEdit});\n\t\t\t\t}\n\t\t\t\tnode += \"\t</div>\";\n\t\t\t\tnode += \"</section>\";\n\t\t\t\t\n\t\t\t\tnode += app.getSubtitle(\"Security\");\n\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\tif ( object.attributes.secret_key || isEdit===true ) {\n\t\t\t\t\tnode += app.getField(\"verified_user\", \"Secret Key in symmetric signature\", object.attributes.secret_key!==undefined?object.attributes.secret_key:\"\", {type: \"text\", style:\"text-transform: none !important;\", id: \"secret_key\", isEdit: isEdit, pattern: app.patterns.secret_key, error:\"\"});\n\t\t\t\t\tnode += app.getField(\"\", \"\", \"When flow require signed payload, you should provide your secret to verify signature.\", {type: \"text\", isEdit: false});\n\t\t\t\t}\n\t\t\t\tif ( object.attributes.secret_key_crypt || isEdit===true ) {\n\t\t\t\t\tnode += app.getField(\"vpn_key\", \"Secret Key in symmetric cryptography\", object.attributes.secret_key_crypt!==undefined?object.attributes.secret_key_crypt:\"\", {type: \"text\", style:\"text-transform: none !important;\", id: \"secret_key_crypt\", isEdit: isEdit, pattern: app.patterns.secret_key_crypt, error:\"This must be a 64 hexadecimal chars length A-F & 0-9\"});\n\t\t\t\t}\n\t\t\t\tif ( object.attributes.is_public == \"true\" && isEdit===false ) {\n\t\t\t\t\tnode += app.getField(\"visibility\", object.attributes.is_public==\"true\"?\"Object is having a public url\":\"Object is private\", object.attributes.is_public, {type: \"switch\", id: \"Visibility\", isEdit: isEdit});\n\t\t\t\t\tnode += app.getQrcodeImg(app.icons.date, \"\", object.id, {type: \"text\", isEdit: isEdit});\n\t\t\t\t\tapp.getQrcode(app.icons.date, \"\", object.id, {type: \"text\", isEdit: isEdit});\n\t\t\t\t} else {\n\t\t\t\t\tnode += app.getField(\"visibility\", object.attributes.is_public==\"true\"?\"Object is having a public url\":\"Object is private\", object.attributes.is_public, {type: \"switch\", id: \"Visibility\", isEdit: isEdit});\n\t\t\t\t}\n\t\t\t\tnode += \"\t</div>\";\n\t\t\t\tnode += \"</section>\";\n\n\t\t\t\tobject.attributes.communication = typeof object.attributes.communication!==\"undefined\"?object.attributes.communication:{};\n\t\t\t\tobject.attributes.communication.allowed_commands = typeof object.attributes.communication.allowed_commands!==\"undefined\"?object.attributes.communication.allowed_commands:new Array();\n\t\t\t\tobject.attributes.communication.allowed_commands.onoff = object.attributes.communication.allowed_commands.indexOf(\"onoff\")!=-1?\"true\":\"false\";\n\t\t\t\tobject.attributes.communication.allowed_commands.lowerupper = object.attributes.communication.allowed_commands.indexOf(\"lowerupper\")!=-1?\"true\":\"false\";\n\t\t\t\tobject.attributes.communication.allowed_commands.openclose = object.attributes.communication.allowed_commands.indexOf(\"openclose\")!=-1?\"true\":\"false\";\n\t\t\t\tobject.attributes.communication.allowed_commands.setvalgetval = object.attributes.communication.allowed_commands.indexOf(\"setvalgetval\")!=-1?\"true\":\"false\";\n\t\t\t\tobject.attributes.ui_id = typeof object.attributes.ui_id!==\"undefined\"?object.attributes.ui_id:\"\";\n\t\t\t\tnode += app.getSubtitle(\"Communication\");\n\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\tnode += \"\t<div class=\\\"card-header heading-left\\\">&nbsp;</div>\";\n\t\t\t\tnode += app.getField(\"add_to_home_screen\", \"Interface\", object.attributes.communication.interface, {type: \"select\", id: \"interface\", options: [{name: \"restAPI\", value:\"restAPI\"}, {name: \"messageQueue\", value:\"messageQueue\"}], isEdit: isEdit});\n\t\t\t\tnode += app.getField(\"developer_mode\", \"Allow command on/off\", object.attributes.communication.allowed_commands.onoff, {type: \"checkbox\", id: \"communication.command_onoff\", isEdit: isEdit});\n\t\t\t\tnode += app.getField(\"developer_mode\", \"Allow command lower/upper\", object.attributes.communication.allowed_commands.lowerupper, {type: \"checkbox\", id: \"communication.command_lowerupper\", isEdit: isEdit});\n\t\t\t\tnode += app.getField(\"developer_mode\", \"Allow command open/close\", object.attributes.communication.allowed_commands.openclose, {type: \"checkbox\", id: \"communication.command_openclose\", isEdit: isEdit});\n\t\t\t\tnode += app.getField(\"developer_mode\", \"Allow command setVal/getVal\", object.attributes.communication.allowed_commands.setvalgetval, {type: \"checkbox\", id: \"communication.command_setvalgetval\", isEdit: isEdit});\n\t\t\t\tnode += app.getField(\"web\", \"UI resource ID\", object.attributes.ui_id, {type: \"text\", id:\"ui_id\", isEdit: isEdit, pattern: app.patterns.uuidv4, error:\"Resource should be a valid uuid-v4\"});\n\t\t\t\tnode += \"\t<div class=\\\"card-header heading-left\\\">&nbsp;</div>\";\n\t\t\t\tnode += \"\t</div>\";\n\t\t\t\tnode += \"</section>\";\n\n\t\t\t\tif ( isEdit || (typeof object.attributes.fqbn !== \"undefined\" ) ) {\n\t\t\t\t\tnode += app.getSubtitle(\"Over The Air (OTA)\");\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tnode += app.getField(\"code\", \"Fqbn string\", object.attributes.fqbn!==undefined?object.attributes.fqbn:\"\", {type: \"text\", style:\"text-transform: none !important;\", id: \"fqbn\", isEdit: isEdit});\n\t\t\t\t\tlet source_versions = new Array();\n\t\t\t\t\tlet sources = new Array({value: \"-\", name: \"-\"});\n\t\t\t\t\tif ( localStorage.getItem(\"sources\") != \"null\" ) {\n\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"sources\")).map(function(source) {\n\t\t\t\t\t\t\tif(source.id==object.attributes.source_id) {\n\t\t\t\t\t\t\t\tsource.subversions.map(function(sv) {\n\t\t\t\t\t\t\t\t\tsource_versions.push({value: `Version ${sv.version} - ${sv.name}`, name: sv.version});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn sources.push({value: source.name, name: source.id});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tsource_versions.push({value: \"Version 0\", name: \"0\"});\n\t\t\t\t\tnode += app.getField(app.icons.sources, \"Arduino Source\", typeof object.attributes.source_id!==\"undefined\"?String(object.attributes.source_id):\"-\", {type: \"select\", id: \"source_id\", isEdit: isEdit, options: sources });\n\t\t\t\t\tnode += app.getField(app.icons.version, \"Source version\", typeof object.attributes.source_version!==\"undefined\"?String(object.attributes.source_version):\"0\", {type: \"select\", id: \"source_version\", isEdit: isEdit, options: source_versions });\n\t\t\t\t\tif ( object.attributes.ipv4 || isEdit===true ) {\n\t\t\t\t\t\tnode += app.getField(\"my_location\", \"IPv4\", object.attributes.ipv4, {type: \"text\", id: \"IPv4\", isEdit: isEdit, inputmode: \"numeric\", pattern: app.patterns.ipv4, error:\"IPv4 should be valid.\"});\n\t\t\t\t\t}\n\t\t\t\t\tif ( object.attributes.ipv6 || isEdit===true ) {\n\t\t\t\t\t\tnode += app.getField(\"my_location\", \"IPv6\", object.attributes.ipv6, {type: \"text\", id: \"IPv6\", isEdit: isEdit, inputmode: \"numeric\", pattern: app.patterns.ipv6, error:\"IPv6 should be valid.\"});\n\t\t\t\t\t}\n\t\t\t\t\tif ( object.attributes.otahist && !isEdit ) {\n\t\t\t\t\t\tnode += app.getField(app.icons.date, \"OTA latest event\", `${object.attributes.otahist.event}: ${object.attributes.otahist.status} (${object.attributes.otahist.date})`, {type: \"text\", id: \"latest_event\", isEdit: false});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ( !isEdit && (typeof object.attributes.fqbn !== \"undefined\" && object.attributes.ipv4 ) ) {\n\t\t\t\t\tnode += \"\t\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tnode += \"\t\t\t<div class=\\\"mdl-list__item--three-line small-padding  mdl-card--expand pull-right\\\">\";\n\t\t\t\t\tnode += \"\t\t\t\t<button data-id=\\\"\"+object.id+\"\\\" class=\\\"object_build_btn mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect\\\">\";\n\t\t\t\t\tnode += \"\t\t\t\t\t<i class=\\\"arduino-icon build\\\"> </i>Build\";\n\t\t\t\t\tnode += \"\t\t\t\t</button>\";\n\t\t\t\t\tnode += \"\t\t\t\t<button data-id=\\\"\"+object.id+\"\\\" class=\\\"object_deploy_btn mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect\\\">\";\n\t\t\t\t\tnode += \"\t\t\t\t\t<i class=\\\"arduino-icon deploy\\\"> </i>Deploy\";\n\t\t\t\t\tnode += \"\t\t\t\t</button>\";\n\t\t\t\t\tnode += \"\t\t\t</div>\";\n\t\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\t}\n\t\t\t\tnode += \"\t</div>\";\n\t\t\t\tnode += \"</section>\";\n\n\t\t\t\tif ( isEdit || (typeof object.attributes.parameters!==\"undefined\" && object.attributes.parameters.length > -1 ) ) {\n\t\t\t\t\tnode += app.getSubtitle(\"Custom Parameters\");\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tfor ( var i in object.attributes.parameters ) {\n\t\t\t\t\t\tnode += app.getField(\"note\", object.attributes.parameters[i].name, object.attributes.parameters[i].value, {type: \"text\", id: object.attributes.parameters[i].name, isEdit: isEdit});\n\t\t\t\t\t}\n\t\t\t\t\tif ( isEdit ) {\n\t\t\t\t\t\tnode += app.getField(\"note\", [\"Name\", \"Value\"], [\"\", \"\"], {type: \"2inputs\", pattern: [app.patterns.customAttributeName, app.patterns.customAttributeValue], error: [\"Name should not contains any space nor special char.\", \"Value is free.\"], id: [\"Name[]\", \"Value[]\"], isEdit: true});\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t}\n\n\t\t\t\tif ( isEdit || (object.attributes.longitude || object.attributes.latitude || object.attributes.position) ) {\n\t\t\t\t\tnode += app.getSubtitle(\"Localization\");\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" style=\\\"padding-bottom: 50px !important;\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tnode += app.getField(\"place\", \"Longitude\", object.attributes.longitude, {type: \"text\", id: \"Longitude\", isEdit: isEdit, inputmode: \"numeric\", pattern: app.patterns.longitude, error:\"Longitude should be valid.\"});\n\t\t\t\t\tnode += app.getField(\"place\", \"Latitude\", object.attributes.latitude, {type: \"text\", id: \"Latitude\", isEdit: isEdit, inputmode: \"numeric\", pattern: app.patterns.latitude, error:\"Latitude should be valid.\"});\n\t\t\t\t\tnode += app.getField(\"pin_drop\", \"Position\", object.attributes.position, {type: \"text\", id: \"Position\", isEdit: isEdit, pattern: app.patterns.position, error:\"Should not be longer than 255 chars.\"});\n\t\t\t\t\tnode += app.getMap(\"my_location\", \"osm\", object.attributes.longitude, object.attributes.latitude, false, false, false);\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t}\n\n\t\t\t\tvar btnId = [app.getUniqueId(), app.getUniqueId(), app.getUniqueId(), app.getUniqueId()];\n\t\t\t\tif ( isEdit ) {\n\t\t\t\t\tnode += \"<section class='mdl-grid mdl-cell--12-col fixedActionButtons' data-id='\"+object.id+\"'>\";\n\t\t\t\t\tif( app.isLtr() ) node += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[0]+\"' class='back-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+object.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>chevron_left</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>View</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[0]+\"'>View Object</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tif (object.attributes.ui_id!==\"\" && object.attributes.ui_id!==\"undefined\") {\n\t\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[1]+\"' class='viewui-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+object.id+\"'>\";\n\t\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>web</i>\";\n\t\t\t\t\t\tnode += \"\t\t\t<label>View UI</label>\";\n\t\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[1]+\"'>View Object UI</label>\";\n\t\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-right'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[2]+\"' class='save-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+object.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>save</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Save</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[2]+\"'>Save changes to Object</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tif( !app.isLtr() ) node += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t} else {\n\t\t\t\t\tnode += \"<section class='mdl-grid mdl-cell--12-col fixedActionButtons' data-id='\"+object.id+\"'>\";\n\t\t\t\t\tif( app.isLtr() ) {\n\t\t\t\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[0]+\"' class='list-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+object.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>chevron_left</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>List</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[0]+\"'>List all Objects</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tif (object.attributes.ui_id!==\"\" && object.attributes.ui_id!==\"undefined\") {\n\t\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[1]+\"' class='viewui-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+object.id+\"'>\";\n\t\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>web</i>\";\n\t\t\t\t\t\tnode += \"\t\t\t<label>View UI</label>\";\n\t\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[1]+\"'>View Object UI</label>\";\n\t\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone delete-button'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[2]+\"' class='delete-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+object.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>delete</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Delete</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[2]+\"'>Delete Object...</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-right'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[3]+\"' class='edit-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+object.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>edit</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Edit</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[3]+\"'>Edit Object</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tif( !app.isLtr() ) {\n\t\t\t\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t}\n\n\t\t\t\t(app.containers.object).querySelector(\".page-content\").innerHTML = node;\n\t\t\t\tcomponentHandler.upgradeDom();\n\n\t\t\t\tapp.refreshButtonsSelectors();\n\t\t\t\tvar source_id_selector = document.getElementById(\"source_id\");\n\t\t\t\tif ( source_id_selector ) {\n\t\t\t\t\tsource_id_selector.addEventListener(\"change\", function(e) {\n\t\t\t\t\t\tif (e.srcElement.value!==\"-\") {\n\t\t\t\t\t\t\tlet subsource = JSON.parse(localStorage.getItem(\"sources\")).find(subsource => subsource.id == e.srcElement.value);\n\t\t\t\t\t\t\tlet sel = document.getElementById(\"source_version\");\n\t\t\t\t\t\t\tfor (let i = sel.options.length-1; i >= 0; i--) { sel.options[i] = null;}\n\t\t\t\t\t\t\tif ((subsource.subversions).length <= 0) {\n\t\t\t\t\t\t\t\tlet opt = document.createElement(\"option\");\n\t\t\t\t\t\t\t\topt.appendChild( document.createTextNode(\"Version 0\") );\n\t\t\t\t\t\t\t\topt.value = 0;\n\t\t\t\t\t\t\t\tsel.appendChild(opt);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t(subsource.subversions).map(function(ss) {\n\t\t\t\t\t\t\t\t\tlet opt = document.createElement(\"option\");\n\t\t\t\t\t\t\t\t\topt.appendChild( document.createTextNode(`Version ${ss.version} - ${ss.name}`) );\n\t\t\t\t\t\t\t\t\topt.value = ss.version;\n\t\t\t\t\t\t\t\t\tsel.appendChild(opt);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet sel = document.getElementById(\"source_version\");\n\t\t\t\t\t\t\tfor (let i = sel.options.length-1; i >= 0; i--) { sel.options[i] = null;}\n\t\t\t\t\t\t\tlet opt = document.createElement(\"option\");\n\t\t\t\t\t\t\topt.appendChild( document.createTextNode(\"Version 0\") );\n\t\t\t\t\t\t\topt.value = 0;\n\t\t\t\t\t\t\tsel.appendChild(opt);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (typeof object.attributes.ui_id!==\"undefined\" && app.buttons.viewuiObject) {\n\t\t\t\t\tapp.buttons.viewuiObject.addEventListener(\"click\", function(evt) {\n\t\t\t\t\t\tapp.resources.objects.onViewUi(evt.target.parentNode.getAttribute(\"data-id\"));\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t}, false);\n\t\t\t\t}\n\t\t\t\tif ( isEdit ) {\n\t\t\t\t\tapp.buttons.backObject.addEventListener(\"click\", function(evt) { app.resources.objects.display(object.id, false, false, false); }, false);\n\t\t\t\t\tapp.buttons.saveObject.addEventListener(\"click\", function(evt) { app.resources.objects.onEdit(evt); }, false);\n\t\t\t\t\t\n\t\t\t\t\tvar element = document.getElementById(\"switch-Visibility\").parentNode;\n\t\t\t\t\tif ( element ) {\n\t\t\t\t\t\telement.addEventListener(\"change\", function(e) {\n\t\t\t\t\t\t\tvar label = e.target.parentElement.querySelector(\"div.mdl-switch__label\");\n\t\t\t\t\t\t\tlabel.innerText = element.classList.contains(\"is-checked\")!==false?\"Object is having a public url\":\"Object is private\";\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (var i in app.buttons.deploySourceObject) {\n\t\t\t\t\t\tif ( app.buttons.deploySourceObject[i].childElementCount > -1 ) {\n\t\t\t\t\t\t\tapp.buttons.deploySourceObject[i].addEventListener(\"click\", function(evt) {\n\t\t\t\t\t\t\t\tapp.resources.objects.onDeploy(object.attributes.source_id, evt.target.parentNode.getAttribute(\"data-id\"));\n\t\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t\t}, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (var i in app.buttons.buildSourceObject) {\n\t\t\t\t\t\tif ( app.buttons.buildSourceObject[i].childElementCount > -1 ) {\n\t\t\t\t\t\t\tapp.buttons.buildSourceObject[i].addEventListener(\"click\", function(evt) {\n\t\t\t\t\t\t\t\tapp.resources.objects.onBuild(object.attributes.source_id, evt.target.parentNode.getAttribute(\"data-id\"));\n\t\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t\t}, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tapp.buttons.listObject.addEventListener(\"click\", function(evt) { app.setSection(\"objects\"); evt.preventDefault(); }, false);\n\t\t\t\t\t// buttons.deleteObject2.addEventListener(\"click\",\n\t\t\t\t\t// function(evt) { console.log('SHOW MODAL AND CONFIRM!');\n\t\t\t\t\t// }, false);\n\t\t\t\t\tapp.buttons.editObject2.addEventListener(\"click\", function(evt) { app.resources.objects.display(object.id, false, true, false); evt.preventDefault(); }, false);\n\t\t\t\t}\n\n\t\t\t\tif ( object.attributes.longitude && object.attributes.latitude ) {\n\t\t\t\t\t/* Localization Map */\n\t\t\t\t\tvar map = L.map(\"osm\").setView([parseFloat(object.attributes.latitude), parseFloat(object.attributes.longitude)], 13);\n\t\t\t\t\tL.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {\n\t\t\t\t\t\tattribution: '© <a href=\"//osm.org/copyright\">OpenStreetMap</a>',\n\t\t\t\t\t\tminZoom: 1,\n\t\t\t\t\t\tmaxZoom: 20,\n\t\t\t\t\t\ttrackResize: true,\n\t\t\t\t\t\tdragging: isEdit\n\t\t\t\t\t}).addTo(map);\n\t\t\t\t\tvar popup = L.popup();\n\t\t\t\t\tvar CustomIcon = L.Icon.extend({\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tshadowUrl:\t\t\"/img/m/marker-shadow.png\",\n\t\t\t\t\t\t\ticonSize:\t\t[25, 41],\n\t\t\t\t\t\t\tshadowSize:\t\t[41, 41],\n\t\t\t\t\t\t\ticonAnchor:\t\t[20, 20],\n\t\t\t\t\t\t\tshadowAnchor:\t[20, 20],\n\t\t\t\t\t\t\tpopupAnchor:\t[-3, -76]\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tvar mIcon = new CustomIcon({iconUrl: \"/img/m/marker-icon.png\"});\n\t\t\t\t\tvar marker = L.marker([parseFloat(object.attributes.latitude), parseFloat(object.attributes.longitude)], {icon: mIcon, draggable: isEdit}).addTo(map);\n\t\t\t\t\tif (isEdit !== true) {\n\t\t\t\t\t\tmap.dragging.disable();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmarker.on('dragend', function(event) {\n\t\t\t\t\t\t\tvar position = marker.getLatLng();\n\t\t\t\t\t\t\tmarker.setLatLng(position, {\n\t\t\t\t\t\t\t\tdraggable: true\n\t\t\t\t\t\t\t}).bindPopup(position).update();\n\t\t\t\t\t\t\tdocument.getElementById('Latitude').value = parseFloat(position.lat, 10).toFixed(6);\n\t\t\t\t\t\t\tdocument.getElementById('Longitude').value = parseFloat(position.lng, 10).toFixed(6);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t//map.on('click', onMapClick);\n\t\t\t\t\tsetTimeout(function() {map.invalidateSize(true);}, 1000);\n\t\t\t\t\t/* End Localization Map */\n\t\t\t\t}\n\n\t\t\t\tapp.setExpandAction();\n\t\t\t\tapp.setSection(\"object\");\n\t\t\t}\n\t\t})\n\t\t.catch(function (error) {\n\t\t\tif ( localStorage.getItem(\"settings.debug\") == \"true\" ) {\n\t\t\t\ttoast(\"displayObject error occured...\" + error, {timeout:3000, type: \"error\"});\n\t\t\t}\n\t\t});\n\t\tapp.containers.spinner.setAttribute(\"hidden\", true);\n\t},\n\tdisplayPublic: function(id, isAdd, isEdit, isPublic) {\n\t\twindow.scrollTo(0, 0);\n\t\thistory.pushState( {section: \"object\" }, window.location.hash.substr(1), \"#object?id=\"+id );\n\t\tapp.initNewSection(\"object\");\n\t\t\n\t\tapp.containers.spinner.removeAttribute(\"hidden\");\n\t\tapp.containers.spinner.classList.remove(\"hidden\");\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"GET\", headers: myHeaders };\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/objects/\"+id+\"/public\";\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tfetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\tfor (var i=0; i < (response.data).length ; i++ ) {\n\t\t\t\tvar object = response.data[i];\n\n\t\t\t\tdocument.title = (app.sectionsPageTitles[\"object\"]).replace(/%s/g, object.attributes.name);\n\t\t\t\tif ((app.containers.object)) {\n\t\t\t\t\t((app.containers.object).querySelector(\".page-content\")).innerHTML = \"\";;\n\t\t\t\t}\n\t\t\t\tvar node = \"\";\n\t\t\t\tnode = \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+object.id+\"\\\">\";\n\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\tnode += \"\t\t<div class=\\\"mdl-list__item\\\">\";\n\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-primary-content'>\";\n\t\t\t\tnode += \"\t\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.objects+\"</i>\";\n\t\t\t\tnode += \"\t\t\t\t<h2 class=\\\"mdl-card__title-text\\\">\"+object.attributes.name+\"</h2>\";\n\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-secondary-action'>\";\n\t\t\t\tnode += \"\t\t\t\t<button role='button' class='mdl-button mdl-js-button mdl-button--icon right showdescription_button' for='description-\"+object.id+\"'>\";\n\t\t\t\tnode += \"\t\t\t\t\t<i class='material-icons'>expand_more</i>\";\n\t\t\t\tnode += \"\t\t\t\t</button>\";\n\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\tnode += \"\t\t<div class='mdl-cell--12-col hidden' id='description-\"+object.id+\"'>\";\n\n\t\t\t\tnode += app.getField(app.icons.code, \"Id\", object.id, {type: \"input\"});\n\t\t\t\tif ( object.attributes.description || isEdit!==true ) {\n\t\t\t\t\tvar description = object.attributes.description!==undefined?object.attributes.description:\"\";\n\t\t\t\t\tnode += app.getField(app.icons.description, \"Description\", description, {type: \"text\"});\n\t\t\t\t}\n\t\t\t\tif ( object.attributes.meta.created ) {\n\t\t\t\t\tnode += app.getField(app.icons.date, \"Created\", moment(object.attributes.meta.created).format(app.date_format), {type: \"text\"});\n\t\t\t\t}\n\t\t\t\tif ( object.attributes.meta.updated ) {\n\t\t\t\t\tnode += app.getField(app.icons.date, \"Updated\", moment(object.attributes.meta.updated).format(app.date_format), {type: \"text\"});\n\t\t\t\t}\n\t\t\t\tnode += \"\t</div>\";\n\t\t\t\tnode += \"</section>\";\n\t\t\t\t\n\t\t\t\tnode += app.getSubtitle(\"Parameters\");\n\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\tif ( object.attributes.ipv4 || isEdit===true ) {\n\t\t\t\t\tnode += app.getField(\"my_location\", \"IPv4\", object.attributes.ipv4, {type: \"text\", isEdit: isEdit, inputmode: \"numeric\", pattern: app.patterns.ipv4, error:\"IPv4 should be valid.\"});\n\n\t\t\t\t}\n\t\t\t\tif ( object.attributes.ipv6 || isEdit===true ) {\n\t\t\t\t\tnode += app.getField(\"my_location\", \"IPv6\", object.attributes.ipv6, {type: \"text\", isEdit: isEdit, inputmode: \"numeric\", pattern: app.patterns.ipv6, error:\"IPv6 should be valid.\"});\n\t\t\t\t}\n\t\t\t\tnode += \"\t</div>\";\n\t\t\t\tnode += \"</section>\";\n\n\t\t\t\tif ( object.attributes.parameters && object.attributes.parameters.length > -1 ) { \n\t\t\t\t\tnode += app.getSubtitle(\"Custom Parameters\");\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tfor ( var j in object.attributes.parameters ) {\n\t\t\t\t\t\tnode += app.getField(\"note\", object.attributes.parameters[j].name, object.attributes.parameters[j].value, {type: \"text\"});\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t}\n\n\t\t\t\tif ( object.attributes.longitude || object.attributes.latitude || object.attributes.position ) {\n\t\t\t\t\tnode += app.getSubtitle(\"Localization\");\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" style=\\\"padding-bottom: 50px !important;\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tif ( object.attributes.longitude ) {\n\t\t\t\t\t\tnode += app.getField(\"place\", \"Longitude\", object.attributes.longitude, {type: \"text\"});\n\t\t\t\t\t}\n\t\t\t\t\tif ( object.attributes.latitude ) {\n\t\t\t\t\t\tnode += app.getField(\"place\", \"Latitude\", object.attributes.latitude, {type: \"text\"});\n\t\t\t\t\t}\n\t\t\t\t\tif ( object.attributes.position ) {\n\t\t\t\t\t\tnode += app.getField(\"pin_drop\", \"Position/Localization (should be descriptive)\", object.attributes.position, {type: \"text\"});\n\t\t\t\t\t}\n\t\t\t\t\tif ( object.attributes.longitude && object.attributes.latitude ) {\n\t\t\t\t\t\tnode += app.getMap(\"my_location\", \"osm\", object.attributes.longitude, object.attributes.latitude, false, false, false);\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t}\n\n\t\t\t\t(app.containers.object).querySelector(\".page-content\").innerHTML = node;\n\t\t\t\tcomponentHandler.upgradeDom();\n\t\t\t\t\n\t\t\t\tif ( object.attributes.longitude && object.attributes.latitude ) {\n\t\t\t\t\t/* Localization Map */\n\t\t\t\t\tvar map = L.map(\"osm\").setView([parseFloat(object.attributes.latitude), parseFloat(object.attributes.longitude)], 13);\n\t\t\t\t\tL.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {\n\t\t\t\t\t\tattribution: '© <a href=\"//osm.org/copyright\">OpenStreetMap</a>',\n\t\t\t\t\t\tminZoom: 1,\n\t\t\t\t\t\tmaxZoom: 20,\n\t\t\t\t\t\ttrackResize: true,\n\t\t\t\t\t\tdragging: false\n\t\t\t\t\t}).addTo(map);\n\t\t\t\t\tvar popup = L.popup();\n\t\t\t\t\tvar marker = L.marker([parseFloat(object.attributes.latitude), parseFloat(object.attributes.longitude)], {draggable: false}).addTo(map);\n\t\t\t\t\tsetTimeout(function() {map.invalidateSize(true);}, 1000);\n\t\t\t\t\t/* End Localization Map */\n\t\t\t\t}\n\n\t\t\t\tapp.setExpandAction();\n\t\t\t\t// app.setSection(\"object\");\n\t\t\t}\n\t\t})\n\t\t.catch(function (error) {\n\t\t\tif ( localStorage.getItem(\"settings.debug\") == \"true\" ) {\n\t\t\t\ttoast(\"displayObject error occured...\" + error, {timeout:3000, type: \"error\"});\n\t\t\t}\n\t\t});\n\t\tapp.containers.spinner.setAttribute(\"hidden\", true);\n\t},\n\tdisplayAdd: function(object, isAdd, isEdit, isPublic) {\n\t\thistory.pushState( {section: \"object_add\" }, window.location.hash.substr(1), \"#object_add\" );\n\t\tapp.initNewSection(\"object_add\");\n\t\tvar node = \"\";\n\t\tobject.id = object.id!==\"\"?object.id:app.getUniqueId();\n\t\tobject.attributes.longitude = parseFloat(object.attributes.longitude!==\"\"?object.attributes.longitude:0).toFixed(6);\n\t\tobject.attributes.latitude = parseFloat(object.attributes.latitude!==\"\"?object.attributes.latitude:0).toFixed(6);\n\t\tvar description = object.attributes.description!==undefined?object.attributes.description:\"\";\n\t\t\n\t\tnode += app.getSubtitle(\"Description\");\n\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+object.id+\"\\\">\";\n\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\tnode += app.getField(app.icons.name, \"Name\", object.attributes.name, {type: \"text\", id: \"Name\", isEdit: true, pattern: app.patterns.name, error:\"Name should be set and more than 3 chars length.\"});\n\t\tnode += app.getField(app.icons.description, \"Description\", description, {type: \"textarea\", id: \"Description\", isEdit: true});\n\t\tnode += app.getField(app.icons.type, \"Type\", object.attributes.type, {type: \"select\", id: \"Type\", options: app.types, isEdit: true });\n\t\tnode += \"\t</div>\";\n\t\tnode += \"</section>\";\n\t\t\n\t\tnode += app.getSubtitle(\"Security\");\n\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+object.id+\"\\\">\";\n\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\tnode += app.getField(\"verified_user\", \"Secret Key in symmetric signature\", object.attributes.secret_key!==undefined?object.attributes.secret_key:\"\", {type: \"text\", id: \"secret_key\", style:\"text-transform: none !important;\", isEdit: true, pattern: app.patterns.secret_key, error:\"\"});\n\t\tnode += app.getField(\"\", \"\", \"When flow require signed payload, you should provide your secret to verify signature.\", {type: \"text\", isEdit: false});\n\t\tnode += app.getField(\"vpn_key\", \"Secret Key in symmetric cryptography\", object.attributes.secret_key_crypt!==undefined?object.attributes.secret_key_crypt:\"\", {type: \"text\", id: \"secret_key_crypt\", style:\"text-transform: none !important;\", isEdit: true, pattern: app.patterns.secret_key_crypt, error:\"\"});\n\t\tnode += app.getField(\"visibility\", \"Object is private\", object.attributes.is_public!==undefined?object.attributes.is_public:false, {type: \"switch\", id: \"Visibility\", isEdit: true});\n\t\tnode += \"\t</div>\";\n\t\tnode += \"</section>\";\n\n\t\tnode += app.getSubtitle(\"Communication\");\n\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\tnode += \"\t\t<div class=\\\"card-header heading-left\\\">&nbsp;</div>\";\n\t\tnode += app.getField(\"add_to_home_screen\", \"Interface\", \"\", {type: \"select\", id: \"interface\", options: [{name: \"restAPI\", value:\"restAPI\"}, {name: \"messageQueue\", value:\"messageQueue\"}], isEdit: true});\n\t\tnode += app.getField(\"developer_mode\", \"Allow command on/off\", \"\", {type: \"checkbox\", id: \"communication.command_onoff\", isEdit: true});\n\t\tnode += app.getField(\"developer_mode\", \"Allow command lower/upper\", \"\", {type: \"checkbox\", id: \"communication.command_lowerupper\", isEdit: true});\n\t\tnode += app.getField(\"developer_mode\", \"Allow command open/close\", \"\", {type: \"checkbox\", id: \"communication.command_openclose\", isEdit: true});\n\t\tnode += app.getField(\"developer_mode\", \"Allow command setVal/getVal\", \"\", {type: \"checkbox\", id: \"communication.command_setvalgetval\", isEdit: true});\n\t\tnode += \"<div class=\\\"card-header heading-left\\\">&nbsp;</div>\";\n\t\tnode += app.getField(\"web\", \"UI resource ID\", object.attributes.ui_id, {type: \"text\", id:\"ui_id\", isEdit: true, pattern: app.patterns.uuidv4, error:\"Resource should be a valid uuid-v4\"});\n\t\tnode += \"\t</div>\";\n\t\tnode += \"</section>\";\n\t\t\n\t\tnode += app.getSubtitle(\"Over The Air (OTA)\");\n\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\tnode += app.getField(app.icons.code, \"Fqbn string\", object.attributes.fqbn!==undefined?object.attributes.fqbn:\"\", {type: \"text\", style:\"text-transform: none !important;\", id: \"fqbn\", isEdit: true});\n\t\tlet source_versions = new Array();\n\t\tlet sources = new Array();\n\t\tif ( localStorage.getItem(\"sources\") != \"null\" ) {\n\t\t\tJSON.parse(localStorage.getItem(\"sources\")).map(function(source) {\n\t\t\t\tif(source.id==object.attributes.source_id) {\n\t\t\t\t\tsource.subversions.map(function(sv) {\n\t\t\t\t\t\tsource_versions.push({value: `Version ${sv.version} - ${sv.name}`, name: sv.id});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn sources.push({value: source.name, name: source.id});\n\t\t\t});\n\t\t\tsources.push({value: \"-\", name: \"-\"});\n\t\t}\n\t\tsource_versions.push({value: \"Version 0\", name: \"0\"});\n\t\tnode += app.getField(app.icons.sources, \"Arduino Source\", object.attributes.source_id, {type: \"select\", id: \"source_id\", isEdit: true, options: sources });\n\t\tnode += app.getField(app.icons.version, \"Source version\", object.attributes.source_version, {type: \"select\", id: \"source_version\", isEdit: true, options: source_versions });\n\t\tnode += app.getField(\"my_location\", \"IPv4\", object.attributes.ipv4, {type: \"text\", id: \"IPv4\", isEdit: true, inputmode: \"numeric\", pattern: app.patterns.ipv4, error:\"IPv4 should be valid.\"});\n\t\tnode += app.getField(\"my_location\", \"IPv6\", object.attributes.ipv6, {type: \"text\", id: \"IPv6\", isEdit: true, inputmode: \"numeric\", pattern: app.patterns.ipv6, error:\"IPv6 should be valid.\"});\n\t\tnode += \"\t</div>\";\n\t\tnode += \"</section>\";\n\t\t\n\t\tnode += app.getSubtitle(\"Custom Parameters\");\n\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\tnode += app.getField(\"note\", ['Name', 'Value'], [\"\", \"\"], {type: \"2inputs\", pattern: [app.patterns.customAttributeName, app.patterns.customAttributeValue], error: [\"Name should not contains any space nor special char.\", \"Value is free.\"], id: [\"Name[]\", \"Value[]\"], isEdit: true});\n\t\tnode += \"\t</div>\";\n\t\tnode += \"</section>\";\n\n\t\tnode += app.getSubtitle(\"Localization\");\n\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" style=\\\"padding-bottom: 50px !important;\\\">\";\n\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\tnode += app.getField(\"place\", \"Longitude\", object.attributes.longitude, {type: \"text\", id: \"Longitude\", isEdit: true, inputmode: \"numeric\", pattern: app.patterns.longitude, error:\"Longitude should be valid.\"});\n\t\tnode += app.getField(\"place\", \"Latitude\", object.attributes.latitude, {type: \"text\", id: \"Latitude\", isEdit: true, inputmode: \"numeric\", pattern: app.patterns.latitude, error:\"Latitude should be valid.\"});\n\t\tnode += app.getField(\"pin_drop\", \"Position/Localization (should be descriptive)\", object.attributes.position, {type: \"text\", id: \"Position\", isEdit: true, pattern: app.patterns.position, error:\"Should not be longer than 255 chars.\"});\n\t\tnode += app.getMap(\"my_location\", \"osmAdd\", object.attributes.longitude, object.attributes.latitude, false, false, false);\n\t\tnode += \"\t</div>\";\n\t\tnode += \"</section>\";\n\t\t\n\t\tvar btnId = [app.getUniqueId(), app.getUniqueId(), app.getUniqueId()];\n\t\tnode += \"<section class='mdl-grid mdl-cell--12-col fixedActionButtons' data-id='\"+object.id+\"'>\";\n\t\tif( app.isLtr() ) {\n\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t}\n\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\tnode += \"\t\t<button id='\"+btnId[0]+\"' class='back-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+object.id+\"'>\";\n\t\tnode += \"\t\t\t<i class='material-icons'>chevron_left</i>\";\n\t\tnode += \"\t\t\t<label>List</label>\";\n\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[0]+\"'>List all Objects</label>\";\n\t\tnode += \"\t\t</button>\";\n\t\tnode += \"\t</div>\";\n\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-right'>\";\n\t\tnode += \"\t\t<button id='\"+btnId[1]+\"' class='add-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+object.id+\"'>\";\n\t\tnode += \"\t\t\t<i class='material-icons'>edit</i>\";\n\t\tnode += \"\t\t\t<label>Save</label>\";\n\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[1]+\"'>Save new Object</label>\";\n\t\tnode += \"\t\t</button>\";\n\t\tnode += \"\t</div>\";\n\t\tif( !app.isLtr() ) {\n\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t}\n\t\tnode += \"</section>\";\n\n\t\t(app.containers.object_add).querySelector(\".page-content\").innerHTML = node;\n\t\tcomponentHandler.upgradeDom();\n\t\tvar source_id_selector = document.getElementById(\"source_id\");\n\t\tif ( source_id_selector ) {\n\t\t\tsource_id_selector.addEventListener(\"change\", function(e) {\n\t\t\t\tif (e.srcElement.value!==\"-\") {\n\t\t\t\t\tlet subsource = JSON.parse(localStorage.getItem(\"sources\")).find(subsource => subsource.id == e.srcElement.value);\n\t\t\t\t\tlet sel = document.getElementById(\"source_version\");\n\t\t\t\t\tfor (let i = sel.options.length-1; i >= 0; i--) { sel.options[i] = null;}\n\t\t\t\t\tif ((subsource.subversions).length <= 0) {\n\t\t\t\t\t\tlet opt = document.createElement(\"option\");\n\t\t\t\t\t\topt.appendChild( document.createTextNode(\"Version 0\") );\n\t\t\t\t\t\topt.value = 0;\n\t\t\t\t\t\tsel.appendChild(opt);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t(subsource.subversions).map(function(ss) {\n\t\t\t\t\t\t\tlet opt = document.createElement(\"option\");\n\t\t\t\t\t\t\topt.appendChild( document.createTextNode(`Version ${ss.version} - ${ss.name}`) );\n\t\t\t\t\t\t\topt.value = ss.version;\n\t\t\t\t\t\t\tsel.appendChild(opt);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet sel = document.getElementById(\"source_version\");\n\t\t\t\t\tfor (let i = sel.options.length-1; i >= 0; i--) { sel.options[i] = null;}\n\t\t\t\t\tlet opt = document.createElement(\"option\");\n\t\t\t\t\topt.appendChild( document.createTextNode(\"Version 0\") );\n\t\t\t\t\topt.value = 0;\n\t\t\t\t\tsel.appendChild(opt);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tapp.getLocation();\n\t\t/* Localization Map */\n\t\tvar map = L.map(\"osmAdd\").setView([parseFloat(object.attributes.latitude), parseFloat(object.attributes.longitude)], 13);\n\t\tL.tileLayer(\"https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png\", {\n\t\t\tattribution: \"© <a href='//osm.org/copyright'>OpenStreetMap</a>\",\n\t\t\tminZoom: 1,\n\t\t\tmaxZoom: 20,\n\t\t\ttrackResize: true,\n\t\t\tdragging: true\n\t\t}).addTo(map);\n\t\tvar popup = L.popup();\n\t\tvar CustomIcon = L.Icon.extend({\n\t\t\toptions: {\n\t\t\t\tshadowUrl:\t\t\"/img/m/marker-shadow.png\",\n\t\t\t\ticonSize:\t\t[25, 41],\n\t\t\t\tshadowSize:\t\t[41, 41],\n\t\t\t\ticonAnchor:\t\t[20, 20],\n\t\t\t\tshadowAnchor:\t[20, 20],\n\t\t\t\tpopupAnchor:\t[-3, -76]\n\t\t\t}\n\t\t});\n\t\tvar mIcon = new CustomIcon({iconUrl: \"/img/m/marker-icon.png\"});\n\t\tvar marker = L.marker([parseFloat(object.attributes.latitude), parseFloat(object.attributes.longitude)], {icon: mIcon, draggable: true}).addTo(map);\n\t\tmarker.on('dragend', function(event) {\n\t\t\tvar position = marker.getLatLng();\n\t\t\tmarker.setLatLng(position, {\n\t\t\t\tdraggable: true\n\t\t\t}).bindPopup(position).update();\n\t\t\tdocument.getElementById('Latitude').value = parseFloat(position.lat, 10).toFixed(6);\n\t\t\tdocument.getElementById('Longitude').value = parseFloat(position.lng, 10).toFixed(6);\n\t\t});\n\t\tsetTimeout(function() {map.invalidateSize(true);}, 1000);\n\t\t/* End Localization Map */\n\t\t\n\t\tapp.refreshButtonsSelectors();\n\t\tapp.buttons.addObjectBack.addEventListener(\"click\", function(evt) { app.setSection(\"objects\"); evt.preventDefault(); }, false);\n\t\tapp.buttons.addObject.addEventListener(\"click\", function(evt) { app.resources.objects.onAdd(evt); }, false);\n\n\t\tvar element = document.getElementById(\"switch-Visibility\").parentNode;\n\t\tif ( element ) {\n\t\t\telement.addEventListener(\"change\", function(e) {\n\t\t\t\tvar label = e.target.parentElement.querySelector(\"div.mdl-switch__label\");\n\t\t\t\tlabel.innerText = element.classList.contains(\"is-checked\")!==false?\"Object is having a public url\":\"Object is private\";\n\t\t\t});\n\t\t}\n\t\tapp.setExpandAction();\n\t},\n\tdisplayItem: function(object) {\n\t\tvar type = \"objects\";\n\t\tvar name = object.attributes.name!==undefined?object.attributes.name:\"\";\n\t\tvar description = object.attributes.description!==undefined?object.attributes.description.substring(0, app.cardMaxChars):\"\";\n\n\t\tvar element = \"\";\n\t\telement += \"<div class=\\\"mdl-grid mdl-cell\\\" data-action=\\\"view\\\" data-type=\\\"\"+type+\"\\\" data-id=\\\"\"+object.id+\"\\\">\";\n\t\telement += \"\t<div class=\\\"mdl-card mdl-shadow--2dp\\\">\";\n\t\telement += \"\t\t<div class=\\\"mdl-card__title\\\">\";\n\t\telement += \"\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.objects+\"</i>\";\n\t\telement += \"\t\t\t<h3 class=\\\"mdl-card__title-text\\\">\"+name+\"</h3>\";\n\t\telement += \"\t\t</div>\";\n\t\telement += app.getField(null, null, description, {type: \"textarea\", isEdit: false});\n\t\telement += \"<div class='mdl-list__item--three-line small-padding'>\";\n\t\telement += \"\t\t<span class='type' id='\"+object.id+\"-connected'><i class='material-icons md-32'>\"+(object.attributes.is_connected===true?\"flash_on\":\"flash_off\")+\"</i></span>\";\n\t\telement += \"\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+object.id+\"-connected'>\"+(object.attributes.is_connected===true?\"Connected\":\"Disconnected\")+\"</div>\";\n\t\tif ( object.attributes.type ) {\n\t\t\tvar d = app.types.find( function(type) { return type.name == object.attributes.type; });\n\t\t\td = d!==undefined?d:\"\";\n\t\t\telement += \"\t<span class='type' id='\"+object.id+\"-type'><i class='material-icons md-32'>\"+d.name+\"</i></span>\";\n\t\t\telement += \"\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+object.id+\"-type'>\"+d.value+\"</div>\";\n\t\t}\n\t\tif ( object.attributes.is_public == \"true\" ) {\n\t\t\telement += \"\t<span class='isPublic' id='\"+object.id+\"-isPublic'><i class='material-icons md-32'>visibility</i></span>\";\n\t\t\telement += \"\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+object.id+\"-isPublic'>Public</div>\";\n\t\t}\n\t\tif ( (object.attributes.longitude && object.attributes.latitude) || object.attributes.position ) {\n\t\t\telement += \"\t<span class='isLocalized' id='\"+object.id+\"-isLocalized'><i class='material-icons md-32'>location_on</i></span>\";\n\t\t\telement += \"\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+object.id+\"-isLocalized'>Localized</div>\";\t\n\t\t}\n\t\tif ( object.attributes.secret_key != \"\" ) {\n\t\t\telement += \"\t<span class='Signature' id='\"+object.id+\"-Signature'><i class='material-icons md-32'>verified_user</i></span>\";\n\t\t\telement += \"\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+object.id+\"-Signature'>Signature Secret Key</div>\";\n\t\t}\n\t\tif ( object.attributes.secret_key_crypt != \"\" ) {\n\t\t\telement += \"\t<span class='Crypt' id='\"+object.id+\"-Crypt'><i class='material-icons md-32'>vpn_key</i></span>\";\n\t\t\telement += \"\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+object.id+\"-Crypt'>Encryption Secret Key</div>\";\n\t\t}\n\t\tif ( object.attributes.ui_id!==\"\" && typeof object.attributes.ui_id!==\"undefined\" ) {\n\t\t\telement += \"\t<span class='Crypt' id='\"+object.id+\"-UI'><i class='material-icons md-32'>web</i></span>\";\n\t\t\telement += \"\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+object.id+\"-UI'>User Interface</div>\";\n\t\t}\n\t\telement += `\n\t\t\t\t</div>\n\t\t\t\t<div class=\"mdl-card__actions mdl-card--border\">\n\t\t\t\t\t<span class=\"pull-left mdl-card__date\">\n\t\t\t\t\t\t<button data-id=\"\"+object.id+\"\" class=\"swapDate mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect\">\n\t\t\t\t\t\t\t<i class=\"material-icons\">update</i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<span data-date=\"created\" class=\"visible\">Created on ${moment(object.attributes.meta.created).format(app.date_format)}\"</span>`;\n\t\tif ( object.attributes.meta.updated ) {\n\t\t\telement += `<span data-date=\"updated\" class=\"hidden\">Updated on ${moment(object.attributes.meta.updated).format(app.date_format)}</span>`;\n\t\t} else {\n\t\t\telement += `<span data-date=\"updated\" class=\"hidden\">Never been updated yet.</span>`;\n\t\t}\n\t\telement += `\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"pull-right mdl-card__menuaction\">\n\t\t\t\t\t\t<button id=\"menu_${object.id}\" class=\"mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect\">\n\t\t\t\t\t\t\t<i class=\"material-icons\">${app.icons.menu}</i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</span>\n\t\t\t\t\t<ul class=\"mdl-menu mdl-menu--top-right mdl-js-menu mdl-js-ripple-effect\" for=\"menu_${object.id}\">\n\t\t\t\t\t\t<li class=\"mdl-menu__item delete-button\">\n\t\t\t\t\t\t\t<a class='mdl-navigation__link'><i class=\"material-icons delete-button mdl-js-button mdl-js-ripple-effect\" data-id=\"${object.id}\" data-name=\"${name}\">${app.icons.delete}</i>Delete</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"mdl-menu__item\">\n\t\t\t\t\t\t\t<a class='mdl-navigation__link'><i class=\"material-icons edit-button mdl-js-button mdl-js-ripple-effect\" data-id=\"${object.id}\" data-name=\"${name}\">${app.icons.edit}</i>Edit</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"mdl-menu__item\">\n\t\t\t\t\t\t\t<a class='mdl-navigation__link'><i class=\"material-icons copy-button mdl-js-button mdl-js-ripple-effect\" data-id=\"${object.id}\">${app.icons.copy}</i><textarea class=\"copytextarea\">${object.id}</textarea>Copy ID to clipboard</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>`;\n\t\treturn element;\n\t}\n};","\"use strict\";\napp.resources.flows = {\n\tonEdit: function(evt) {\n\t\tvar flow_id = evt.target.parentNode.getAttribute(\"data-id\")?evt.target.parentNode.getAttribute(\"data-id\"):evt.target.getAttribute(\"data-id\");\n\t\tif ( !flow_id ) {\n\t\t\ttoast(\"No Flow id found!\", {timeout:3000, type: \"error\"});\n\t\t} else {\n\t\t\tvar myForm = evt.target.parentNode.parentNode.parentNode.parentNode;\n\t\t\t\n\t\t\tconsole.log(myForm.querySelector(\"input[name='MQTT Topic']\").value);\n\t\t\tvar body = {\n\t\t\t\tname: myForm.querySelector(\"input[name='Name']\").value,\n\t\t\t\tmqtt_topic: myForm.querySelector(\"input[name='MQTT Topic']\").value,\n\t\t\t\tdata_type: myForm.querySelector(\"select[name='DataType']\").value,\n\t\t\t\tunit: myForm.querySelector(\"select[name='Unit']\").value,\n\t\t\t\trequire_signed: myForm.querySelector(\"label.mdl-switch[data-id='switch-edit_require_signed']\").classList.contains(\"is-checked\")===true?\"true\":\"false\",\n\t\t\t\trequire_encrypted: myForm.querySelector(\"label.mdl-switch[data-id='switch-edit_require_encrypted']\").classList.contains(\"is-checked\")===true?\"true\":\"false\",\n\t\t\t\tmeta: {revision: myForm.querySelector(\"input[name='meta.revision']\").value, },\n\t\t\t};\n\n\t\t\tvar myHeaders = new Headers();\n\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\tvar myInit = { method: \"PUT\", headers: myHeaders, body: JSON.stringify(body) };\n\t\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/flows/\"+flow_id;\n\t\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse){ \n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tapp.setSection(\"flows\");\n\t\t\t\tvar flowsList = JSON.parse(localStorage.getItem(\"flows\"));\n\t\t\t\tapp.flows = [];\n\t\t\t\tflowsList.map(function(fl) {\n\t\t\t\t\tif( fl.id == flow_id ) {\n\t\t\t\t\t\tapp.flows.push( {id: fl.id, name:response.flow.data.attributes.name, type: response.flow.data.type} );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.flows.push( {id: fl.id, name:fl.name, type: fl.type} );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlocalStorage.setItem(\"flows\", JSON.stringify(app.flows));\n\t\t\t\ttoast(\"Flow has been saved.\", {timeout:3000, type: \"done\"});\n\t\t\t\t//var flowContainer = document.querySelector(\"section#flows div[data-id=\"\"+flow_id+\"\"]\");\n\t\t\t\t//flowContainer.querySelector(\"h2\").innerHTML = body.name;\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\ttoast(\"Flow has not been saved.\"+error, {timeout:3000, type: \"error\"});\n\t\t\t});\n\t\t\tevt.preventDefault();\n\t\t}\n\t},\n\tonAdd: function(evt) {\n\t\tvar myForm = evt.target.parentNode.parentNode.parentNode.parentNode;\n\t\tvar body = {\n\t\t\tname: myForm.querySelector(\"input[name='Name']\").value,\n\t\t\tmqtt_topic: myForm.querySelector(\"input[name='MQTT Topic']\").value,\n\t\t\tdata_type: myForm.querySelector(\"select[name='DataType']\").value,\n\t\t\tunit: myForm.querySelector(\"select[name='Unit']\").value,\n\t\t\trequire_signed: myForm.querySelector(\"label.mdl-switch[data-id='switch-add_require_signed']\").classList.contains(\"is-checked\")===true?\"true\":\"false\",\n\t\t\trequire_encrypted: myForm.querySelector(\"label.mdl-switch[data-id='switch-add_require_encrypted']\").classList.contains(\"is-checked\")===true?\"true\":\"false\",\n\t\t};\n\t\tif ( localStorage.getItem(\"settings.debug\") == \"true\" ) {\n\t\t\tconsole.log(\"DEBUG onAddFlow\", JSON.stringify(body));\n\t\t}\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"POST\", headers: myHeaders, body: JSON.stringify(body) };\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/flows/\";\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\tapp.setSection(\"flows\");\n\t\t\tvar flowsList = new Array();\n\t\t\tif ( JSON.parse(localStorage.getItem(\"flows\")) != \"null\" && JSON.parse(localStorage.getItem(\"flows\")).length > -1 ) {\n\t\t\t\tflowsList = JSON.parse(localStorage.getItem(\"flows\"));\n\t\t\t}\n\t\t\tflowsList.push({id: response.flow.data.id, name:response.flow.data.attributes.name, type: response.flow.data.type});\n\t\t\tlocalStorage.setItem(\"flows\", JSON.stringify(flowsList));\n\t\t\ttoast(\"Flow has been added.\", {timeout:3000, type: \"done\"});\n\t\t})\n\t\t.catch(function (error) {\n\t\t\ttoast(\"Flow has not been added.\", {timeout:3000, type: \"error\"});\n\t\t});\n\t\tevt.preventDefault();\n\t},\n\tonDelete: function(flow_id) {\n\t\tvar flowsList = JSON.parse(localStorage.getItem(\"flows\"));\n\t\tapp.flows = [];\n\t\tflowsList.filter(function(fl) {\n\t\t\tif( fl.id != flow_id ) {\n\t\t\t\tapp.flows.push( {id: fl.id, name:fl.name, type: fl.type} );\n\t\t\t}\n\t\t});\n\t\tlocalStorage.setItem(\"flows\", JSON.stringify(app.flows));\n\t},\n\tdisplay: function(id, isAdd, isEdit, isPublic) {\n\t\thistory.pushState( {section: \"flow\" }, window.location.hash.substr(1), \"#flow?id=\"+id );\n\t\tapp.initNewSection(\"flow\");\n\t\t\n\t\twindow.scrollTo(0, 0);\n\t\tapp.containers.spinner.removeAttribute(\"hidden\");\n\t\tapp.containers.spinner.classList.remove(\"hidden\");\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"GET\", headers: myHeaders };\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/flows/\"+id;\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\tfor (var i=0; i < (response.data).length ; i++ ) {\n\t\t\t\tvar flow = response.data[i];\n\t\t\t\tdocument.title = (app.sectionsPageTitles[\"flow\"]).replace(/%s/g, flow.attributes.name);\n\t\t\t\tif ((app.containers.flow)) {\n\t\t\t\t\t((app.containers.flow).querySelector(\".page-content\")).innerHTML = \"\";\n\t\t\t\t}\n\t\t\t\tvar datapoints = \"\";\n\t\t\t\t\n\t\t\t\tvar node = \"\";\n\t\t\t\tnode = \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+flow.id+\"\\\">\";\n\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\tnode += \"\t\t<div class=\\\"mdl-list__item\\\">\";\n\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-primary-content'>\";\n\t\t\t\tnode += \"\t\t\t\t<i class=\\\"material-icons mdl-textfield__icon\\\">\"+app.icons.flows+\"</i>\";\n\t\t\t\tnode += \"\t\t\t\t<h2 class=\\\"mdl-card__title-text\\\">\"+flow.attributes.name+\"</h2>\";\n\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-secondary-action'>\";\n\t\t\t\tnode += \"\t\t\t\t<button role='button' class='mdl-button mdl-js-button mdl-button--icon right showdescription_button' for='description-\"+flow.id+\"'>\";\n\t\t\t\tnode += \"\t\t\t\t\t<i class='material-icons'>expand_more</i>\";\n\t\t\t\tnode += \"\t\t\t\t</button>\";\n\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\tnode += \"\t\t<div class='mdl-cell--12-col hidden' id='description-\"+flow.id+\"'>\";\n\n\t\t\t\tnode += app.getField(app.icons.code, \"Id\", flow.id, {type: \"text\", style:\"text-transform: none !important;\"});\n\t\t\t\tif ( flow.attributes.description && isEdit!==true ) {\n\t\t\t\t\tnode += app.getField(app.icons.description, \"Description\", app.nl2br(flow.attributes.description), {type: \"text\"});\n\t\t\t\t}\n\t\t\t\tif ( flow.attributes.meta.created ) {\n\t\t\t\t\tnode += app.getField(app.icons.date, \"Created\", moment(flow.attributes.meta.created).format(app.date_format), {type: \"text\"});\n\t\t\t\t}\n\t\t\t\tif ( flow.attributes.meta.updated ) {\n\t\t\t\t\tnode += app.getField(app.icons.date, \"Updated\", moment(flow.attributes.meta.updated).format(app.date_format), {type: \"text\"});\n\t\t\t\t}\n\t\t\t\tif ( flow.attributes.meta.revision ) {\n\t\t\t\t\tnode += app.getField(app.icons.update, \"Revision\", flow.attributes.meta.revision, {type: \"text\"});\n\t\t\t\t}\n\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\tnode += \"\t</div>\";\n\t\t\t\tnode += \"</section>\";\n\t\t\t\t\n\t\t\t\tvar btnId = [app.getUniqueId(), app.getUniqueId(), app.getUniqueId()];\n\t\t\t\tif ( isEdit ) {\n\t\t\t\t\tif ( !localStorage.getItem(\"units\") ) {\n\t\t\t\t\t\tapp.getUnits();\n\t\t\t\t\t}\n\t\t\t\t\tvar allUnits = JSON.parse(localStorage.getItem(\"units\"));\n\n\t\t\t\t\tif ( !localStorage.getItem(\"datatypes\") ) {\n\t\t\t\t\t\tapp.getDatatypes();\n\t\t\t\t\t}\n\t\t\t\t\tvar allDatatypes = JSON.parse(localStorage.getItem(\"datatypes\"));\n\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tnode += app.getField(null, \"meta.revision\", flow.attributes.meta.revision, {type: \"hidden\", id: \"meta.revision\", pattern: app.patterns.meta_revision});\n\t\t\t\t\tnode += app.getField(app.icons.name, \"Name\", flow.attributes.name!==undefined?flow.attributes.name:\"\", {type: \"text\", id: \"Name\", isEdit: isEdit});\n\t\t\t\t\t//var description = flow.attributes.description!==undefined?app.nl2br(flow.attributes.description):\"\";\n\t\t\t\t\t//node += app.getField(app.icons.description, \"Description\", description, {type: \"text\", id: \"Description\", isEdit: isEdit});\n\t\t\t\t\tnode += app.getField(app.icons.mqtts, \"MQTT Topic\", flow.attributes.mqtt_topic!==undefined?flow.attributes.mqtt_topic:\"\", {type: \"text\", style:\"text-transform: none !important;\", id: \"MQTTTopic\", isEdit: isEdit});\n\t\t\t\t\tnode += app.getField(app.icons.units, \"Unit\", flow.attributes.unit, {type: \"select\", id: \"Unit\", isEdit: true, options: allUnits });\n\t\t\t\t\tnode += app.getField(app.icons.datatypes, \"DataType\", flow.attributes.data_type, {type: \"select\", id: \"DataType\", isEdit: true, options: allDatatypes });\n\t\t\t\t\tnode += app.getField(\"verified_user\", flow.attributes.require_signed!==false?\"Require signed payload from Object\":\"Does not require signed payload from Object\", flow.attributes.require_signed, {type: \"switch\", id: \"edit_require_signed\", isEdit: isEdit});\n\t\t\t\t\tnode += app.getField(\"vpn_key\", flow.attributes.require_encrypted!==false?\"Require encrypted payload from Object\":\"Does not require encrypted payload from Object\", flow.attributes.require_encrypted, {type: \"switch\", id: \"edit_require_encrypted\", isEdit: isEdit});\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\n\t\t\t\t\tnode += \"<section class='mdl-grid mdl-cell--12-col fixedActionButtons' data-id='\"+id+\"'>\";\n\t\t\t\t\tif( app.isLtr() ) node += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[0]+\"' class='back-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>chevron_left</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>View</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[0]+\"'>View Flow</div>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-right'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[1]+\"' class='save-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>save</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Save</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[1]+\"'>Save Flow</div>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tif( !app.isLtr() ) node += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tif ( flow.attributes.type ) {\n\t\t\t\t\t\tnode += app.getField(\"extension\", \"Type\", flow.attributes.type, {type: \"text\", id: \"Type\", isEdit: isEdit});\n\t\t\t\t\t}\n\t\t\t\t\tif ( flow.attributes.mqtt_topic ) {\n\t\t\t\t\t\tnode += app.getField(app.icons.mqtts, \"MQTT Topic\", flow.attributes.mqtt_topic, {type: \"text\", style:\"text-transform: none !important;\", id: \"MQTTTopic\", isEdit: isEdit});\n\t\t\t\t\t}\n\t\t\t\t\tif ( flow.attributes.unit && localStorage.getItem(\"units\") !== \"null\" && JSON.parse(localStorage.getItem(\"units\")) ) {\n\t\t\t\t\t\tvar unit = JSON.parse(localStorage.getItem(\"units\")).find( function(u) { return u.name == flow.attributes.unit; });\n\t\t\t\t\t\tnode += app.getField(app.icons.units, \"Unit\", unit.value, {type: \"select\", id: \"Unit\", isEdit: isEdit, options: app.units });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.getUnits();\n\t\t\t\t\t}\n\t\t\t\t\tif ( flow.attributes.data_type ) {\n\t\t\t\t\t\tvar datatype = JSON.parse(localStorage.getItem(\"datatypes\")).find( function(d) { return d.name == flow.attributes.data_type; }).value;\n\t\t\t\t\t\tnode += app.getField(app.icons.datatypes, \"DataType\", datatype, {type: \"select\", id: \"DataType\", isEdit: isEdit, options: app.datatypes });\n\t\t\t\t\t}\n\t\t\t\t\tnode += app.getField(\"verified_user\", flow.attributes.require_signed!==false?\"Require signed payload from Object\":\"Does not require signed payload from Object\", flow.attributes.require_signed, {type: \"switch\", id: \"show_require_signed\", isEdit: isEdit});\n\t\t\t\t\tnode += app.getField(\"vpn_key\", flow.attributes.require_encrypted!==false?\"Require encrypted payload from Object\":\"Does not require encrypted payload from Object\", flow.attributes.require_encrypted, {type: \"switch\", id: \"show_require_encrypted\", isEdit: isEdit});\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t\t\n\t\t\t\t\tnode += \"<section class='mdl-grid mdl-cell--12-col' id='\"+flow.id+\"'>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--12-col mdl-card mdl-shadow--2dp'>\";\n\t\t\t\t\tnode += \"\t\t<span class='mdl-list__item mdl-list__item--two-line'>\";\n\t\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-primary-content'>\";\n\t\t\t\t\tnode +=\t\"\t\t\t\t<span>\"+flow.attributes.name+\" (\"+unit.value+\"/\"+datatype+\")</span>\";\n\t\t\t\t\tnode +=\t\"\t\t\t\t<span class='mdl-list__item-sub-title' id='flow-graph-time-\"+flow.id+\"'></span>\";\n\t\t\t\t\tnode +=\t\"\t\t\t</span>\";\n\t\t\t\t\tnode +=\t\"\t\t</span>\";\n\t\t\t\t\tnode += \"\t\t<span class='mdl-list__item' id='flow-graph-\"+flow.id+\"' style='width:100%; height:280px;'>\";\n\t\t\t\t\tnode += \"\t\t</span>\";\n\t\t\t\t\tnode +=\t\"\t</div>\";\n\t\t\t\t\tnode +=\t\"</section>\";\n\n\t\t\t\t\tnode += \"<section class='mdl-grid mdl-cell--12-col fixedActionButtons' data-id='\"+flow.id+\"'>\";\n\t\t\t\t\tif( app.isLtr() ) {\n\t\t\t\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[0]+\"' class='list-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+flow.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>chevron_left</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>List</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[0]+\"'>List all Flows</div>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone delete-button'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[1]+\"' class='delete-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+flow.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>delete</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Delete</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[1]+\"'>Delete Flow...</div>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-right'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[2]+\"' class='edit-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+flow.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>edit</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Edit</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[2]+\"'>Edit Flow</div>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tif( !app.isLtr() ) {\n\t\t\t\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar c = document.createElement(\"div\");\n\t\t\t\tc.className = \"page-content mdl-grid mdl-grid--no-spacing\";\n\t\t\t\tc.dataset.idsupercoollllll = flow.id;\n\t\t\t\tc.innerHTML = node;\n\t\t\t\t(app.containers.flow).querySelector(\".page-content\").remove();\n\t\t\t\t(app.containers.flow).appendChild(c);\n\n\t\t\t\tapp.refreshButtonsSelectors();\n\t\t\t\tif ( isEdit ) {\n\t\t\t\t\tapp.buttons.backFlow.addEventListener(\"click\", function(evt) { app.resources.flows.display(flow.id, false, false, false); }, false);\n\t\t\t\t\tapp.buttons.saveFlow.addEventListener(\"click\", function(evt) { app.resources.flows.onEdit(evt); }, false);\n\n\t\t\t\t\tvar element1 = document.getElementById(\"switch-edit_require_signed\").parentNode;\n\t\t\t\t\tif ( element1 ) {\n\t\t\t\t\t\telement1.addEventListener(\"change\", function(e) {\n\t\t\t\t\t\t\tvar label = e.target.parentElement.querySelector(\"div.mdl-switch__label\");\n\t\t\t\t\t\t\tlabel.innerText = element1.classList.contains(\"is-checked\")!==false?\"Require signed payload from Object\":\"Does not require signed payload from Object\";\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tvar element2 = document.getElementById(\"switch-edit_require_encrypted\").parentNode;\n\t\t\t\t\tif ( element2 ) {\n\t\t\t\t\t\telement2.addEventListener(\"change\", function(e) {\n\t\t\t\t\t\t\tvar label = e.target.parentElement.querySelector(\"div.mdl-switch__label\");\n\t\t\t\t\t\t\tlabel.innerText = element2.classList.contains(\"is-checked\")!==false?\"Require encrypted payload from Object\":\"Does not require encrypted payload from Object\";\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tapp.buttons.listFlow.addEventListener(\"click\", function(evt) { app.setSection(\"flows\"); evt.preventDefault(); }, false);\n\t\t\t\t\t// buttons.deleteFlow2.addEventListener(\"click\",\n\t\t\t\t\t// function(evt) { console.log(\"SHOW MODAL AND CONFIRM!\");\n\t\t\t\t\t// }, false);\n\t\t\t\t\tapp.buttons.editFlow2.addEventListener(\"click\", function(evt) { app.resources.flows.display(flow.id, false, true, false); }, false);\n\t\t\t\t}\n\t\t\t\tcomponentHandler.upgradeDom();\n\t\t\t\tapp.setExpandAction();\n\t\t\t\tapp.setSection(\"flow\");\n\t\t\t\t\n\t\t\t\tlet width = document.getElementById(\"flow-graph-\"+flow.id).offsetWidth;\n\t\t\t\tlet height = 250;\n\t\t\t\tlet svgUrl = `${app.baseUrl}/${app.api_version}/exploration?flow_id=${flow.id}&&select=mean&group=30d&dateFormat=MMM&start=${moment().format(\"YYYY\")}-02-01 00:00:00&limit=1000&sort=asc&page=0&graphType=bar&width=${width}&height=${height}&xAxis=Months&yAxis=MEAN value (${unit})`;\n\n\t\t\t\tfetch(svgUrl, myInit)\n\t\t\t\t.then(\n\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t)\n\t\t\t\t.then(response => response.text())\n\t\t\t\t.then(svg => document.getElementById(\"flow-graph-\"+flow.id).insertAdjacentHTML(\"afterbegin\", svg));\n\t\t\t}\n\t\t})\n\t\t.catch(function (error) {\n\t\t\tif ( localStorage.getItem(\"settings.debug\") == \"true\" ) {\n\t\t\t\ttoast(\"displayFlow error occured...\" + error, {timeout:3000, type: \"error\"});\n\t\t\t}\n\t\t});\n\t\tapp.containers.spinner.setAttribute(\"hidden\", true);\n\t},\n\tdisplayPublic: function(id, isAdd, isEdit, isPublic) {\n\t},\n\tdisplayAdd: function(flow, isAdd, isEdit, isPublic) {\n\t\thistory.pushState( {section: \"flow_add\" }, window.location.hash.substr(1), \"#flow_add\" );\n\t\tapp.initNewSection(\"flow_add\");\n\t\tif ( !localStorage.getItem(\"units\") ) {\n\t\t\tapp.getUnits();\n\t\t}\n\t\tvar allUnits = JSON.parse(localStorage.getItem(\"units\"));\n\n\t\tif ( !localStorage.getItem(\"datatypes\") ) {\n\t\t\tapp.getDatatypes();\n\t\t}\n\t\tvar allDatatypes = JSON.parse(localStorage.getItem(\"datatypes\"));\n\t\t\n\t\tvar node = \"\";\n\t\tnode = \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+flow.id+\"\\\">\";\n\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\tnode += app.getField(app.icons.flows, \"Name\", flow.attributes.name, {type: \"text\", id: \"Name\", isEdit: true, pattern: app.patterns.name, error:\"Name should be set and more than 3 chars length.\"});\n\t\tnode += app.getField(app.icons.mqtts, \"MQTT Topic\", flow.attributes.mqtt_topic, {type: \"text\", id: \"MQTTTopic\", isEdit: true});\n\t\tnode += app.getField(app.icons.units, \"Unit\", flow.attributes.unit, {type: \"select\", id: \"Unit\", isEdit: true, options: allUnits });\n\t\tnode += app.getField(app.icons.datatypes, \"DataType\", flow.attributes.datatype, {type: \"select\", id: \"DataType\", isEdit: true, options: allDatatypes });\n\t\tnode += app.getField(\"verified_user\", flow.attributes.require_signed!==false?\"Does not require signed payload  from Object\":\"Does not require signed payload from Object\", flow.attributes.require_signed, {type: \"switch\", id: \"add_require_signed\", isEdit: true});\n\t\tnode += app.getField(\"vpn_key\", flow.attributes.require_encrypted!==false?\"Does not require encrypted payload from Object\":\"Does not require encrypted payload from Object\", flow.attributes.require_encrypted, {type: \"switch\", id: \"add_require_encrypted\", isEdit: true});\n\t\tnode += \"\t</div>\";\n\t\tnode += \"</section>\";\n\t\t\n\t\tvar btnId = [app.getUniqueId(), app.getUniqueId(), app.getUniqueId()];\n\t\tnode += \"<section class='mdl-grid mdl-cell--12-col fixedActionButtons' data-id='\"+flow.id+\"'>\";\n\t\tif( app.isLtr() ) {\n\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t}\n\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\tnode += \"\t\t<button id='\"+btnId[0]+\"' class='back-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+flow.id+\"'>\";\n\t\tnode += \"\t\t\t<i class='material-icons'>chevron_left</i>\";\n\t\tnode += \"\t\t\t<label>List</label>\";\n\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[0]+\"'>List all Flows</label>\";\n\t\tnode += \"\t\t</button>\";\n\t\tnode += \"\t</div>\";\n\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-right'>\";\n\t\tnode += \"\t\t<button id='\"+btnId[1]+\"' class='add-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+flow.id+\"'>\";\n\t\tnode += \"\t\t\t<i class='material-icons'>edit</i>\";\n\t\tnode += \"\t\t\t<label>Save</label>\";\n\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[1]+\"'>Save new Flow</label>\";\n\t\tnode += \"\t\t</button>\";\n\t\tnode += \"\t</div>\";\n\t\tif( !app.isLtr() ) {\n\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t}\n\t\tnode += \"</section>\";\n\n\t\t(app.containers.flow_add).querySelector(\".page-content\").innerHTML = node;\n\t\tcomponentHandler.upgradeDom();\n\t\t\n\t\tapp.refreshButtonsSelectors();\n\t\tapp.buttons.addFlowBack.addEventListener(\"click\", function(evt) { app.setSection(\"flows\"); evt.preventDefault(); }, false);\n\t\tapp.buttons.addFlow.addEventListener(\"click\", function(evt) { app.resources.flows.onAdd(evt); }, false);\n\n\t\tvar element1 = document.getElementById(\"switch-add_require_signed\").parentNode;\n\t\tif ( element1 ) {\n\t\t\telement1.addEventListener(\"change\", function(e) {\n\t\t\t\tvar label = e.target.parentElement.querySelector(\"div.mdl-switch__label\");\n\t\t\t\tlabel.innerText = element1.classList.contains(\"is-checked\")!==false?\"Require signed payload from Object\":\"Does not require signed payload from Object\";\n\t\t\t});\n\t\t}\n\t\tvar element2 = document.getElementById(\"switch-add_require_encrypted\").parentNode;\n\t\tif ( element2 ) {\n\t\t\telement2.addEventListener(\"change\", function(e) {\n\t\t\t\tvar label = e.target.parentElement.querySelector(\"div.mdl-switch__label\");\n\t\t\t\tlabel.innerText = element2.classList.contains(\"is-checked\")!==false?\"Require encrypted payload from Object\":\"Does not require encrypted payload from Object\";\n\t\t\t});\n\t\t}\n\t\tapp.setExpandAction();\n\t},\n\tdisplayItem: function(flow) {\n\t\tvar type = \"flows\";\n\t\tvar name = flow.attributes.name!==undefined?flow.attributes.name:\"\";\n\t\tvar description = flow.attributes.description!==undefined?flow.attributes.description.substring(0, app.cardMaxChars):\"\";\n\t\tvar attributeType = flow.attributes.type!==undefined?flow.attributes.type:\"\";\n\t\t\n\t\tvar element = \"\";\n\t\telement += \"<div class=\\\"mdl-grid mdl-cell\\\" data-action=\\\"view\\\" data-type=\\\"\"+type+\"\\\" data-id=\\\"\"+flow.id+\"\\\">\";\n\t\telement += \"\t<div class=\\\"mdl-card mdl-shadow--2dp\\\">\";\n\t\telement += \"\t\t<div class=\\\"mdl-card__title\\\">\";\n\t\telement += \"\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.flows+\"</i>\";\n\t\telement += \"\t\t\t<h3 class=\\\"mdl-card__title-text\\\">\"+name+\"</h3>\";\n\t\telement += \"\t\t</div>\";\n\t\telement += \"<div class='mdl-list__item--three-line small-padding'>\";\n\t\tif ( flow.attributes.unit ) {\n\t\t\telement += \"\t<div class='mdl-list__item-sub-title'>\";\n\t\t\tif ( localStorage.getItem(\"units\") !== \"null\" && JSON.parse(localStorage.getItem(\"units\")) ) {\n\t\t\t\telement += \"\t\t<i class='material-icons md-28'>\"+app.icons.units+\"</i>\"+JSON.parse(localStorage.getItem(\"units\")).find( function(u) { return u.name == flow.attributes.unit; }).value;\n\t\t\t} else {\n\t\t\t\telement += \"\t\t<i class='material-icons md-28'>\"+app.icons.units+\"</i> ?\";\n\t\t\t}\n\t\t\telement += \"\t</div>\";\n\t\t}\n\t\tif ( flow.attributes.data_type ) {\n\t\t\telement += \"\t<div class='mdl-list__item-sub-title'>\";\n\t\t\telement += \"\t\t<i class='material-icons md-28'>\"+app.icons.datatypes+\"</i>\"+JSON.parse(localStorage.getItem(\"datatypes\")).find( function(d) { return d.name == flow.attributes.data_type; }).value;\n\t\t\telement += \"\t</div>\";\n\t\t}\n\t\tif ( flow.attributes.require_signed === true ) {\n\t\t\telement += \"\t<div class='mdl-list__item-sub-title'>\";\n\t\t\telement += \"\t\t<i class='material-icons md-28'>verified_user</i> Require signed payload from Object\";\n\t\t\telement += \"\t</div>\";\n\t\t}\n\t\tif ( flow.attributes.require_encrypted === true ) {\n\t\t\telement += \"\t<div class='mdl-list__item-sub-title'>\";\n\t\t\telement += \"\t\t<i class='material-icons md-28'>vpn_key</i> Require encrypted payload from Object\";\n\t\t\telement += \"\t</div>\";\n\t\t}\n\t\telement += \"</div>\";\n\t\telement += \"\t\t<div class=\\\"mdl-card__actions mdl-card--border\\\">\";\n\t\telement += \"\t\t\t<span class=\\\"pull-left mdl-card__date\\\">\";\n\t\telement += \"\t\t\t\t<button data-id=\\\"\"+flow.id+\"\\\" class=\\\"swapDate mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect\\\">\";\n\t\telement += \"\t\t\t\t\t<i class=\\\"material-icons\\\">update</i>\";\n\t\telement += \"\t\t\t\t</button>\";\n\t\telement += \"\t\t\t\t<span data-date=\\\"created\\\" class=\\\"visible\\\">Created on \"+moment(flow.attributes.meta.created).format(app.date_format) + \"</span>\";\n\t\tif ( flow.attributes.meta.updated ) {\n\t\t\telement += \"\t\t\t\t<span data-date=\\\"updated\\\" class=\\\"hidden\\\">Updated on \"+moment(flow.attributes.meta.updated).format(app.date_format) + \"</span>\";\n\t\t} else {\n\t\t\telement += \"\t\t\t\t<span data-date=\\\"updated\\\" class=\\\"hidden\\\">Never been updated yet.</span>\";\n\t\t}\n\t\telement += \"\t\t\t</span>\";\n\t\telement += \"\t\t\t<span class=\\\"pull-right mdl-card__menuaction\\\">\";\n\t\telement += \"\t\t\t\t<button id=\\\"menu_\"+flow.id+\"\\\" class=\\\"mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect\\\">\";\n\t\telement += \"\t\t\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.menu+\"</i>\";\n\t\telement += \"\t\t\t\t</button>\";\n\t\telement += \"\t\t\t</span>\";\n\t\telement += \"\t\t\t<ul class=\\\"mdl-menu mdl-menu--top-right mdl-js-menu mdl-js-ripple-effect\\\" for=\\\"menu_\"+flow.id+\"\\\">\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item delete-button\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons delete-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+flow.id+\"\\\" data-name=\\\"\"+name+\"\\\">\"+app.icons.delete+\"</i>Delete</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons edit-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+flow.id+\"\\\" data-name=\\\"\"+name+\"\\\">\"+app.icons.edit+\"</i>Edit</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons copy-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+flow.id+\"\\\">\"+app.icons.copy+\"</i><textarea class=\\\"copytextarea\\\">\"+flow.id+\"</textarea>Copy ID to clipboard</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t</ul>\";\n\t\telement += \"\t\t</div>\";\n\t\telement += \"\t</div>\";\n\t\telement += \"</div>\";\n\n\t\treturn element;\n\t}\n};","\"use strict\";\napp.resources.snippets = {\n\tonEdit: function(evt) {\n\t\tvar snippet_id = evt.target.parentNode.getAttribute(\"data-id\")?evt.target.parentNode.getAttribute(\"data-id\"):evt.target.getAttribute(\"data-id\");\n\t\tif ( !snippet_id ) {\n\t\t\ttoast(\"No Snippet id found!\", {timeout:3000, type: \"error\"});\n\t\t} else {\n\t\t\tvar myForm = evt.target.parentNode.parentNode.parentNode.parentNode;\n\t\t\tvar body = {\n\t\t\t\tname: myForm.querySelector(\"input[name='Name']\").value,\n\t\t\t\ttype: myForm.querySelector(\"select[name='Type']\").value,\n\t\t\t\ticon: myForm.querySelector(\"select[name='Icon']\").value,\n\t\t\t\tcolor: myForm.querySelector(\"input[name='Color']\").value,\n\t\t\t\tflows: Array.prototype.map.call(myForm.querySelectorAll(\".mdl-chips .mdl-chip\"), function(flow) { return ((JSON.parse(localStorage.getItem(\"flows\")))[flow.getAttribute(\"data-id\")]).id; }),\n\t\t\t\toptions: myForm.querySelector(\"textarea[name='Graph Options']\").value&&JSON.parse(myForm.querySelector(\"textarea[name='Graph Options']\").value)!==\"undefined\"?JSON.parse(myForm.querySelector(\"textarea[name='Graph Options']\").value):undefined,\n\t\t\t\tmeta: {revision: myForm.querySelector(\"input[name='meta.revision']\").value, },\n\t\t\t};\n\n\t\t\tvar myHeaders = new Headers();\n\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\tvar myInit = { method: \"PUT\", headers: myHeaders, body: JSON.stringify(body) };\n\t\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/snippets/\"+snippet_id;\n\t\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse){ \n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tapp.setSection(\"snippets\");\n\t\t\t\tvar snippetsList = JSON.parse(localStorage.getItem(\"snippets\"));\n\t\t\t\tapp.snippets = [];\n\t\t\t\tsnippetsList.map(function(sn) {\n\t\t\t\t\tif( sn.id == snippet_id ) {\n\t\t\t\t\t\tapp.snippets.push( {id: sn.id, name:response.snippet.data.attributes.name, type: response.snippet.data.type, sType: response.snippet.data.attributes.type});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.snippets.push( {id: sn.id, name:sn.name, type: sn.type} );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlocalStorage.setItem(\"snippets\", JSON.stringify(app.snippets));\n\t\t\t\ttoast(\"Snippet has been saved.\", {timeout:3000, type: \"done\"});\n\t\t\t\t//var snippetContainer = document.querySelector(\"section#snippets div[data-id=\"\"+snippet_id+\"\"]\");\n\t\t\t\t//snippetContainer.querySelector(\"h2\").innerHTML = body.name;\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\ttoast(\"Snippet has not been saved.\", {timeout:3000, type: \"error\"});\n\t\t\t});\n\t\t\tevt.preventDefault();\n\t\t}\n\t},\n\tonAdd: function(evt) {\n\t\tvar myForm = evt.target.parentNode.parentNode.parentNode.parentNode;\n\t\tvar body = {\n\t\t\tname: myForm.querySelector(\"input[name='Name']\").value,\n\t\t\ttype: myForm.querySelector(\"select[name='Type']\").value,\n\t\t\ticon: myForm.querySelector(\"select[name='Icon']\").value,\n\t\t\tcolor: myForm.querySelector(\"input[name='Color']\").value,\n\t\t\toptions: myForm.querySelector(\"textarea[name='Graph Options']\").value&&JSON.parse(myForm.querySelector(\"textarea[name='Graph Options']\").value)!==\"undefined\"?JSON.parse(myForm.querySelector(\"textarea[name='Graph Options']\").value):undefined,\n\t\t\tflows: Array.prototype.map.call(myForm.querySelectorAll(\".mdl-chips .mdl-chip\"), function(flow) { return ((JSON.parse(localStorage.getItem(\"flows\")))[flow.getAttribute(\"data-id\")]).id; }),\n\t\t};\n\t\tif ( localStorage.getItem(\"settings.debug\") == \"true\" ) {\n\t\t\tconsole.log(\"DEBUG onAddSnippet\", JSON.stringify(body));\n\t\t}\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"POST\", headers: myHeaders, body: JSON.stringify(body) };\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/snippets/\";\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\tapp.setSection(\"snippets\");\n\t\t\tvar snippetsList = new Array();\n\t\t\tif ( JSON.parse(localStorage.getItem(\"snippets\")) != \"null\" && JSON.parse(localStorage.getItem(\"snippets\")).length > -1 ) {\n\t\t\t\tsnippetsList = JSON.parse(localStorage.getItem(\"snippets\"));\n\t\t\t}\n\t\t\tsnippetsList.push( {id: response.snippet.data.id, name:response.snippet.data.attributes.name, type: response.snippet.data.type, sType: response.snippet.data.attributes.type});\n\t\t\tlocalStorage.setItem(\"snippets\", JSON.stringify(snippetsList));\n\t\t\ttoast(\"Snippet has been added.\", {timeout:3000, type: \"done\"});\n\t\t})\n\t\t.catch(function (error) {\n\t\t\ttoast(\"Snippet has not been added.\", {timeout:3000, type: \"error\"});\n\t\t});\n\t\tevt.preventDefault();\n\t},\n\tonDelete: function(snippet_id) {\n\t\tvar snippetsList = JSON.parse(localStorage.getItem(\"snippets\"));\n\t\tapp.snippets = [];\n\t\tsnippetsList.filter(function(sn) {\n\t\t\tif( sn.id != snippet_id ) {\n\t\t\t\tapp.snippets.push( {id: sn.id, name:sn.name, type: sn.type} );\n\t\t\t}\n\t\t});\n\t\tlocalStorage.setItem(\"snippets\", JSON.stringify(app.snippets));\n\t},\n\tdisplay: function(id, isAdd, isEdit, isPublic) {\n\t\thistory.pushState( {section: \"snippet\" }, window.location.hash.substr(1), \"#snippet?id=\"+id );\n\t\tapp.initNewSection(\"snippet\");\n\n\t\twindow.scrollTo(0, 0);\n\t\tapp.containers.spinner.removeAttribute(\"hidden\");\n\t\tapp.containers.spinner.classList.remove(\"hidden\");\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"GET\", headers: myHeaders };\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/snippets/\"+id;\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\tfor (var i=0; i < (response.data).length ; i++ ) {\n\t\t\t\tvar snippet = response.data[i];\n\t\t\t\tdocument.title = (app.sectionsPageTitles[\"snippet\"]).replace(/%s/g, snippet.attributes.name);\n\t\t\t\tvar node;\n\t\t\t\tvar btnId = [app.getUniqueId(), app.getUniqueId(), app.getUniqueId()];\n\t\t\t\tif ( isEdit ) {\n\n\t\t\t\t\tnode = \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+snippet.id+\"\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tnode += \"\t\t<div class=\\\"mdl-list__item\\\">\";\n\t\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-primary-content'>\";\n\t\t\t\t\tnode += \"\t\t\t\t<i class=\\\"material-icons mdl-textfield__icon\\\">\"+app.icons.snippets+\"</i>\";\n\t\t\t\t\tnode += \"\t\t\t\t<h2 class=\\\"mdl-card__title-text\\\">\"+snippet.attributes.name+\"</h2>\";\n\t\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-secondary-action'>\";\n\t\t\t\t\tnode += \"\t\t\t\t<button role='button' class='mdl-button mdl-js-button mdl-button--icon right showdescription_button' for='description-\"+snippet.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t\t\t<i class='material-icons'>expand_more</i>\";\n\t\t\t\t\tnode += \"\t\t\t\t</button>\";\n\t\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\t\tnode += \"\t\t<div class='mdl-cell--12-col hidden' id='description-\"+snippet.id+\"'>\";\n\n\t\t\t\t\tnode += app.getField(app.icons.code, \"Id\", snippet.id, {type: \"text\", style:\"text-transform: none !important;\"});\n\t\t\t\t\tif ( snippet.attributes.meta.created ) {\n\t\t\t\t\t\tnode += app.getField(app.icons.date, \"Created\", moment(snippet.attributes.meta.created).format(app.date_format), {type: \"text\"});\n\t\t\t\t\t}\n\t\t\t\t\tif ( snippet.attributes.meta.updated ) {\n\t\t\t\t\t\tnode += app.getField(app.icons.date, \"Updated\", moment(snippet.attributes.meta.updated).format(app.date_format), {type: \"text\"});\n\t\t\t\t\t}\n\t\t\t\t\tif ( snippet.attributes.meta.revision ) {\n\t\t\t\t\t\tnode += app.getField(app.icons.update, \"Revision\", snippet.attributes.meta.revision, {type: \"text\"});\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t\t\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+id+\"\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tnode += app.getField(null, \"meta.revision\", snippet.attributes.meta.revision, {type: \"hidden\", id: \"meta.revision\", pattern: app.patterns.meta_revision});\n\t\t\t\t\tnode += app.getField(app.icons.name, \"Name\", snippet.attributes.name, {type: \"text\", id: \"Name\", isEdit: isEdit, pattern: app.patterns.name, error:\"Name should be set and more than 3 chars length.\"});\n\t\t\t\t\tnode += app.getField(app.icons.icon, \"Icon\", snippet.attributes.icon, {type: \"select\", id: \"Icon\", isEdit: isEdit, options: app.types });\n\t\t\t\t\tnode += app.getField(app.icons.color, \"Color\", snippet.attributes.color, {type: \"text\", style:\"text-transform: none !important;\", id: \"Color\", isEdit: isEdit});\n\t\t\t\t\tnode += app.getField(\"add_circle_outline\", \"Type\", snippet.attributes.type, {type: \"select\", id: \"Type\", options: app.snippetTypes, isEdit: isEdit });\n\t\t\t\t\tif ( localStorage.getItem(\"flows\") !== \"null\" ) {\n\t\t\t\t\t\tvar flows = JSON.parse(localStorage.getItem(\"flows\")).map(function(flow) {\n\t\t\t\t\t\t\treturn {value: flow.name, name: flow.id};\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnode += app.getField(app.icons.flows, \"Flows to add\", \"\", {type: \"select\", id: \"flowsChipsSelect\", isEdit: true, options: flows });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.getFlows();\n\t\t\t\t\t\tnode += app.getField(app.icons.flows, \"Flows to add (you should add some flows first)\", \"\", {type: \"select\", id: \"flowsChipsSelect\", isEdit: true, options: {} });\n\t\t\t\t\t}\n\t\t\t\t\tnode += app.getField(null, \"Sample\", null, {type: \"container\", id: \"TypeSample\", options: {}, isEdit: false });\n\t\t\t\t\tnode += \"\t\t<div class='mdl-list__item--three-line small-padding  mdl-card--expand mdl-chips chips-initial input-field' id='flowsChips'>\";\n\t\t\t\t\tnode += \"\t\t\t<span class='mdl-chips__arrow-down__container mdl-selectfield__arrow-down__container'><span class='mdl-chips__arrow-down'></span></span>\";\n\t\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\t\tnode += \"\t</div>\"; // mdl-shadow--2dp\n\t\t\t\t\t\n\t\t\t\t\tnode +=\t\"</section>\";\n\t\t\t\t\t\n\t\t\t\t\tnode += app.getSubtitle(\"Graph Options\");\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+snippet.id+\"_parameters\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tnode += app.getField(app.icons.description, \"Graph Options\", typeof snippet.attributes.options!==\"undefined\"?JSON.stringify(snippet.attributes.options):\"\", {type: \"textarea\", id: \"Graph_Options\", isEdit: true});\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\n\t\t\t\t\tnode += \"<section class='mdl-grid mdl-cell--12-col fixedActionButtons' data-id='\"+id+\"'>\";\n\t\t\t\t\tif( app.isLtr() ) {\n\t\t\t\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[0]+\"' class='back-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>chevron_left</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>View</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[0]+\"'>View Snippet</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-right'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[1]+\"' class='save-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>save</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Save</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[1]+\"'>Save changes to Snippet</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tif( !app.isLtr() ) {\n\t\t\t\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t\t\n\t\t\t\t\t(app.containers.snippet).querySelector(\".page-content\").innerHTML = node;\n\t\t\t\t\tcomponentHandler.upgradeDom();\n\t\t\t\t\tapp.setExpandAction();\n\t\t\t\t\t\n\t\t\t\t\tapp.refreshButtonsSelectors();\n\t\t\t\t\tapp.buttons.backSnippet.addEventListener(\"click\", function(evt) { app.resources.snippets.display(snippet.id, false, false, false); }, false);\n\t\t\t\t\tapp.buttons.saveSnippet.addEventListener(\"click\", function(evt) { app.resources.snippets.onEdit(evt); }, false);\n\n\t\t\t\t\tdocument.getElementById(\"flowsChipsSelect\").parentNode.querySelector(\"div.mdl-selectfield__list-option-box ul\").addEventListener(\"click\", function(evt) {\n\t\t\t\t\t\tvar id = evt.target.getAttribute(\"data-value\");\n\t\t\t\t\t\tvar name = evt.target.innerText;\n\t\t\t\t\t\tapp.addChipTo(\"flowsChips\", {name: name, id: id, type: \"flows\"});\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t}, false);\n\n\t\t\t\t\tdocument.getElementById(\"Type\").parentNode.querySelector(\"div.mdl-selectfield__list-option-box ul\").addEventListener(\"click\", function(evt) {\n\t\t\t\t\t\tvar index = evt.target.getAttribute(\"data-value\");\n\t\t\t\t\t\tvar value = evt.target.innerText;\n\t\t\t\t\t\tvar s = app.snippetTypes.find(function(sn) {\n\t\t\t\t\t\t\treturn (sn.value).toLowerCase()===value.toLowerCase();\n\t\t\t\t\t\t});\n\t\t\t\t\t\t(app.containers.snippet).querySelector(\"#TypeSample\").innerHTML = s.getHtml({id: snippet.id, icon: snippet.attributes.icon, name: snippet.attributes.name, color: snippet.attributes.color});\n\t\t\t\t\t\ts.activateOnce(snippet);\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t}, false);\n\t\t\t\t\tif( snippet.attributes.type ) {\n\t\t\t\t\t\tvar s = app.snippetTypes.find(function(sn) {\n\t\t\t\t\t\t\treturn (sn.name).toLowerCase()===(snippet.attributes.type).toLowerCase();\n\t\t\t\t\t\t});\n\t\t\t\t\t\t(app.containers.snippet).querySelector(\"#TypeSample\").innerHTML = s.getHtml({id: snippet.id, icon: snippet.attributes.icon, name: snippet.attributes.name, color: snippet.attributes.color});\n\t\t\t\t\t\ts.activateOnce(snippet);\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( snippet.attributes.flows && snippet.attributes.flows.length > -1 && localStorage.getItem(\"flows\") !== \"null\" ) {\n\t\t\t\t\t\tsnippet.attributes.flows.map(function(s) {\n\t\t\t\t\t\t\t//Flows list, we put the index not the flow_id into the selector:\n\t\t\t\t\t\t\tvar n=0;\n\t\t\t\t\t\t\tvar theFlow = (JSON.parse(localStorage.getItem(\"flows\"))).find(function(storedF) { storedF.index = n++; return storedF.id == s; });\n\t\t\t\t\t\t\tif (theFlow) {\n\t\t\t\t\t\t\t\tapp.addChipTo(\"flowsChips\", {name: theFlow.name, id: theFlow.index, type: \"flows\"});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\tnode = \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+id+\"\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tnode += \"\t\t<div class=\\\"mdl-list__item\\\">\";\n\t\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-primary-content'>\";\n\t\t\t\t\tnode += \"\t\t\t\t<h2 class=\\\"mdl-card__title-text\\\">\";\n\t\t\t\t\tnode += \"\t\t\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.snippets+\"</i>\";\n\t\t\t\t\tnode += \"\t\t\t\t\t\"+snippet.attributes.name+\"</h2>\";\n\t\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-secondary-action'>\";\n\t\t\t\t\tnode += \"\t\t\t\t<button role='button' class='mdl-button mdl-js-button mdl-button--icon right showdescription_button' for='description-\"+id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t\t\t<i class='material-icons'>expand_more</i>\";\n\t\t\t\t\tnode += \"\t\t\t\t</button>\";\n\t\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\t\tnode += \"\t\t<div class='mdl-cell mdl-cell--12-col hidden' id='description-\"+id+\"'>\";\n\n\t\t\t\t\tnode += app.getField(app.icons.code, \"Id\", snippet.id, {type: \"text\", style:\"text-transform: none !important;\"});\n\t\t\t\t\tif ( snippet.attributes.meta.created ) {\n\t\t\t\t\t\tnode += app.getField(app.icons.date, \"Created\", moment(snippet.attributes.meta.created).format(app.date_format), {type: \"text\"});\n\t\t\t\t\t}\n\t\t\t\t\tif ( snippet.attributes.meta.updated ) {\n\t\t\t\t\t\tnode += app.getField(app.icons.date, \"Updated\", moment(snippet.attributes.meta.updated).format(app.date_format), {type: \"text\"});\n\t\t\t\t\t}\n\t\t\t\t\tif ( snippet.attributes.meta.revision ) {\n\t\t\t\t\t\tnode += app.getField(app.icons.update, \"Revision\", snippet.attributes.meta.revision, {type: \"text\"});\n\t\t\t\t\t}\n\t\t\t\t\tnode += app.getField(app.icons.icon, \"Icon\", snippet.attributes.icon, {type: \"select\", id: \"Icon\", isEdit: isEdit, options: app.types });\n\t\t\t\t\tnode += app.getField(app.icons.color, \"Color\", snippet.attributes.color, {type: \"text\", style:\"text-transform: none !important;\", id: \"Color\", isEdit: isEdit});\n\t\t\t\t\tnode += app.getField(\"add_circle_outline\", \"Type\", snippet.attributes.type, {type: \"select\", id: \"Type\", options: app.snippetTypes, isEdit: isEdit });\n\t\t\t\t\tnode += app.getField(app.icons.flows, \"Linked Flows #\", snippet.attributes.flows.length, {type: \"text\"});\n\t\t\t\t\tnode += \"\t</div>\"; // mdl-shadow--2dp\n\t\t\t\t\tnode +=\t\"</section>\";\n\t\t\t\t\t\n\t\t\t\t\tnode += \"<section class='mdl-grid mdl-cell--12-col fixedActionButtons' data-id='\"+snippet.id+\"'>\";\n\t\t\t\t\tif( app.isLtr() ) {\n\t\t\t\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[0]+\"' class='list-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+snippet.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>chevron_left</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>List</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[0]+\"'>List all Snippets</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone delete-button'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[1]+\"' class='delete-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+snippet.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>delete</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Delete</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[1]+\"'>Delete Snippet</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-right'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[2]+\"' class='edit-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+snippet.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>edit</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Edit</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[2]+\"'>Edit Snippet</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tif( !app.isLtr() ) {\n\t\t\t\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"</section>\";\n\n\t\t\t\t\t//Snippet preview\n\t\t\t\t\tapp.getSnippet(app.icons.snippets, snippet.id, (app.containers.snippet).querySelector(\".page-content\"));\n\n\t\t\t\t\t(app.containers.snippet).querySelector(\".page-content\").innerHTML = node;\n\t\t\t\t\tcomponentHandler.upgradeDom();\n\n\t\t\t\t\tvar s = app.snippetTypes.find(function(sn) {\n\t\t\t\t\t\treturn (sn.name).toLowerCase()===(snippet.attributes.type).toLowerCase();\n\t\t\t\t\t});\n\t\t\t\t\tlet setOpt = typeof snippet.attributes.options!==\"undefined\"?s.setOptions(snippet.attributes.options):null;\n\t\t\t\t\t\n\t\t\t\t\tapp.setExpandAction();\n\t\t\t\t\t\n\t\t\t\t\tapp.refreshButtonsSelectors();\n\t\t\t\t\tapp.buttons.listSnippet.addEventListener(\"click\", function(evt) { app.setSection(\"snippets\"); evt.preventDefault(); }, false);\n\t\t\t\t\t// buttons.deleteSnippet2.addEventListener(\"click\",\n\t\t\t\t\t// function(evt) { console.log(\"SHOW MODAL AND CONFIRM!\");\n\t\t\t\t\t// }, false);\n\t\t\t\t\tapp.buttons.editSnippet2.addEventListener(\"click\", function(evt) { app.resources.snippets.display(snippet.id, false, true, false); evt.preventDefault(); }, false);\n\t\t\t\t}\n\t\t\t\tapp.setSection(\"snippet\");\n\t\t\t}\n\t\t})\n\t\t.catch(function (error) {\n\t\t\tif ( localStorage.getItem(\"settings.debug\") == \"true\" ) {\n\t\t\t\ttoast(\"displaySnippet error occured...\" + error, {timeout:3000, type: \"error\"});\n\t\t\t}\n\t\t});\n\t\tapp.containers.spinner.setAttribute(\"hidden\", true);\n\t},\n\tdisplayPublic: function(id, isAdd, isEdit, isPublic) {\n\t},\n\tdisplayAdd: function(snippet, isAdd, isEdit, isPublic) {\n\t\thistory.pushState( {section: \"snippet_add\" }, window.location.hash.substr(1), \"#snippet_add\" );\n\t\tapp.initNewSection(\"snippet_add\");\n\t\tvar node = \"\";\n\t\tnode = \"<section class='mdl-grid mdl-cell--12-col' data-id='\"+snippet.id+\"'>\";\n\t\tnode += \"\t<div class='mdl-cell--12-col mdl-card mdl-shadow--2dp'>\";\n\t\tnode += app.getField(app.icons.name, \"Name\", snippet.attributes.name, {type: \"text\", id: \"Name\", isEdit: true, pattern: app.patterns.name, error:\"Name should be set and more than 3 chars length.\"});\n\t\tnode += app.getField(app.icons.icon, \"Icon\", snippet.attributes.icon, {type: \"select\", id: \"Icon\", isEdit: true, options: app.types });\n\t\tnode += app.getField(app.icons.color, \"Color\", snippet.attributes.color, {type: \"text\", id: \"Color\", isEdit: true});\n\t\tnode += app.getField(\"add_circle_outline\", \"Type\", snippet.attributes.type, {type: \"select\", id: \"Type\", options: app.snippetTypes, isEdit: true });\n\t\tnode += app.getField(null, \"Sample\", null, {type: \"container\", id: \"TypeSample\", options: {}, isEdit: false });\n\n\t\tif ( localStorage.getItem(\"flows\") != \"null\" ) {\n\t\t\tvar flows = JSON.parse(localStorage.getItem(\"flows\")).map(function(flow) {\n\t\t\t\treturn {value: flow.name, name: flow.id};\n\t\t\t});\n\t\t\tnode += app.getField(app.icons.flows, \"Flows to add\", \"\", {type: \"select\", id: \"flowsChipsSelect\", isEdit: true, options: flows });\n\t\t} else {\n\t\t\tapp.getFlows();\n\t\t\tnode += app.getField(app.icons.flows, \"Flows to add (you should add flow first)\", \"\", {type: \"select\", id: \"flowsChipsSelect\", isEdit: true, options: {} });\n\t\t}\n\t\tnode += \"\t\t<div class='mdl-list__item--three-line small-padding  mdl-card--expand mdl-chips chips-initial input-field' id='flowsChips'>\";\n\t\tnode += \"\t\t\t<span class='mdl-chips__arrow-down__container mdl-selectfield__arrow-down__container'><span class='mdl-chips__arrow-down'></span></span>\";\n\t\tnode += \"\t\t</div>\";\n\t\tnode += \"\t</div>\";\n\t\tnode += \"</section>\";\n\t\t\n\t\tnode += app.getSubtitle(\"Graph Options\");\n\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+snippet.id+\"_parameters\\\">\";\n\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\tnode += app.getField(app.icons.description, \"Graph Options\", typeof snippet.attributes.options!==\"undefined\"?JSON.stringify(snippet.attributes.options):\"\", {type: \"textarea\", id: \"Graph_Options\", isEdit: true});\n\t\tnode += \"\t</div>\";\n\t\tnode += \"</section>\";\n\t\t\n\t\tvar btnId = [app.getUniqueId(), app.getUniqueId(), app.getUniqueId()];\n\t\tnode += \"<section class='mdl-grid mdl-cell--12-col fixedActionButtons' data-id='\"+snippet.id+\"'>\";\n\t\tif( app.isLtr() ) {\n\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t}\n\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\tnode += \"\t\t<button id='\"+btnId[0]+\"' class='back-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+snippet.id+\"'>\";\n\t\tnode += \"\t\t\t<i class='material-icons'>chevron_left</i>\";\n\t\tnode += \"\t\t\t<label>List</label>\";\n\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[0]+\"'>List all Snippets</label>\";\n\t\tnode += \"\t\t</button>\";\n\t\tnode += \"\t</div>\";\n\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-right'>\";\n\t\tnode += \"\t\t<button id='\"+btnId[1]+\"' class='add-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+snippet.id+\"'>\";\n\t\tnode += \"\t\t\t<i class='material-icons'>edit</i>\";\n\t\tnode += \"\t\t\t<label>Save</label>\";\n\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[1]+\"'>Save new Snippet</label>\";\n\t\tnode += \"\t\t</button>\";\n\t\tnode += \"\t</div>\";\n\t\tif( !app.isLtr() ) {\n\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t}\n\t\tnode += \"</section>\";\n\n\t\t(app.containers.snippet_add).querySelector(\".page-content\").innerHTML = node;\n\t\tcomponentHandler.upgradeDom();\n\t\tdocument.getElementById(\"flowsChipsSelect\").parentNode.querySelector(\"div.mdl-selectfield__list-option-box ul\").addEventListener(\"click\", function(evt) {\n\t\t\tvar id = evt.target.getAttribute(\"data-value\");\n\t\t\tvar name = evt.target.innerText;\n\t\t\tapp.addChipTo(\"flowsChips\", {name: name, id: id, type: \"flows\"});\n\t\t\tevt.preventDefault();\n\t\t}, false);\n\t\tdocument.getElementById(\"Type\").parentNode.querySelector(\"div.mdl-selectfield__list-option-box ul\").addEventListener(\"click\", function(evt) {\n\t\t\tvar index = evt.target.getAttribute(\"data-value\");\n\t\t\tvar value = evt.target.innerText;\n\t\t\tvar s = app.snippetTypes.find(function(sn) {\n\t\t\t\treturn sn.value===value;\n\t\t\t});\n\t\t\t(app.containers.snippet_add).querySelector(\"#TypeSample\").innerHTML = s.getHtml({id: snippet.id, icon: snippet.icon, name: snippet.name, color: snippet.color});\n\t\t\ts.activateOnce(snippet);\n\t\t\tevt.preventDefault();\n\t\t}, false);\n\t\t\n\t\tapp.refreshButtonsSelectors();\n\t\tapp.buttons.addSnippetBack.addEventListener(\"click\", function(evt) { app.setSection(\"snippets\"); evt.preventDefault(); }, false);\n\t\tapp.buttons.addSnippet.addEventListener(\"click\", function(evt) { app.resources.snippets.onAdd(evt); }, false);\n\n\t\tapp.setExpandAction();\n\t},\n\tdisplayItem: function(snippet) {\n\t\tvar type = \"snippets\";\n\t\tvar name = snippet.attributes.name!==undefined?snippet.attributes.name:\"\";\n\t\tvar description = snippet.attributes.description!==undefined?snippet.attributes.description.substring(0, app.cardMaxChars):\"\";\n\t\tvar attributeType = snippet.attributes.type!==undefined?snippet.attributes.type:\"\";\n\t\t\n\t\tvar element = \"\";\n\t\telement += \"<div class=\\\"mdl-grid mdl-cell\\\" data-action=\\\"view\\\" data-type=\\\"\"+type+\"\\\" data-id=\\\"\"+snippet.id+\"\\\">\";\n\t\telement += \"\t<div class=\\\"mdl-card mdl-shadow--2dp\\\">\";\n\t\telement += \"\t\t<div class=\\\"mdl-card__title\\\">\";\n\t\telement += \"\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.objects+\"</i>\";\n\t\telement += \"\t\t\t<h3 class=\\\"mdl-card__title-text\\\">\"+name+\"</h3>\";\n\t\telement += \"\t\t</div>\";\n\t\telement += \"<div class='mdl-list__item--three-line small-padding'>\";\n\t\tif ( snippet.attributes.type ) {\n\t\t\telement += \"\t<div class='mdl-list__item-sub-title'>\";\n\t\t\tvar s = app.snippetTypes.find(function(sn) {\n\t\t\t\treturn (sn.name).toLowerCase()===(snippet.attributes.type).toLowerCase();\n\t\t\t});\n\t\t\tif ( !s ) {\n\t\t\t\tconsole.log(\"DEBUG\", \"type not found !!!\", (snippet.attributes.type).toLowerCase());\n\t\t\t}\n\t\t\telement += \"\t\t<i class='material-icons md-28'>add_circle_outline</i>\"+app.snippetTypes.find( function(s) { return (s.name).toLowerCase() == (snippet.attributes.type).toLowerCase(); }).value;\n\t\t\telement += \"\t</div>\";\n\t\t}\n\t\tif ( snippet.attributes.color ) {\n\t\t\telement += \"\t<div class='mdl-list__item-sub-title'>\";\n\t\t\telement += \"\t\t<i class='material-icons md-28'>format_color_fill</i><span style='text-transform:uppercase; color:\"+snippet.attributes.color+\"'>\"+snippet.attributes.color+\"</span>\";\n\t\t\telement += \"\t</div>\";\n\t\t}\n\t\telement += \"\t<span class='mdl-list__item-sub-title'>\";\n\t\telement += \"\t\t<i class='material-icons md-28'>\"+snippet.attributes.icon+\"</i>\"+app.types.find( function(t) { return t.name == snippet.attributes.icon; }).value;\n\t\telement += \"\t</span>\";\n\t\telement += \"</div>\";\n\t\telement += \"\t\t<div class=\\\"mdl-card__actions mdl-card--border\\\">\";\n\t\telement += \"\t\t\t<span class=\\\"pull-left mdl-card__date\\\">\";\n\t\telement += \"\t\t\t\t<button data-id=\\\"\"+snippet.id+\"\\\" class=\\\"swapDate mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect\\\">\";\n\t\telement += \"\t\t\t\t\t<i class=\\\"material-icons\\\">update</i>\";\n\t\telement += \"\t\t\t\t</button>\";\n\t\telement += \"\t\t\t\t<span data-date=\\\"created\\\" class=\\\"visible\\\">Created on \"+moment(snippet.attributes.meta.created).format(app.date_format) + \"</span>\";\n\t\tif ( snippet.attributes.meta.updated ) {\n\t\t\telement += \"\t\t\t\t<span data-date=\\\"updated\\\" class=\\\"hidden\\\">Updated on \"+moment(snippet.attributes.meta.updated).format(app.date_format) + \"</span>\";\n\t\t} else {\n\t\t\telement += \"\t\t\t\t<span data-date=\\\"updated\\\" class=\\\"hidden\\\">Never been updated yet.</span>\";\n\t\t}\n\t\telement += \"\t\t\t</span>\";\n\t\telement += \"\t\t\t<span class=\\\"pull-right mdl-card__menuaction\\\">\";\n\t\telement += \"\t\t\t\t<button id=\\\"menu_\"+snippet.id+\"\\\" class=\\\"mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect\\\">\";\n\t\telement += \"\t\t\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.menu+\"</i>\";\n\t\telement += \"\t\t\t\t</button>\";\n\t\telement += \"\t\t\t</span>\";\n\t\telement += \"\t\t\t<ul class=\\\"mdl-menu mdl-menu--top-right mdl-js-menu mdl-js-ripple-effect\\\" for=\\\"menu_\"+snippet.id+\"\\\">\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item delete-button\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons delete-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+snippet.id+\"\\\" data-name=\\\"\"+name+\"\\\">\"+app.icons.delete+\"</i>Delete</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons edit-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+snippet.id+\"\\\" data-name=\\\"\"+name+\"\\\">\"+app.icons.edit+\"</i>Edit</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons copy-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+snippet.id+\"\\\">\"+app.icons.copy+\"</i><textarea class=\\\"copytextarea\\\">\"+snippet.id+\"</textarea>Copy ID to clipboard</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t</ul>\";\n\t\telement += \"\t\t</div>\";\n\t\telement += \"\t</div>\";\n\t\telement += \"</div>\";\n\n\t\treturn element;\n\t}\n};","\"use strict\";\napp.resources.dashboards = {\n\tonEdit: function(evt) {\n\t\tvar dashboard_id = evt.target.parentNode.getAttribute(\"data-id\")?evt.target.parentNode.getAttribute(\"data-id\"):evt.target.getAttribute(\"data-id\");\n\t\tif ( !dashboard_id ) {\n\t\t\ttoast(\"No Dashboard id found!\", {timeout:3000, type: \"error\"});\n\t\t} else {\n\t\t\tvar myForm = evt.target.parentNode.parentNode.parentNode.parentNode;\n\t\t\tvar body = {\n\t\t\t\tname: myForm.querySelector(\"input[name='Name']\").value,\n\t\t\t\tdescription: myForm.querySelector(\"textarea[name='Description']\").value,\n\t\t\t\tsnippets: Array.prototype.map.call(myForm.querySelectorAll(\".mdl-chips .mdl-chip\"), function(snippet) { return ((JSON.parse(localStorage.getItem(\"snippets\")))[snippet.getAttribute(\"data-id\")]).id; }),\n\t\t\t\tmeta: {revision: myForm.querySelector(\"input[name='meta.revision']\").value, },\n\t\t\t};\n\t\t\tif ( localStorage.getItem(\"settings.debug\") == \"true\" ) {\n\t\t\t\tconsole.log(\"DEBUG onEditDashboard\", JSON.stringify(body));\n\t\t\t}\n\t\t\tvar myHeaders = new Headers();\n\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\tvar myInit = { method: \"PUT\", headers: myHeaders, body: JSON.stringify(body) };\n\t\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/dashboards/\"+dashboard_id;\n\t\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse){ \n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tapp.setSection(\"dashboards\");\n\t\t\t\ttoast(\"Dashboard has been saved.\", {timeout:3000, type: \"done\"});\n\t\t\t\t//var dashboardContainer = document.querySelector(\"section#dashboards div[data-id=\"\"+dashboard_id+\"\"]\");\n\t\t\t\t//dashboardContainer.querySelector(\"h2\").innerHTML = body.name;\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\ttoast(\"Dashboard has not been saved.\", {timeout:3000, type: \"error\"});\n\t\t\t});\n\t\t\tevt.preventDefault();\n\t\t}\n\t},\n\tonAdd: function(evt) {\n\t\tvar myForm = evt.target.parentNode.parentNode.parentNode.parentNode;\n\t\tvar body = {\n\t\t\tname: myForm.querySelector(\"input[name='Name']\").value,\n\t\t\tdescription: myForm.querySelector(\"textarea[name='Description']\").value,\n\t\t\tsnippets: Array.prototype.map.call(myForm.querySelectorAll(\".mdl-chips .mdl-chip\"), function(snippet) { return ((JSON.parse(localStorage.getItem(\"snippets\")))[snippet.getAttribute(\"data-id\")]).id; }),\n\t\t};\n\t\tif ( localStorage.getItem(\"settings.debug\") == \"true\" ) {\n\t\t\tconsole.log(\"DEBUG onAddDashboard\", JSON.stringify(body));\n\t\t}\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"POST\", headers: myHeaders, body: JSON.stringify(body) };\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/dashboards/\";\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\tapp.setSection(\"dashboards\");\n\t\t\ttoast(\"Dashboard has been added.\", {timeout:3000, type: \"done\"});\n\t\t})\n\t\t.catch(function (error) {\n\t\t\ttoast(\"Dashboard has not been added.\", {timeout:3000, type: \"error\"});\n\t\t});\n\t\tevt.preventDefault();\n\t},\n\tonDelete: function(id) {\n\t},\n\tdisplay: function(id, isAdd, isEdit, isPublic) {\n\t\thistory.pushState( {section: \"dashboard\" }, window.location.hash.substr(1), \"#dashboard?id=\"+id );\n\t\tapp.initNewSection(\"dashboard\");\n\t\t\n\t\twindow.scrollTo(0, 0);\n\t\tapp.containers.spinner.removeAttribute(\"hidden\");\n\t\tapp.containers.spinner.classList.remove(\"hidden\");\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"GET\", headers: myHeaders };\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/dashboards/\"+id;\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\tfor (var i=0; i < (response.data).length ; i++ ) {\n\t\t\t\tvar dashboard = response.data[i];\n\t\t\t\tdocument.title = (app.sectionsPageTitles[\"dashboard\"]).replace(/%s/g, dashboard.attributes.name);\n\n\t\t\t\tvar node;\n\t\t\t\tnode = \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+id+\"\\\">\";\n\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\tnode += \"\t\t<div class=\\\"mdl-list__item\\\">\";\n\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-primary-content'>\";\n\t\t\t\tnode += \"\t\t\t\t<i class=\\\"material-icons mdl-textfield__icon\\\">\"+app.icons.dashboards+\"</i>\";\n\t\t\t\tnode += \"\t\t\t\t<h2 class=\\\"mdl-card__title-text\\\">\"+dashboard.attributes.name+\"</h2>\";\n\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-secondary-action'>\";\n\t\t\t\tnode += \"\t\t\t\t<button role='button' class='mdl-button mdl-js-button mdl-button--icon right showdescription_button' for='description-\"+id+\"'>\";\n\t\t\t\tnode += \"\t\t\t\t\t<i class='material-icons'>expand_more</i>\";\n\t\t\t\tnode += \"\t\t\t\t</button>\";\n\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\tnode += \"\t\t<div class='mdl-cell mdl-cell--12-col hidden' id='description-\"+id+\"'>\";\n\n\t\t\t\tnode += app.getField(app.icons.code, \"Id\", dashboard.id, {type: \"text\", style:\"text-transform: none !important;\"});\n\t\t\t\tif ( dashboard.attributes.description ) {\n\t\t\t\t\tvar description = app.nl2br(dashboard.attributes.description);\n\t\t\t\t\tnode += app.getField(app.icons.description, \"Description\", description, {type: \"text\", isEdit: false});\n\t\t\t\t}\n\t\t\t\tif ( dashboard.attributes.meta.created ) {\n\t\t\t\t\tnode += app.getField(app.icons.date, \"Created\", moment(dashboard.attributes.meta.created).format(app.date_format), {type: \"text\", isEdit: false});\n\t\t\t\t}\n\t\t\t\tif ( dashboard.attributes.meta.updated ) {\n\t\t\t\t\tnode += app.getField(app.icons.date, \"Updated\", moment(dashboard.attributes.meta.updated).format(app.date_format), {type: \"text\", isEdit: false});\n\t\t\t\t}\n\t\t\t\tif ( dashboard.attributes.meta.revision ) {\n\t\t\t\t\tnode += app.getField(app.icons.update, \"Revision\", dashboard.attributes.meta.revision, {type: \"text\", isEdit: false});\n\t\t\t\t}\n\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\tnode += \"\t</div>\";\n\t\t\t\tnode += \"</section>\";\n\n\t\t\t\tvar btnId = [app.getUniqueId(), app.getUniqueId(), app.getUniqueId()];\n\t\t\t\tif ( isEdit ) {\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+id+\"\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tnode += app.getField(null, \"meta.revision\", dashboard.attributes.meta.revision, {type: \"hidden\", id: \"meta.revision\", pattern: app.patterns.meta_revision});\n\t\t\t\t\tnode += app.getField(app.icons.name, \"Name\", dashboard.attributes.name, {type: \"text\", id: \"Name\", isEdit: isEdit, pattern: app.patterns.name, error:\"Name should be set and more than 3 chars length.\"});\n\t\t\t\t\tnode += app.getField(app.icons.description, \"Description\", app.nl2br(dashboard.attributes.description), {type: \"textarea\", id: \"Description\", isEdit: isEdit});\n\n\t\t\t\t\tif ( localStorage.getItem(\"snippets\") != \"null\" ) {\n\t\t\t\t\t\tvar snippets = JSON.parse(localStorage.getItem(\"snippets\")).map(function(snippet) {\n\t\t\t\t\t\t\treturn {value: snippet.name, name: snippet.id, sType: snippet.sType};\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnode += app.getField(app.icons.snippets, \"Snippets to add\", \"\", {type: \"select\", id: \"snippetsChipsSelect\", isEdit: true, options: snippets });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.getSnippets();\n\t\t\t\t\t\tnode += app.getField(app.icons.snippets, \"Snippets to add (you should add some snippets first)\", \"\", {type: \"select\", id: \"snippetsChipsSelect\", isEdit: true, options: {} });\n\t\t\t\t\t}\n\n\t\t\t\t\tnode += \"\t\t<div class='mdl-list__item--three-line small-padding  mdl-card--expand mdl-chips chips-initial input-field' id='snippetsChips'>\";\n\t\t\t\t\tnode += \"\t\t\t<span class='mdl-chips__arrow-down__container mdl-selectfield__arrow-down__container'><span class='mdl-chips__arrow-down'></span></span>\";\n\t\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t\t\n\t\t\t\t\tnode += \"<section class='mdl-grid mdl-cell--12-col fixedActionButtons' data-id='\"+id+\"'>\";\n\t\t\t\t\tif( app.isLtr() ) {\n\t\t\t\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[0]+\"' class='back-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>chevron_left</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>View</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[0]+\"'>View Dashboard</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-right'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[1]+\"' class='save-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>save</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Save</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[1]+\"'>Save changes to Dashboard</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tif( !app.isLtr() ) {\n\t\t\t\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"</section>\"\n\t\t\t\t} else {\n\t\t\t\t\t/* View mode */\n\t\t\t\t\tfor ( var j=0; j < dashboard.attributes.snippets.length; j++ ) {\n\t\t\t\t\t\tapp.getSnippet(app.icons.snippets, dashboard.attributes.snippets[j], (app.containers.dashboard).querySelector(\".page-content\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t(app.containers.dashboard).querySelector(\".page-content\").innerHTML = node;\n\t\t\t\tapp.setExpandAction();\n\t\t\t\tcomponentHandler.upgradeDom();\n\t\t\t\tapp.refreshButtonsSelectors();\n\t\t\t\tif ( isEdit ) {\n\t\t\t\t\tapp.buttons.backDashboard.addEventListener(\"click\", function(evt) { app.resources.dashboards.display(dashboard.id, false, false, false); }, false);\n\t\t\t\t\tapp.buttons.saveDashboard.addEventListener(\"click\", function(evt) { app.resources.dashboards.onEdit(evt); }, false);\n\n\t\t\t\t\tdocument.getElementById(\"snippetsChipsSelect\").parentNode.querySelector(\"div.mdl-selectfield__list-option-box ul\").addEventListener(\"click\", function(evt) {\n\t\t\t\t\t\tvar id = evt.target.getAttribute(\"data-value\");\n\t\t\t\t\t\tvar n=0;\n\t\t\t\t\t\tif ( localStorage.getItem(\"snippets\") != \"null\" ) {\n\t\t\t\t\t\t\tvar s = JSON.parse(localStorage.getItem(\"snippets\")).find(function(snippet) {\n\t\t\t\t\t\t\t\tif ( n == id ) {\n\t\t\t\t\t\t\t\t\treturn snippet;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tn++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar sType = s.sType;\n\t\t\t\t\t\tvar name = evt.target.innerText; // == s.name\n\t\t\t\t\t\tapp.addChipSnippetTo(\"snippetsChips\", {name: s.name, id: id, sType: s.sType, type: \"snippets\"});\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t}, false);\n\n\t\t\t\t\tif ( dashboard.attributes.snippets && dashboard.attributes.snippets.length > -1 ) {\n\t\t\t\t\t\tdashboard.attributes.snippets.map(function(s) {\n\t\t\t\t\t\t\t//Snippet list, we put the index not the snippet_id into the selector:\n\t\t\t\t\t\t\tvar n=0;\n\t\t\t\t\t\t\tif ( localStorage.getItem(\"snippets\") != \"null\" ) {\n\t\t\t\t\t\t\t\tvar theSnippet = (JSON.parse(localStorage.getItem(\"snippets\"))).find(function(storedS) { storedS.index = n++; return storedS.id == s; });\n\t\t\t\t\t\t\t\tif ( theSnippet ) {\n\t\t\t\t\t\t\t\t\tapp.addChipSnippetTo(\"snippetsChips\", {name: theSnippet.name, id: theSnippet.index, sType: theSnippet.sType, type: \"snippets\"});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcomponentHandler.upgradeDom();\n\t\t\t\tapp.setExpandAction();\n\n\t\t\t\tvar sn = document.querySelectorAll(\"#snippetsChips .mdl-chip\");\n\t\t\t\t[].forEach.call(sn, app.addDnDHandlers);\n\t\t\t\tapp.setSection(\"dashboard\");\n\t\t\t}\n\t\t})\n\t\t.catch(function (error) {\n\t\t\tif ( localStorage.getItem(\"settings.debug\") == \"true\" ) {\n\t\t\t\ttoast(\"displayDashboard error occured...\" + error, {timeout:3000, type: \"error\"});\n\t\t\t}\n\t\t});\n\t\tapp.containers.spinner.setAttribute(\"hidden\", true);\n\t},\n\tdisplayPublic: function(id, isAdd, isEdit, isPublic) {\n\t},\n\tdisplayAdd: function(dashboard, isAdd, isEdit, isPublic) {\n\t\thistory.pushState( {section: \"dashboard_add\" }, window.location.hash.substr(1), \"#dashboard_add\" );\n\t\tapp.initNewSection(\"dashboard_add\");\n\t\tvar node = \"\";\n\t\tnode = \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+dashboard.id+\"\\\">\";\n\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\tnode += app.getField(app.icons.name, \"Name\", dashboard.attributes.name, {type: \"text\", id: \"Name\", isEdit: true, pattern: app.patterns.name, error:\"Name should be set and more than 3 chars length.\"});\n\t\tnode += app.getField(app.icons.description, \"Description\", app.nl2br(dashboard.attributes.description), {type: \"textarea\", id: \"Description\", isEdit: true});\n\n\t\tvar snippets;\n\t\tif ( localStorage.getItem(\"snippets\") != \"null\" ) {\n\t\t\tsnippets = JSON.parse(localStorage.getItem(\"snippets\")).map(function(snippet) {\n\t\t\t\treturn {value: snippet.name, name: snippet.id, sType: snippet.sType};\n\t\t\t});\n\t\t} else {\n\t\t\tapp.getSnippets();\n\t\t\ttoast(\"You should add a Snippet first, it seems you don\\\" have any yet.\", {timeout:3000, type: \"warning\"});\n\t\t\tsnippets = [{value: \"undefined\", name: \"undefined\", sType: \"undefined\"}];\n\t\t}\n\t\tnode += app.getField(app.icons.snippets, \"Snippets to add\", \"\", {type: \"select\", id: \"snippetsChipsSelect\", isEdit: true, options: snippets });\n\t\t\n\t\tnode += \"\t\t<div class='mdl-list__item--three-line small-padding  mdl-card--expand mdl-chips chips-initial input-field' id='snippetsChips'>\";\n\t\tnode += \"\t\t\t<span class='mdl-chips__arrow-down__container mdl-selectfield__arrow-down__container'><span class='mdl-chips__arrow-down'></span></span>\";\n\t\tnode += \"\t\t</div>\";\n\t\tnode += \"\t</div>\";\n\t\tnode += \"</section>\";\n\t\t\n\t\tvar btnId = [app.getUniqueId(), app.getUniqueId(), app.getUniqueId()];\n\t\tnode += \"<section class='mdl-grid mdl-cell--12-col fixedActionButtons' data-id='\"+dashboard.id+\"'>\";\n\t\tif( app.isLtr() ) {\n\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t}\n\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\tnode += \"\t\t<button id='\"+btnId[0]+\"' class='back-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+dashboard.id+\"'>\";\n\t\tnode += \"\t\t\t<i class='material-icons'>chevron_left</i>\";\n\t\tnode += \"\t\t\t<label>List</label>\";\n\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[0]+\"'>List all Dashboards</label>\";\n\t\tnode += \"\t\t</button>\";\n\t\tnode += \"\t</div>\";\n\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-right'>\";\n\t\tnode += \"\t\t<button id='\"+btnId[1]+\"' class='add-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+dashboard.id+\"'>\";\n\t\tnode += \"\t\t\t<i class='material-icons'>edit</i>\";\n\t\tnode += \"\t\t\t<label>Save</label>\";\n\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[1]+\"'>Save new Dashboard</label>\";\n\t\tnode += \"\t\t</button>\";\n\t\tnode += \"\t</div>\";\n\t\tif( !app.isLtr() ) {\n\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t}\n\t\tnode += \"</section>\";\n\n\t\t(app.containers.dashboard_add).querySelector(\".page-content\").innerHTML = node;\n\t\tcomponentHandler.upgradeDom();\n\t\tdocument.getElementById(\"snippetsChipsSelect\").parentNode.querySelector(\"div.mdl-selectfield__list-option-box ul\").addEventListener(\"click\", function(evt) {\n\t\t\tvar id = evt.target.getAttribute(\"data-value\");\n\t\t\tvar n=0;\n\t\t\tvar s = JSON.parse(localStorage.getItem(\"snippets\")).find(function(snippet) {\n\t\t\t\tif ( n == id ) {\n\t\t\t\t\treturn snippet;\n\t\t\t\t} else {\n\t\t\t\t\tn++;\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar sType = s.sType;\n\t\t\tvar name = evt.target.innerText;\n\t\t\tapp.addChipSnippetTo(\"snippetsChips\", {name: name, id: id, sType: sType, type: \"snippets\"});\n\t\t\tevt.preventDefault();\n\t\t}, false);\n\t\t\n\t\tapp.refreshButtonsSelectors();\n\t\tapp.buttons.addDashboardBack.addEventListener(\"click\", function(evt) { app.setSection(\"dashboards\"); evt.preventDefault(); }, false);\n\t\tapp.buttons.addDashboard.addEventListener(\"click\", function(evt) { app.resources.dashboards.onAdd(evt); }, false);\n\n\t\tapp.setExpandAction();\n\t},\n\tdisplayItem: function(dashboard) {\n\t\tvar type = \"dashboards\";\n\t\tvar name = dashboard.attributes.name!==undefined?dashboard.attributes.name:\"\";\n\t\tvar description = dashboard.attributes.description!==undefined?dashboard.attributes.description.substring(0, app.cardMaxChars):\"\";\n\n\t\tvar element = \"\";\n\t\telement += \"<div class=\\\"mdl-grid mdl-cell\\\" data-action=\\\"view\\\" data-type=\\\"\"+type+\"\\\" data-id=\\\"\"+dashboard.id+\"\\\">\";\n\t\telement += \"\t<div class=\\\"mdl-card mdl-shadow--2dp\\\">\";\n\t\telement += \"\t\t<div class=\\\"mdl-card__title\\\">\";\n\t\telement += \"\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.objects+\"</i>\";\n\t\telement += \"\t\t\t<h3 class=\\\"mdl-card__title-text\\\">\"+name+\"</h3>\";\n\t\telement += \"\t\t</div>\";\n\t\telement += app.getField(null, null, description, {type: \"textarea\", isEdit: false});\n\t\telement += \"\t\t<div class=\\\"mdl-card__actions mdl-card--border\\\">\";\n\t\telement += \"\t\t\t<span class=\\\"pull-left mdl-card__date\\\">\";\n\t\telement += \"\t\t\t\t<button data-id=\\\"\"+dashboard.id+\"\\\" class=\\\"swapDate mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect\\\">\";\n\t\telement += \"\t\t\t\t\t<i class=\\\"material-icons\\\">update</i>\";\n\t\telement += \"\t\t\t\t</button>\";\n\t\telement += \"\t\t\t\t<span data-date=\\\"created\\\" class=\\\"visible\\\">Created on \"+moment(dashboard.attributes.meta.created).format(app.date_format) + \"</span>\";\n\t\tif ( dashboard.attributes.meta.updated ) {\n\t\t\telement += \"\t\t\t\t<span data-date=\\\"updated\\\" class=\\\"hidden\\\">Updated on \"+moment(dashboard.attributes.meta.updated).format(app.date_format) + \"</span>\";\n\t\t} else {\n\t\t\telement += \"\t\t\t\t<span data-date=\\\"updated\\\" class=\\\"hidden\\\">Never been updated yet.</span>\";\n\t\t}\n\t\telement += \"\t\t\t</span>\";\n\t\telement += \"\t\t\t<span class=\\\"pull-right mdl-card__menuaction\\\">\";\n\t\telement += \"\t\t\t\t<button id=\\\"menu_\"+dashboard.id+\"\\\" class=\\\"mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect\\\">\";\n\t\telement += \"\t\t\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.menu+\"</i>\";\n\t\telement += \"\t\t\t\t</button>\";\n\t\telement += \"\t\t\t</span>\";\n\t\telement += \"\t\t\t<ul class=\\\"mdl-menu mdl-menu--top-right mdl-js-menu mdl-js-ripple-effect\\\" for=\\\"menu_\"+dashboard.id+\"\\\">\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item delete-button\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons delete-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+dashboard.id+\"\\\" data-name=\\\"\"+name+\"\\\">\"+app.icons.delete+\"</i>Delete</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons edit-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+dashboard.id+\"\\\" data-name=\\\"\"+name+\"\\\">\"+app.icons.edit+\"</i>Edit</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons copy-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+dashboard.id+\"\\\">\"+app.icons.copy+\"</i><textarea class=\\\"copytextarea\\\">\"+dashboard.id+\"</textarea>Copy ID to clipboard</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t</ul>\";\n\t\telement += \"\t\t</div>\";\n\t\telement += \"\t</div>\";\n\t\telement += \"</div>\";\n\n\t\treturn element;\n\t}\n};","\"use strict\";\napp.resources.rules = {\n\tonEdit: function(evt) {\n\t\tvar rule_id = evt.target.parentNode.getAttribute(\"data-id\")?evt.target.parentNode.getAttribute(\"data-id\"):evt.target.getAttribute(\"data-id\");\n\t\tif ( !rule_id ) {\n\t\t\ttoast(\"No Rule id found!\", {timeout:3000, type: \"error\"});\n\t\t} else {\n\t\t\tvar myForm = evt.target.parentNode.parentNode.parentNode.parentNode;\n\t\t\tvar body = {\n\t\t\t\tname: myForm.querySelector(\"input[name='Name']\").value,\n\t\t\t\tactive: !myForm.querySelector(\"input[id='switch-active']\").parentNode.classList.contains(\"is-checked\")?false:true,\n\t\t\t\trule: {\n\t\t\t\t\tpriority: myForm.querySelector(\"input[name='Priority']\").value,\n\t\t\t\t\tconditions: JSON.parse(myForm.querySelector(\"textarea[name='Event Conditions']\").value),\n\t\t\t\t\tevent: {\n\t\t\t\t\t\ttype: myForm.querySelector(\"select[name='Event Type']\").value,\n\t\t\t\t\t\tparams: JSON.parse(myForm.querySelector(\"textarea[name='Event Parameters']\").value),\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmeta: {revision: myForm.querySelector(\"input[name='meta.revision']\").value, },\n\t\t\t};\n\t\t\tif ( localStorage.getItem(\"settings.debug\") == \"true\" ) {\n\t\t\t\tconsole.log(\"DEBUG onEditRule\", JSON.stringify(body));\n\t\t\t}\n\t\t\tvar myHeaders = new Headers();\n\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\tvar myInit = { method: \"PUT\", headers: myHeaders, body: JSON.stringify(body) };\n\t\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/rules/\"+rule_id;\n\t\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse){ \n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tapp.setSection(\"rules\");\n\t\t\t\ttoast(\"Rule has been edited.\", {timeout:3000, type: \"done\"});\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\ttoast(\"Rule has not been edited.\", {timeout:3000, type: \"error\"});\n\t\t\t});\n\t\t\tevt.preventDefault();\n\t\t}\n\t},\n\tonAdd: function(evt) {\n\t\tvar myForm = evt.target.parentNode.parentNode.parentNode.parentNode;\n\t\tvar body = {\n\t\t\tname: myForm.querySelector(\"input[name='Name']\").value,\n\t\t\tactive: !myForm.querySelector(\"input[id='switch-active']\").parentNode.classList.contains(\"is-checked\")?false:true,\n\t\t\trule: {\n\t\t\t\tpriority: myForm.querySelector(\"input[name='Priority']\").value,\n\t\t\t\tconditions: JSON.parse(myForm.querySelector(\"textarea[name='Event Conditions']\").value),\n\t\t\t\tevent: {\n\t\t\t\t\ttype: myForm.querySelector(\"select[name='Event Type']\").value,\n\t\t\t\t\tparams: JSON.parse(myForm.querySelector(\"textarea[name='Event Parameters']\").value),\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tif ( localStorage.getItem(\"settings.debug\") == \"true\" ) {\n\t\t\tconsole.log(\"DEBUG onAddRule\", JSON.stringify(body));\n\t\t}\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"POST\", headers: myHeaders, body: JSON.stringify(body) };\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/rules/\";\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\tapp.setSection(\"rules\");\n\t\t\ttoast(\"Rule has been added.\", {timeout:3000, type: \"done\"});\n\t\t})\n\t\t.catch(function (error) {\n\t\t\ttoast(\"Rule has not been added.\", {timeout:3000, type: \"error\"});\n\t\t});\n\t\tevt.preventDefault();\n\t},\n\tonDelete: function(id) {\n\t},\n\tdisplay: function(id, isAdd, isEdit, isPublic) {\n\t\thistory.pushState( {section: \"rule\" }, window.location.hash.substr(1), \"#rule?id=\"+id );\n\t\tapp.initNewSection(\"rule\");\n\t\t\n\t\twindow.scrollTo(0, 0);\n\t\tapp.containers.spinner.removeAttribute(\"hidden\");\n\t\tapp.containers.spinner.classList.remove(\"hidden\");\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"GET\", headers: myHeaders };\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/rules/\"+id;\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\tfor (var i=0; i < (response.data).length ; i++ ) {\n\t\t\t\tvar rule = response.data[i];\n\t\t\t\tdocument.title = (app.sectionsPageTitles[\"rule\"]).replace(/%s/g, rule.attributes.name);\n\t\t\t\tvar node;\n\t\t\t\tvar btnId = [app.getUniqueId(), app.getUniqueId(), app.getUniqueId()];\n\t\t\t\t\n\t\t\t\tif ( isEdit ) {\n\t\t\t\t\tnode = \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+rule.id+\"\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tnode += \"\t\t<div class=\\\"mdl-list__item\\\">\";\n\t\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-primary-content'>\";\n\t\t\t\t\tnode += \"\t\t\t\t<i class=\\\"material-icons mdl-textfield__icon\\\">\"+app.icons.rules+\"</i>\";\n\t\t\t\t\tnode += \"\t\t\t\t<h2 class=\\\"mdl-card__title-text\\\">\"+rule.attributes.name+\"</h2>\";\n\t\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\t\tnode += \"\t\t\t<s&pan class='mdl-list__item-secondary-action'>\";\n\t\t\t\t\tnode += \"\t\t\t\t<button role='button' class='mdl-button mdl-js-button mdl-button--icon right showdescription_button' for='description-\"+rule.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t\t\t<i class='material-icons'>expand_more</i>\";\n\t\t\t\t\tnode += \"\t\t\t\t</button>\";\n\t\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\t\tnode += \"\t\t<div class='mdl-cell--12-col hidden' id='description-\"+rule.id+\"'>\";\n\n\t\t\t\t\tnode += app.getField(app.icons.code, \"Id\", rule.id, {type: \"text\", style:\"text-transform: none !important;\"});\n\t\t\t\t\tif ( rule.attributes.meta.created ) {\n\t\t\t\t\t\tnode += app.getField(app.icons.date, \"Created\", moment(rule.attributes.meta.created).format(app.date_format), {type: \"text\"});\n\t\t\t\t\t}\n\t\t\t\t\tif ( rule.attributes.meta.updated ) {\n\t\t\t\t\t\tnode += app.getField(app.icons.date, \"Updated\", moment(rule.attributes.meta.updated).format(app.date_format), {type: \"text\"});\n\t\t\t\t\t}\n\t\t\t\t\tif ( rule.attributes.meta.revision ) {\n\t\t\t\t\t\tnode += app.getField(app.icons.update, \"Revision\", rule.attributes.meta.revision, {type: \"text\"});\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+rule.id+\"\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tnode += app.getField(null, \"meta.revision\", rule.attributes.meta.revision, {type: \"hidden\", id: \"meta.revision\", pattern: app.patterns.meta_revision});\n\t\t\t\t\tnode += app.getField(app.icons.name, \"Name\", rule.attributes.name, {type: \"text\", id: \"Name\", isEdit: isEdit, pattern: app.patterns.name, error:\"Name should be set and more than 3 chars length.\"});\n\t\t\t\t\tnode += app.getField(\"add_circle_outline\", \"Event Type\", rule.attributes.rule.event.type, {type: \"select\", id: \"EventType\", options: app.EventTypes, isEdit: isEdit });\n\t\t\t\t\tnode += app.getField(\"swap_vert\", \"Priority\", rule.attributes.rule.priority, {type: \"text\", id: \"Priority\", isEdit: isEdit, pattern: app.patterns.integerNotNegative, error:\"Should be a positive integer.\"});\n\t\t\t\t\tnode += app.getField(\"traffic\", rule.attributes.active!==false?\"Rule is active\":\"Rule is disabled\", rule.attributes.active!==false?true:false, {type: \"switch\", id:\"active\", isEdit: isEdit});\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\n\t\t\t\t\tnode += app.getSubtitle(\"Event Conditions\");\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+rule.id+\"_parameters\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tnode += app.getField(app.icons.description, \"Event Conditions\", JSON.stringify(rule.attributes.rule.conditions), {type: \"textarea\", id: \"EventConditions\", isEdit: true});\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t\t\n\t\t\t\t\tnode += app.getSubtitle(\"Event Parameters\");\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+rule.id+\"_parameters\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\t//node += app.getField(\"note\", [\"Name\", \"Value\"], [\"\", \"\"], {type: \"2inputs\", pattern: [app.patterns.customAttributeName, app.patterns.customAttributeValue], error: [\"Name should not contains any space nor special char.\", \"Value is free.\"], id: [\"Name[]\", \"Value[]\"], isEdit: true});\n\t\t\t\t\tnode += app.getField(app.icons.description, \"Event Parameters\", JSON.stringify(rule.attributes.rule.event.params), {type: \"textarea\", id: \"EventParams\", isEdit: true});\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t\t\n\t\t\t\t\tnode += \"<section class='mdl-grid mdl-cell--12-col fixedActionButtons' data-id='\"+id+\"'>\";\n\t\t\t\t\tif( app.isLtr() ) node += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[0]+\"' class='back-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>chevron_left</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>View</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[0]+\"'>View Rule</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-right'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[1]+\"' class='save-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>save</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Save</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[1]+\"'>Save changes to Rule</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tif( !app.isLtr() ) node += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t\t\n\t\t\t\t\t(app.containers.rule).querySelector(\".page-content\").innerHTML = node;\n\t\t\t\t\tcomponentHandler.upgradeDom();\n\t\t\t\t\tapp.setExpandAction();\n\t\t\t\t\t\n\t\t\t\t\tapp.refreshButtonsSelectors();\n\t\t\t\t\tif ( document.getElementById(\"switch-active\") ) {\n\t\t\t\t\t\tdocument.getElementById(\"switch-active\").addEventListener(\"change\", function(e) {\n\t\t\t\t\t\t\tvar label = e.target.parentElement.querySelector(\"div.mdl-switch__label\");\n\t\t\t\t\t\t\tif ( document.getElementById(\"switch-active\").checked === true ) {\n\t\t\t\t\t\t\t\tlabel.innerText = \"Rule is active\";\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlabel.innerText = \"Rule is disabled\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tapp.buttons.backRule.addEventListener(\"click\", function(evt) { app.resources.rules.display(rule.id, false, false, false); }, false);\n\t\t\t\t\tapp.buttons.saveRule.addEventListener(\"click\", function(evt) { app.resources.rules.onEdit(evt); }, false);\n\t\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\tnode = \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+id+\"\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tnode += \"\t\t<div class=\\\"mdl-list__item\\\">\";\n\t\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-primary-content'>\";\n\t\t\t\t\tnode += \"\t\t\t\t<h2 class=\\\"mdl-card__title-text\\\">\";\n\t\t\t\t\tnode += \"\t\t\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.rules+\"</i>\";\n\t\t\t\t\tnode += \"\t\t\t\t\t\"+rule.attributes.name+\"</h2>\";\n\t\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-secondary-action'>\";\n\t\t\t\t\tnode += \"\t\t\t\t<button role='button' class='mdl-button mdl-js-button mdl-button--icon right showdescription_button' for='description-\"+id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t\t\t<i class='material-icons'>expand_more</i>\";\n\t\t\t\t\tnode += \"\t\t\t\t</button>\";\n\t\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\t\tnode += \"\t\t<div class='mdl-cell mdl-cell--12-col hidden' id='description-\"+id+\"'>\";\n\t\t\t\t\tnode += app.getField(app.icons.rules, \"Id\", rule.id, {type: \"text\"});\n\t\t\t\t\tif ( rule.attributes.meta.created ) {\n\t\t\t\t\t\tnode += app.getField(app.icons.date, \"Created\", moment(rule.attributes.meta.created).format(app.date_format), {type: \"text\"});\n\t\t\t\t\t}\n\t\t\t\t\tif ( rule.attributes.meta.updated ) {\n\t\t\t\t\t\tnode += app.getField(app.icons.date, \"Updated\", moment(rule.attributes.meta.updated).format(app.date_format), {type: \"text\"});\n\t\t\t\t\t}\n\t\t\t\t\tif ( rule.attributes.meta.revision ) {\n\t\t\t\t\t\tnode += app.getField(app.icons.update, \"Revision\", rule.attributes.meta.revision, {type: \"text\"});\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t</div>\"; // mdl-shadow--2dp\n\t\t\t\t\tnode +=\t\"</section>\";\n\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+rule.id+\"\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tnode += app.getField(\"add_circle_outline\", \"Event Type\", rule.attributes.rule.event.type, {type: \"select\", id: \"EventType\", options: app.EventTypes, isEdit: isEdit });\n\t\t\t\t\tnode += app.getField(\"swap_vert\", \"Priority\", rule.attributes.rule.priority, {type: \"text\", id: \"Priority\", isEdit: isEdit, pattern: app.patterns.integerNotNegative, error:\"Should be a positive integer.\"});\n\t\t\t\t\tnode += app.getField(\"traffic\", rule.attributes.active!==false?\"Rule is active\":\"Rule is disabled\", \"\", {type: \"switch\", id:\"active\", isEdit: isEdit});\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\n\t\t\t\t\tnode += app.getSubtitle(\"Event Conditions\");\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+rule.id+\"_parameters\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tnode += \"\t\t<pre>\";\n\t\t\t\t\tnode += \"\t\t\t<code class='nostyle'>\";\n\t\t\t\t\tnode += app.getField(app.icons.description, \"Event Conditions\", app.nl2br(JSON.stringify(rule.attributes.rule.conditions, null, \"\\t\")), {type: \"textarea\", id: \"EventConditions\", isEdit: isEdit});\n\t\t\t\t\tnode += \"\t\t\t</code>\";\n\t\t\t\t\tnode += \"\t\t</pre>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t\t\n\t\t\t\t\tnode += app.getSubtitle(\"Event Parameters\");\n\t\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+rule.id+\"_parameters\\\">\";\n\t\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\tnode += \"\t\t<pre>\";\n\t\t\t\t\tnode += \"\t\t\t<code class='nostyle'>\";\n\t\t\t\t\tnode += app.getField(app.icons.description, \"Event Parameters\", app.nl2br(JSON.stringify(rule.attributes.rule.event.params, null, \"\\t\")), {type: \"textarea\", id: \"EventParams\", isEdit: isEdit});\n\t\t\t\t\tnode += \"\t\t\t</code>\";\n\t\t\t\t\tnode += \"\t\t</pre>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t\t\n\t\t\t\t\tnode += \"<section class='mdl-grid mdl-cell--12-col fixedActionButtons' data-id='\"+rule.id+\"'>\";\n\t\t\t\t\tif( app.isLtr() ) {\n\t\t\t\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[0]+\"' class='list-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+rule.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>chevron_left</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>List</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[0]+\"'>List all Rules</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone delete-button'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[1]+\"' class='delete-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+rule.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>delete</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Delete</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[1]+\"'>Delete Rule</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-right'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[2]+\"' class='edit-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+rule.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>edit</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Edit</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[2]+\"'>Edit Rule</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tif( !app.isLtr() ) {\n\t\t\t\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"</section>\";\n\n\t\t\t\t\t(app.containers.rule).querySelector(\".page-content\").innerHTML = node;\n\t\t\t\t\tcomponentHandler.upgradeDom();\n\t\t\t\t\tapp.setExpandAction();\n\t\t\t\t\t\n\t\t\t\t\tapp.refreshButtonsSelectors();\n\t\t\t\t\tapp.buttons.listRule.addEventListener(\"click\", function(evt) { app.setSection(\"rules\"); evt.preventDefault(); }, false);\n\t\t\t\t\t// buttons.deleteRule2.addEventListener(\"click\",\n\t\t\t\t\t// function(evt) { console.log(\"SHOW MODAL AND CONFIRM!\");\n\t\t\t\t\t// }, false);\n\t\t\t\t\tapp.buttons.editRule2.addEventListener(\"click\", function(evt) { app.resources.rules.display(rule.id, false, true, false); evt.preventDefault(); }, false);\n\t\t\t\t}\n\t\t\t\tapp.setSection(\"rule\");\n\t\t\t}\n\t\t})\n\t\t.catch(function (error) {\n\t\t\tif ( localStorage.getItem(\"settings.debug\") == \"true\" ) {\n\t\t\t\ttoast(\"displayRule error occured...\" + error, {timeout:3000, type: \"error\"});\n\t\t\t}\n\t\t});\n\t\tapp.containers.spinner.setAttribute(\"hidden\", true);\n\t},\n\tdisplayPublic: function(id, isAdd, isEdit, isPublic) {\n\t},\n\tdisplayAdd: function(rule, isAdd, isEdit, isPublic) {\n\t\thistory.pushState( {section: \"rule_add\" }, window.location.hash.substr(1), \"#rule_add\" );\n\t\tapp.initNewSection(\"ruled_add\");\n\t\tvar node = \"\";\n\t\tnode = \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+rule.id+\"\\\">\";\n\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\tnode += app.getField(app.icons.name, \"Name\", rule.attributes.name, {type: \"text\", id: \"Name\", isEdit: true, pattern: app.patterns.name, error:\"Name should be set and more than 3 chars length.\"});\n\t\tnode += app.getField(\"add_circle_outline\", \"Event Type\", rule.attributes.event.type, {type: \"select\", id: \"EventType\", options: app.EventTypes, isEdit: true });\n\t\tnode += app.getField(\"swap_vert\", \"Priority\", rule.attributes.priority, {type: \"text\", id: \"Priority\", isEdit: true, pattern: app.patterns.integerNotNegative, error:\"Should be a positive integer.\"});\n\t\tnode += app.getField(\"traffic\", rule.attributes.active!=\"false\"?\"Rule is active\":\"Rule is disabled\", rule.attributes.active!==undefined?rule.attributes.active:true, {type: \"switch\", id:\"active\", isEdit: true});\n\t\tnode += \"\t</div>\";\n\t\tnode += \"</section>\";\n\n\t\tnode += app.getSubtitle(\"Event Conditions\");\n\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+rule.id+\"_parameters\\\">\";\n\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\tnode += app.getField(app.icons.description, \"Event Conditions\", app.nl2br(rule.attributes.event.conditions), {type: \"textarea\", id: \"EventConditions\", isEdit: true});\n\t\tnode += \"\t</div>\";\n\t\tnode += \"</section>\";\n\t\t\n\t\tnode += app.getSubtitle(\"Event Parameters\");\n\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+rule.id+\"_parameters\\\">\";\n\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\tnode += app.getField(\"note\", [\"Name\", \"Value\"], [\"\", \"\"], {type: \"2inputs\", pattern: [app.patterns.customAttributeName, app.patterns.customAttributeValue], error: [\"Name should not contains any space nor special char.\", \"Value is free.\"], id: [\"Name[]\", \"Value[]\"], isEdit: true});\n\t\tnode += app.getField(app.icons.description, \"Event Parameters\", app.nl2br(rule.attributes.event.parameters), {type: \"textarea\", id: \"EventParams\", isEdit: true});\n\t\tnode += \"\t</div>\";\n\t\tnode += \"</section>\";\n\t\t\n\t\tvar btnId = [app.getUniqueId(), app.getUniqueId(), app.getUniqueId()];\n\t\tnode += \"<section class='mdl-grid mdl-cell--12-col fixedActionButtons' data-id='\"+rule.id+\"'>\";\n\t\tif( app.isLtr() ) {\n\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t}\n\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\tnode += \"\t\t<button id='\"+btnId[0]+\"' class='back-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+rule.id+\"'>\";\n\t\tnode += \"\t\t\t<i class='material-icons'>chevron_left</i>\";\n\t\tnode += \"\t\t\t<label>List</label>\";\n\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[0]+\"'>List all Rules</label>\";\n\t\tnode += \"\t\t</button>\";\n\t\tnode += \"\t</div>\";\n\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-right'>\";\n\t\tnode += \"\t\t<button id='\"+btnId[1]+\"' class='add-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+rule.id+\"'>\";\n\t\tnode += \"\t\t\t<i class='material-icons'>edit</i>\";\n\t\tnode += \"\t\t\t<label>Save</label>\";\n\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[1]+\"'>Save new Rule</label>\";\n\t\tnode += \"\t\t</button>\";\n\t\tnode += \"\t</div>\";\n\t\tif( !app.isLtr() ) {\n\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t}\n\t\tnode += \"</section>\";\n\n\t\t(app.containers.rule_add).querySelector(\".page-content\").innerHTML = node;\n\t\tcomponentHandler.upgradeDom();\n\t\t\n\t\tapp.refreshButtonsSelectors();\n\t\t\n\t\tif ( document.getElementById(\"switch-active\") ) {\n\t\t\tdocument.getElementById(\"switch-active\").addEventListener(\"change\", function(e) {\n\t\t\t\tvar label = e.target.parentElement.querySelector(\"div.mdl-switch__label\");\n\t\t\t\tif ( document.getElementById(\"switch-active\").checked === true ) {\n\t\t\t\t\tlabel.innerText = \"Rule is active\";\n\t\t\t\t} else {\n\t\t\t\t\tlabel.innerText = \"Rule is disabled\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tapp.buttons.addRuleBack.addEventListener(\"click\", function(evt) { app.setSection(\"rules\"); evt.preventDefault(); }, false);\n\t\tapp.buttons.addRule.addEventListener(\"click\", function(evt) { app.resources.rules.onAdd(evt); }, false);\n\n\t\tapp.setExpandAction();\n\t},\n\tdisplayItem: function(rule) {\n\t\tvar type = \"rules\";\n\t\tvar name = rule.attributes.name!==undefined?rule.attributes.name:\"\";\n\t\tvar description = rule.attributes.description!==undefined?rule.attributes.description.substring(0, app.cardMaxChars):\"\";\n\t\tvar attributeType = rule.attributes.type!==undefined?rule.attributes.type:\"\";\n\t\tvar cssDisabled = rule.attributes.active!==true?\"is-disabled\":\"\";\n\t\t\n\t\tvar element = \"\";\n\t\telement += \"<div class=\\\"mdl-grid mdl-cell\\\" data-action=\\\"view\\\" data-type=\\\"\"+type+\"\\\" data-id=\\\"\"+rule.id+\"\\\">\";\n\t\telement += \"\t<div class=\\\"mdl-card mdl-shadow--2dp \"+cssDisabled+\"\\\">\";\n\t\telement += \"\t\t<div class=\\\"mdl-card__title\\\">\";\n\t\telement += \"\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.objects+\"</i>\";\n\t\telement += \"\t\t\t<h3 class=\\\"mdl-card__title-text\\\">\"+name+\"</h3>\";\n\t\telement += \"\t\t</div>\";\n\t\telement += app.getField(null, null, description, {type: \"textarea\", isEdit: false});\n\t\telement += \"\t\t<div class=\\\"mdl-card__actions mdl-card--border\\\">\";\n\t\telement += \"\t\t\t<span class=\\\"pull-left mdl-card__date\\\">\";\n\t\telement += \"\t\t\t\t<button data-id=\\\"\"+rule.id+\"\\\" class=\\\"swapDate mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect\\\">\";\n\t\telement += \"\t\t\t\t\t<i class=\\\"material-icons\\\">update</i>\";\n\t\telement += \"\t\t\t\t</button>\";\n\t\telement += \"\t\t\t\t<span data-date=\\\"created\\\" class=\\\"visible\\\">Created on \"+moment(rule.attributes.meta.created).format(app.date_format) + \"</span>\";\n\t\tif ( rule.attributes.meta.updated ) {\n\t\t\telement += \"\t\t\t\t<span data-date=\\\"updated\\\" class=\\\"hidden\\\">Updated on \"+moment(rule.attributes.meta.updated).format(app.date_format) + \"</span>\";\n\t\t} else {\n\t\t\telement += \"\t\t\t\t<span data-date=\\\"updated\\\" class=\\\"hidden\\\">Never been updated yet.</span>\";\n\t\t}\n\t\telement += \"\t\t\t</span>\";\n\t\telement += \"\t\t\t<span class=\\\"pull-right mdl-card__menuaction\\\">\";\n\t\telement += \"\t\t\t\t<button id=\\\"menu_\"+rule.id+\"\\\" class=\\\"mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect\\\">\";\n\t\telement += \"\t\t\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.menu+\"</i>\";\n\t\telement += \"\t\t\t\t</button>\";\n\t\telement += \"\t\t\t</span>\";\n\t\telement += \"\t\t\t<ul class=\\\"mdl-menu mdl-menu--top-right mdl-js-menu mdl-js-ripple-effect\\\" for=\\\"menu_\"+rule.id+\"\\\">\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item delete-button\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons delete-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+rule.id+\"\\\" data-name=\\\"\"+name+\"\\\">\"+app.icons.delete+\"</i>Delete</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons edit-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+rule.id+\"\\\" data-name=\\\"\"+name+\"\\\">\"+app.icons.edit+\"</i>Edit</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons copy-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+rule.id+\"\\\">\"+app.icons.copy+\"</i><textarea class=\\\"copytextarea\\\">\"+rule.id+\"</textarea>Copy ID to clipboard</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t</ul>\";\n\t\telement += \"\t\t</div>\";\n\t\telement += \"\t</div>\";\n\t\telement += \"</div>\";\n\n\t\treturn element;\n\t}\n};","\"use strict\";\napp.resources.mqtts = {\n\tonEdit: function(evt) {\n\t},\n\tonAdd: function(evt) {\n\t},\n\tonDelete: function(id) {\n\t},\n\tdisplay: function(id, isAdd, isEdit, isPublic) {\n\t},\n\tdisplayPublic: function(id, isAdd, isEdit, isPublic) {\n\t},\n\tdisplayAdd: function(mqtt, isAdd, isEdit, isPublic) {\n\t},\n\tdisplayItem: function(mqtt) {\n\t\tvar type = \"mqtts\";\n\t\tvar name = mqtt.attributes.name!==undefined?mqtt.attributes.name:\"\";\n\t\tvar description = mqtt.attributes.description!==undefined?mqtt.attributes.description.substring(0, app.cardMaxChars):\"\";\n\t\tvar attributeType = mqtt.attributes.type!==undefined?mqtt.attributes.type:\"\";\n\t\t\n\t\tvar element = \"\";\n\t\telement += \"<div class=\\\"mdl-grid mdl-cell\\\" data-action=\\\"view\\\" data-type=\\\"\"+type+\"\\\" data-id=\\\"\"+mqtt.id+\"\\\">\";\n\t\telement += \"\t<div class=\\\"mdl-card mdl-shadow--2dp\\\">\";\n\t\telement += \"\t\t<div class=\\\"mdl-card__title\\\">\";\n\t\telement += \"\t\t\t<i class=\\\"material-icons mdl-textfield__icon\\\">\"+app.icons.objects+\"</i>\";\n\t\telement += \"\t\t\t<h3 class=\\\"mdl-card__title-text\\\">\"+name+\"</h3>\";\n\t\telement += \"\t\t</div>\";\n\t\telement += app.getField(null, null, description, {type: \"textarea\", isEdit: false});\n\t\telement += \"\t\t<div class=\\\"mdl-card__actions mdl-card--border\\\">\";\n\t\telement += \"\t\t\t<span class=\\\"pull-left mdl-card__date\\\">\";\n\t\telement += \"\t\t\t\t<button data-id=\\\"\"+mqtt.id+\"\\\" class=\\\"swapDate mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect\\\">\";\n\t\telement += \"\t\t\t\t\t<i class=\\\"material-icons\\\">update</i>\";\n\t\telement += \"\t\t\t\t</button>\";\n\t\telement += \"\t\t\t\t<span data-date=\\\"created\\\" class=\\\"visible\\\">Created on \"+moment(mqtt.attributes.meta.created).format(app.date_format) + \"</span>\";\n\t\tif ( mqtt.attributes.meta.updated ) {\n\t\t\telement += \"\t\t\t\t<span data-date=\\\"updated\\\" class=\\\"hidden\\\">Updated on \"+moment(mqtt.attributes.meta.updated).format(app.date_format) + \"</span>\";\n\t\t} else {\n\t\t\telement += \"\t\t\t\t<span data-date=\\\"updated\\\" class=\\\"hidden\\\">Never been updated yet.</span>\";\n\t\t}\n\t\telement += \"\t\t\t</span>\";\n\t\telement += \"\t\t\t<span class=\\\"pull-right mdl-card__menuaction\\\">\";\n\t\telement += \"\t\t\t\t<button id=\\\"menu_\"+mqtt.id+\"\\\" class=\\\"mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect\\\">\";\n\t\telement += \"\t\t\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.menu+\"</i>\";\n\t\telement += \"\t\t\t\t</button>\";\n\t\telement += \"\t\t\t</span>\";\n\t\telement += \"\t\t\t<ul class=\\\"mdl-menu mdl-menu--top-right mdl-js-menu mdl-js-ripple-effect\\\" for=\\\"menu_\"+mqtt.id+\"\\\">\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item delete-button\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons delete-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+mqtt.id+\"\\\" data-name=\\\"\"+name+\"\\\">\"+app.icons.delete+\"</i>Delete</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons edit-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+mqtt.id+\"\\\" data-name=\\\"\"+name+\"\\\">\"+app.icons.edit+\"</i>Edit</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons copy-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+mqtt.id+\"\\\">\"+app.icons.copy+\"</i><textarea class=\\\"copytextarea\\\">\"+mqtt.id+\"</textarea>Copy ID to clipboard</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t</ul>\";\n\t\telement += \"\t\t</div>\";\n\t\telement += \"\t</div>\";\n\t\telement += \"</div>\";\n\n\t\treturn element;\n\t}\n};","\"use strict\";\napp.resources.sources = {\n\tonEdit: function(evt) {\n\t\tvar source_id = evt.target.parentNode.getAttribute(\"data-id\")?evt.target.parentNode.getAttribute(\"data-id\"):evt.target.getAttribute(\"data-id\");\n\t\tif ( !source_id ) {\n\t\t\ttoast(\"No Source id found!\", {timeout:3000, type: \"error\"});\n\t\t} else {\n\t\t\tvar myForm = evt.target.parentNode.parentNode.parentNode.parentNode;\n\t\t\tvar body = {\n\t\t\t\tname: myForm.querySelector(\"input[name='Name']\").value,\n\t\t\t\tcontent: myForm.querySelector(\"textarea[id='Code']\").value,\n\t\t\t\tpassword: myForm.querySelector(\"input[id='password']\")!==null?myForm.querySelector(\"input[id='password']\").value:\"\",\n\t\t\t};\n\t\n\t\t\tvar myHeaders = new Headers();\n\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\tvar myInit = { method: \"PUT\", headers: myHeaders, body: JSON.stringify(body) };\n\t\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/sources/\"+source_id;\n\t\t\tfetch(url, myInit)\n\t\t\t.then(\n\t\t\t\tapp.fetchStatusHandler\n\t\t\t).then(function(fetchResponse){ \n\t\t\t\treturn fetchResponse.json();\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tapp.setSection(\"sources\");\n\t\t\t\ttoast(\"Source has been saved.\", {timeout:3000, type: \"done\"});\n\t\t\t\t//var objectContainer = document.querySelector(\"section#sources div[data-id='\"+source_id+\"']\");\n\t\t\t\t//objectContainer.querySelector(\"h2\").innerHTML = body.name;\n\t\t\t\t//objectContainer.querySelector(\"div.mdl-list__item--three-line.small-padding span.mdl-list__item-sub-title\").innerHTML = app.nl2br(body.description.substring(0, app.cardMaxChars));\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\ttoast(\"Source has not been saved.\", {timeout:3000, type: \"error\"});\n\t\t\t});\n\t\t\tevt.preventDefault();\n\t\t\tapp.getSources();\n\t\t}\n\t},\n\tonAdd: function(evt) {\n\t\tvar myForm = evt.target.parentNode.parentNode.parentNode.parentNode;\n\t\tvar body = {\n\t\t\t\tname: myForm.querySelector(\"input[name='Name']\").value,\n\t\t\t\tcontent: myForm.querySelector(\"textarea[id='Code']\").value,\n\t\t\t\tpassword: myForm.querySelector(\"input[id='password']\")!==null?myForm.querySelector(\"input[id='password']\").value:\"\",\n\t\t};\n\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"POST\", headers: myHeaders, body: JSON.stringify(body) };\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/sources/\";\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\tapp.setSection(\"sources\");\n\t\t\ttoast(\"Source has been added.\", {timeout:3000, type: \"done\"});\n\t\t})\n\t\t.catch(function (error) {\n\t\t\ttoast(\"Source has not been added.\", {timeout:3000, type: \"error\"});\n\t\t});\n\t\tevt.preventDefault();\n\t\tapp.getSources();\n\t},\n\tonDelete: function(id) {\n\t\tapp.getSources();\n\t},\n\tonBuild: function(id, filter_object_id) {\n\t\t// Get all objects linked to the source\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"GET\", headers: myHeaders };\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/ota/\"+id;\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\t// build all objects\n\t\t\tfor (var i=0; i < (response.data).length ; i++ ) {\n\t\t\t\tlet object_id = response.data[i].id;\n\t\t\t\tif (filter_object_id===null || filter_object_id === object_id) {\n\t\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\t\t\tvar myInit = { method: \"POST\", headers: myHeaders };\n\t\t\t\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/objects/\"+object_id+\"/build\";\n\t\t\t\t\tfetch(url, myInit)\n\t\t\t\t\t.then(\n\t\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t\t).then(function(fetchResponse){ \n\t\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t\t})\n\t\t\t\t\t.then(function(response) {\n\t\t\t\t\t\t// let's wait\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar len = filter_object_id===null?(response.data).length:1;\n\t\t\ttoast(\"Source is building all \"+len+\" Object(s). This can take several minutes.\", {timeout:10000, type: \"info\"});\n\t\t});\n\t\t\n\t},\n\tonUnlinkObject: function(source_id, object_id) {\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"POST\", headers: myHeaders };\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/objects/\"+object_id+\"/unlink/\"+source_id;\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\tdocument.getElementById(\"object_\"+object_id).classList.add(\"removed\");\n\t\t\ttoast(\"Object is unlinked from this source.\", {timeout:3000, type: \"info\"});\n\t\t});\n\t\t\n\t},\n\tonDeploy: function(id, object_id) {\n\t\t// Get all objects linked to the source\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"POST\", headers: myHeaders };\n\t\tvar o = object_id!==null?\"/\"+object_id:\"\";\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/ota/\"+id+\"/deploy\"+o;\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\ttoast(\"Source is deploying to all \"+(response.deploying_to_objects.data).length+\" available Object(s). This can take several minutes.\", {timeout:10000, type: \"info\"});\n\t\t});\n\t\t\n\t},\n\tdisplay: function(id, isAdd, isEdit, isPublic) {\n\t\twindow.scrollTo(0, 0);\n\t\tif (id instanceof Object && isAdd) {\n\t\t\tdisplayAdd(id, isAdd, isEdit, isPublic);\n\t\t} else {\n\t\t\thistory.pushState( {section: \"source\" }, window.location.hash.substr(1), \"#source?id=\"+id );\n\t\t}\n\t\tapp.initNewSection(\"source\");\n\t\tapp.containers.spinner.removeAttribute(\"hidden\");\n\t\tapp.containers.spinner.classList.remove(\"hidden\");\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"GET\", headers: myHeaders };\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/sources/\"+id;\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){ \n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\tfor (var i=0; i < (response.data).length ; i++ ) {\n\t\t\t\tvar source = response.data[i];\n\t\t\t\tvar content = source.attributes.content!==undefined?source.attributes.content:\"\";\n\t\t\t\tcontent = isEdit?content:app.nl2br(app.escapeHtml(content));\n\n\t\t\t\tdocument.title = (app.sectionsPageTitles[\"source\"]).replace(/%s/g, source.attributes.name);\n\t\t\t\tvar node = \"\";\n\t\t\t\tnode = \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" data-id=\\\"\"+source.id+\"\\\">\";\n\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\tnode += \"\t\t<div class=\\\"mdl-list__item\\\">\";\n\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-primary-content'>\";\n\t\t\t\tnode += \"\t\t\t\t<i class=\\\"material-icons mdl-textfield__icon\\\">\"+app.icons.sources+\"</i>\";\n\t\t\t\tnode += \"\t\t\t\t<h2 class=\\\"mdl-card__title-text\\\">\"+source.attributes.name+\"</h2>\";\n\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-secondary-action'>\";\n\t\t\t\tnode += \"\t\t\t\t<button role='button' class='mdl-button mdl-js-button mdl-button--icon right showdescription_button' for='description-\"+source.id+\"'>\";\n\t\t\t\tnode += \"\t\t\t\t\t<i class='material-icons'>expand_more</i>\";\n\t\t\t\tnode += \"\t\t\t\t</button>\";\n\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\tnode += \"\t\t<div class='mdl-cell--12-col hidden' id='description-\"+source.id+\"'>\";\n\n\t\t\t\tnode += app.getField(app.icons.code, \"Id\", source.id, {type: \"text\", style:\"text-transform: none !important;\"});\n\t\t\t\tif ( source.attributes.meta.created ) {\n\t\t\t\t\tnode += app.getField(app.icons.date, \"Created\", moment(source.attributes.meta.created).format(app.date_format), {type: \"text\"});\n\t\t\t\t}\n\t\t\t\tif ( source.attributes.meta.updated ) {\n\t\t\t\t\tnode += app.getField(app.icons.date, \"Updated\", moment(source.attributes.meta.updated).format(app.date_format), {type: \"text\"});\n\t\t\t\t}\n\t\t\t\tif ( source.attributes.meta.revision ) {\n\t\t\t\t\tnode += app.getField(app.icons.update, \"Revision\", source.attributes.meta.revision, {type: \"text\"});\n\t\t\t\t}\n\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\tnode += \"\t</div>\";\n\t\t\t\tnode += \"</section>\";\n\t\t\t\t\n\t\t\t\tnode += app.getSubtitle(\"Security\");\n\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\tnode += app.getField(\"verified_user\", \"OTA Password\", source.attributes.password!==undefined?source.attributes.password:\"\", {type: \"text\", style:\"text-transform: none !important;\", id: \"password\", isEdit: isEdit, pattern: app.patterns.password, error:\"\"});\n\t\t\t\tnode += \"\t</div>\";\n\t\t\t\tnode += \"</section>\";\n\t\t\t\t\n\t\t\t\tnode += app.getSubtitle(\"Parameters\");\n\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\tnode += app.getField(null, \"meta.revision\", source.attributes.meta.revision, {type: \"hidden\", id: \"meta.revision\", pattern: app.patterns.meta_revision});\n\t\t\t\tnode += app.getField(app.icons.name, \"Name\", source.attributes.name, {type: \"text\", id: \"Name\", isEdit: isEdit, pattern: app.patterns.name, error:\"Name should be set and more than 3 chars length.\"});\n\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\tnode += \"\t</div>\";\n\t\t\t\tnode += \"</section>\";\n\t\t\t\t\n\t\t\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\tnode += \"\t\t<div class=\\\"mdl-list__item\\\">\";\n\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-primary-content'>\";\n\t\t\t\tnode += \"\t\t\t\t<i class=\\\"material-icons mdl-textfield__icon\\\">\"+app.icons.sources+\"</i>\";\n\t\t\t\tnode += \"\t\t\t\t<h2 class=\\\"mdl-card__title-text\\\">Arduino Source Code (version \"+source.attributes.version+\")</h2>\";\n\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\tnode += \"\t\t\t<span class='mdl-list__item-secondary-action'>\";\n\t\t\t\tnode += \"\t\t\t\t<button role='button' class='mdl-button mdl-js-button mdl-button--icon right showsource_button' for='source_of_\"+source.id+\"'>\";\n\t\t\t\tnode += \"\t\t\t\t\t<i class='material-icons'>expand_more</i>\";\n\t\t\t\tnode += \"\t\t\t\t</button>\";\n\t\t\t\tnode += \"\t\t\t</span>\";\n\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\tnode += \"\t\t<div class='mdl-cell--12-col hidden' id='source_of_\"+source.id+\"'>\";\n\t\t\t\tnode += app.getField(app.icons.code, \"Arduino Source Code\", content, {type: \"textarea\", id: \"Code\", isEdit: isEdit});\n\t\t\t\tnode += \"\t\t</div>\";\n\t\t\t\tnode += \"\t</div>\";\n\t\t\t\tnode += \"</section>\";\n\t\t\t\t\n\t\t\t\tnode += \"<section class=\\\"mdl-cell--12-col\\\" id=\\\"children\\\">\";\n\t\t\t\tnode += \"</section>\";\n\t\t\t\t\n\t\t\t\tnode += \"<section class=\\\"mdl-cell--12-col\\\" id=\\\"objects_linked\\\">\";\n\t\t\t\tnode += \"</section>\";\n\n\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\t\tvar myInit = { method: \"GET\", headers: myHeaders };\n\t\t\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/sources/\"+source.id+\"/child\";\n\t\t\t\tfetch(url, myInit)\n\t\t\t\t.then(\n\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t).then(function(fetchResponse){ \n\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t})\n\t\t\t\t.then(function(child) {\n\t\t\t\t\tvar node_child = \"\";\n\t\t\t\t\tif((child.data).length>0) {\n\t\t\t\t\t\tvar elChild = document.createElement(\"div\");\n\t\t\t\t\t\telChild.innerHTML = app.getSubtitle(\"Source children\");\n\t\t\t\t\t\tdocument.getElementById(\"children\").appendChild(elChild);\n\t\t\t\t\t}\n\t\t\t\t\tfor (var i=0; i < (child.data).length ; i++ ) {\n\t\t\t\t\t\tvar c = child.data[i];\n\t\t\t\t\t\tnode_child += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\t\t\t\t\tnode_child += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\t\tnode_child += \"\t<span class=\\\"pull-left mdl-card__date\\\">\";\n\t\t\t\t\t\tnode_child += app.getField(app.icons.code, \"Name\", c.attributes.name!==undefined?c.attributes.name:\"\", {type: \"text\", isEdit: false});\n\t\t\t\t\t\tnode_child += app.getField(app.icons.version, \"Version\", c.attributes.version!==undefined?c.attributes.version:\"\", {type: \"text\", isEdit: false});\n\t\t\t\t\t\tnode_child += app.getField(app.icons.date, \"Created\", moment(c.attributes.meta.created).format(app.date_format), {type: \"text\", isEdit: false});\n\t\t\t\t\t\tnode_child += \"\t</span>\";\n\t\t\t\t\t\tnode_child += \"\t<span class=\\\"pull-right mdl-card__menuaction edit_children_source\\\">\";\n\t\t\t\t\t\tnode_child += \"\t\t<button data-id=\\\"\"+c.id+\"\\\" class=\\\"child_edit_btn mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect\\\">\";\n\t\t\t\t\t\tnode_child += \"\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.edit+\"</i>\";\n\t\t\t\t\t\tnode_child += \"\t\t</button>\";\n\t\t\t\t\t\tnode_child += \"\t</span>\";\n\t\t\t\t\t\tnode_child += \"\t</div>\";\n\t\t\t\t\t\tnode_child += \"</section>\";\n\t\t\t\t\t}\n\t\t\t\t\tdocument.getElementById(\"children\").innerHTML += node_child;\n\t\t\t\t\tapp.refreshButtonsSelectors();\n\t\t\t\t\tfor (var i in app.buttons.editSourceChild) {\n\t\t\t\t\t\tif ( app.buttons.editSourceChild[i].childElementCount > -1 ) {\n\t\t\t\t\t\t\tapp.buttons.editSourceChild[i].addEventListener(\"click\", function(evt) {\n\t\t\t\t\t\t\t\tapp.resources.sources.display(evt.target.parentNode.getAttribute(\"data-id\"), false, true, false);\n\t\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t\t}, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvar myHeaders = new Headers();\n\t\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\t\tvar myInit = { method: \"GET\", headers: myHeaders };\n\t\t\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/ota/\"+source.id+\"?ota-status=true\";\n\t\t\t\tfetch(url, myInit)\n\t\t\t\t.then(\n\t\t\t\t\tapp.fetchStatusHandler\n\t\t\t\t).then(function(fetchResponse){ \n\t\t\t\t\treturn fetchResponse.json();\n\t\t\t\t})\n\t\t\t\t.then(function(o_links) {\n\t\t\t\t\tvar node_objects_linked = \"\";\n\t\t\t\t\tif((o_links.data).length>0) {\n\t\t\t\t\t\tvar elObjects = document.createElement(\"div\");\n\t\t\t\t\t\telObjects.innerHTML = app.getSubtitle(\"Objects linked\");\n\t\t\t\t\t\tdocument.getElementById(\"objects_linked\").appendChild(elObjects);\n\t\t\t\t\t}\n\t\t\t\t\tfor (var i=0; i < (o_links.data).length ; i++ ) {\n\t\t\t\t\t\tvar o = o_links.data[i];\n\t\t\t\t\t\tnode_objects_linked += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\" id=\\\"object_\"+o.id+\"\\\" data-type=\\\"linkedObject\\\">\";\n\t\t\t\t\t\tnode_objects_linked += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\t\t\t\t\tnode_objects_linked += \"\t\t<div class=\\\"mdl-list__item--three-line small-padding  mdl-card--expand\\\">\";\n\t\t\t\t\t\tnode_objects_linked += app.getField(app.icons.objects, null, o.attributes.name!==undefined?o.attributes.name:\"\", {type: \"text\", isEdit: false});\n\t\t\t\t\t\tnode_objects_linked += app.getField(\"my_location\", \"IPv4\", o.attributes.ipv4!==undefined?o.attributes.ipv4:\"\", {type: \"text\", isEdit: false});\n\t\t\t\t\t\tnode_objects_linked += app.getField(app.icons.code, \"Fqbn string\", o.attributes.fqbn!==undefined?o.attributes.fqbn:\"\", {type: \"text\", isEdit: false});\n\t\t\t\t\t\tnode_objects_linked += app.getField(app.icons.code, \"version\", o.attributes.source_version!==undefined?o.attributes.source_version:\"\", {type: \"text\", isEdit: false});\n\t\t\t\t\t\tnode_objects_linked += app.getField(o.attributes.is_connected===true?\"flash_on\":\"flash_off\", \"Status\", o.attributes.is_connected===true?\"Active\":\"Inactive\", {type: \"text\", isEdit: false});\n\t\t\t\t\t\tnode_objects_linked += \"\t\t</div>\";\n\t\t\t\t\t\tnode_objects_linked += \"\t\t<div class=\\\"mdl-card__actions mdl-card--border\\\">\";\n\t\t\t\t\t\tnode_objects_linked += \"\t\t\t<button data-id=\\\"\"+o.id+\"\\\" class=\\\"object_link_off_btn mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect\\\">\";\n\t\t\t\t\t\tnode_objects_linked += \"\t\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.link_off+\"</i>Unlink\";\n\t\t\t\t\t\tnode_objects_linked += \"\t\t\t</button>\";\n\t\t\t\t\t\tnode_objects_linked += \"\t\t\t<button data-id=\\\"\"+o.id+\"\\\" class=\\\"object_build_btn mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect\\\">\";\n\t\t\t\t\t\tnode_objects_linked += \"\t\t\t\t<i class=\\\"arduino-icon build\\\"> </i> Build\";\n\t\t\t\t\t\tnode_objects_linked += \"\t\t\t</button>\";\n\t\t\t\t\t\tnode_objects_linked += \"\t\t\t<button data-id=\\\"\"+o.id+\"\\\" class=\\\"object_deploy_btn mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect\\\">\";\n\t\t\t\t\t\tnode_objects_linked += \"\t\t\t\t<i class=\\\"arduino-icon deploy\\\"> </i> Deploy\";\n\t\t\t\t\t\tnode_objects_linked += \"\t\t\t</button>\";\n\t\t\t\t\t\tnode_objects_linked += \"\t\t\t<button data-id=\\\"\"+o.id+\"\\\" class=\\\"object_edit_btn mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect\\\">\";\n\t\t\t\t\t\tnode_objects_linked += \"\t\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.edit+\"</i>Edit\";\n\t\t\t\t\t\tnode_objects_linked += \"\t\t\t</button>\";\n\t\t\t\t\t\tnode_objects_linked += \"\t\t</div>\";\n\t\t\t\t\t\tnode_objects_linked += \"\t</div>\";\n\t\t\t\t\t\tnode_objects_linked += \"</section>\";\n\t\t\t\t\t}\n\t\t\t\t\tdocument.getElementById(\"objects_linked\").innerHTML += node_objects_linked;\n\t\t\t\t\tapp.refreshButtonsSelectors();\n\t\t\t\t\tfor (var i in app.buttons.editSourceObject) {\n\t\t\t\t\t\tif ( app.buttons.editSourceObject[i].childElementCount > -1 ) {\n\t\t\t\t\t\t\tapp.buttons.editSourceObject[i].addEventListener(\"click\", function(evt) {\n\t\t\t\t\t\t\t\tapp.resources.objects.display(evt.target.parentNode.getAttribute(\"data-id\"), false, true, false);\n\t\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t\t}, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (var i in app.buttons.expandSourceButtons) {\n\t\t\t\t\t\tif ( (app.buttons.expandSourceButtons[i]).childElementCount > -1 ) {\n\t\t\t\t\t\t\t(app.buttons.expandSourceButtons[i]).addEventListener('click', app.expand, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (var i in app.buttons.link_offSourceObject) {\n\t\t\t\t\t\tif ( app.buttons.link_offSourceObject[i].childElementCount > -1 ) {\n\t\t\t\t\t\t\tapp.buttons.link_offSourceObject[i].addEventListener(\"click\", function(evt) {\n\t\t\t\t\t\t\t\tapp.resources.sources.onUnlinkObject(source.id, evt.target.parentNode.getAttribute(\"data-id\"));\n\t\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t\t}, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (var i in app.buttons.deploySourceObject) {\n\t\t\t\t\t\tif ( app.buttons.deploySourceObject[i].childElementCount > -1 ) {\n\t\t\t\t\t\t\tapp.buttons.deploySourceObject[i].addEventListener(\"click\", function(evt) {\n\t\t\t\t\t\t\t\tapp.resources.sources.onDeploy(source.id, evt.target.parentNode.getAttribute(\"data-id\"));\n\t\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t\t}, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (var i in app.buttons.buildSourceObject) {\n\t\t\t\t\t\tif ( app.buttons.buildSourceObject[i].childElementCount > -1 ) {\n\t\t\t\t\t\t\tapp.buttons.buildSourceObject[i].addEventListener(\"click\", function(evt) {\n\t\t\t\t\t\t\t\tapp.resources.sources.onBuild(source.id, evt.target.parentNode.getAttribute(\"data-id\"));\n\t\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t\t}, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvar btnId = [app.getUniqueId(), app.getUniqueId(), app.getUniqueId(), app.getUniqueId(), app.getUniqueId()];\n\t\t\t\tif ( isEdit ) {\n\t\t\t\t\tnode += \"<section class='mdl-grid mdl-cell--12-col fixedActionButtons' data-id='\"+source.id+\"'>\";\n\t\t\t\t\tif( app.isLtr() ) node += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[0]+\"' class='back-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+source.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>chevron_left</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>View</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[0]+\"'>View Source</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-right'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[1]+\"' class='save-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+source.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>save</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Save</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[1]+\"'>Save changes to Source</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tif( !app.isLtr() ) node += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t} else {\n\t\t\t\t\tnode += \"<section class='mdl-grid mdl-cell--12-col fixedActionButtons' data-id='\"+source.id+\"'>\";\n\t\t\t\t\tif( app.isLtr() ) {\n\t\t\t\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[0]+\"' class='list-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+source.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>chevron_left</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>List</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[0]+\"'>List all Sources</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone delete-button'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[1]+\"' class='delete-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+source.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>delete</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Delete</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[1]+\"'>Delete Source...</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[2]+\"' class='build-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+source.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='arduino-icon build'> </i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Build All</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[2]+\"'>Build Arduino</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[3]+\"' class='deploy-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+source.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='arduino-icon deploy'> </i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Deploy All</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[3]+\"'>Deploy to Objects</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-right'>\";\n\t\t\t\t\tnode += \"\t\t<button id='\"+btnId[4]+\"' class='edit-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+source.id+\"'>\";\n\t\t\t\t\tnode += \"\t\t\t<i class='material-icons'>edit</i>\";\n\t\t\t\t\tnode += \"\t\t\t<label>Edit</label>\";\n\t\t\t\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[4]+\"'>Edit Source</label>\";\n\t\t\t\t\tnode += \"\t\t</button>\";\n\t\t\t\t\tnode += \"\t</div>\";\n\t\t\t\t\tif( !app.isLtr() ) {\n\t\t\t\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t\t\t\t}\n\t\t\t\t\tnode += \"</section>\";\n\t\t\t\t}\n\n\t\t\t\t(app.containers.source).querySelector(\".page-content\").innerHTML = node;\n\t\t\t\tcomponentHandler.upgradeDom();\n\t\t\t\t\n\t\t\t\tapp.refreshButtonsSelectors();\n\t\t\t\tif ( isEdit ) {\n\t\t\t\t\tapp.buttons.backSource.addEventListener(\"click\", function(evt) { app.resources.sources.display(source.id, false, false, false); }, false);\n\t\t\t\t\tapp.buttons.saveSource.addEventListener(\"click\", function(evt) { app.resources.sources.onEdit(evt); }, false);\n\t\t\t\t} else {\n\t\t\t\t\tapp.buttons.listSource.addEventListener(\"click\", function(evt) { app.setSection(\"sources\"); evt.preventDefault(); }, false);\n\t\t\t\t\t// buttons.deleteObject2.addEventListener(\"click\",\n\t\t\t\t\t// function(evt) { console.log('SHOW MODAL AND CONFIRM!');\n\t\t\t\t\t// }, false);\n\t\t\t\t\tapp.buttons.editSource2.addEventListener(\"click\", function(evt) { app.resources.sources.display(source.id, false, true, false); evt.preventDefault(); }, false);\n\t\t\t\t\tapp.buttons.buildSource.addEventListener(\"click\", function(evt) { app.resources.sources.onBuild(source.id, null); evt.preventDefault(); }, false);\n\t\t\t\t\tapp.buttons.deploySource.addEventListener(\"click\", function(evt) { app.resources.sources.onDeploy(source.id, null); evt.preventDefault(); }, false);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tapp.setExpandAction();\n\t\t\t\tapp.setSection(\"source\");\n\t\t\t}\n\t\t})\n\t\t.catch(function (error) {\n\t\t\tif ( localStorage.getItem(\"settings.debug\") == \"true\" ) {\n\t\t\t\ttoast(\"displaySource error occured...\" + error, {timeout:3000, type: \"error\"});\n\t\t\t}\n\t\t});\n\t\tapp.containers.spinner.setAttribute(\"hidden\", true);\n\t},\n\tdisplayPublic: function(id, isAdd, isEdit, isPublic) {\n\t},\n\tdisplayAdd: function(source, isAdd, isEdit, isPublic) {\n\t\thistory.pushState( {section: \"source_add\" }, window.location.hash.substr(1), \"#source_add\" );\n\t\tapp.initNewSection(\"source_add\");\n\t\tvar node = \"\";\n\t\tsource.id = source.id!==\"\"?source.id:app.getUniqueId();\n\t\tvar content = source.attributes.content!==undefined?source.attributes.content:\"\";\n\n\t\tnode += app.getSubtitle(\"Security\");\n\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\tnode += app.getField(\"verified_user\", \"OTA Password\", source.attributes.password!==undefined?source.attributes.password:\"\", {type: \"text\", style:\"text-transform: none !important;\", id: \"password\", isEdit: true, pattern: app.patterns.password, error:\"\"});\n\t\tnode += \"\t</div>\";\n\t\tnode += \"</section>\";\n\t\t\n\t\tnode += app.getSubtitle(\"Parameters\");\n\t\tnode += \"<section class=\\\"mdl-grid mdl-cell--12-col\\\">\";\n\t\tnode += \"\t<div class=\\\"mdl-cell--12-col mdl-card mdl-shadow--2dp\\\">\";\n\t\tnode += app.getField(app.icons.name, \"Name\", source.attributes.name, {type: \"text\", id: \"Name\", isEdit: true, pattern: app.patterns.name, error:\"Name should be set and more than 3 chars length.\"});\n\t\tnode += app.getField(app.icons.code, \"Arduino Source Code\", content, {type: \"textarea\", id: \"Code\", isEdit: true});\n\t\tnode += \"\t</div>\";\n\t\tnode += \"</section>\";\n\t\t\n\t\tvar btnId = [app.getUniqueId(), app.getUniqueId(), app.getUniqueId()];\n\t\tnode += \"<section class='mdl-grid mdl-cell--12-col fixedActionButtons' data-id='\"+source.id+\"'>\";\n\t\tif( app.isLtr() ) {\n\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t}\n\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-left'>\";\n\t\tnode += \"\t\t<button id='\"+btnId[0]+\"' class='back-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+source.id+\"'>\";\n\t\tnode += \"\t\t\t<i class='material-icons'>chevron_left</i>\";\n\t\tnode += \"\t\t\t<label>List</label>\";\n\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[0]+\"'>List all Sources</label>\";\n\t\tnode += \"\t\t</button>\";\n\t\tnode += \"\t</div>\";\n\t\tnode += \"\t<div class='mdl-cell--1-col-phone pull-right'>\";\n\t\tnode += \"\t\t<button id='\"+btnId[1]+\"' class='add-button mdl-cell mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect' data-id='\"+source.id+\"'>\";\n\t\tnode += \"\t\t\t<i class='material-icons'>edit</i>\";\n\t\tnode += \"\t\t\t<label>Save</label>\";\n\t\tnode += \"\t\t\t<div class='mdl-tooltip mdl-tooltip--top' for='\"+btnId[1]+\"'>Save new Source</label>\";\n\t\tnode += \"\t\t</button>\";\n\t\tnode += \"\t</div>\";\n\t\tif( !app.isLtr() ) {\n\t\t\tnode += \"\t<div class='mdl-layout-spacer'></div>\";\n\t\t}\n\t\tnode += \"</section>\";\n\n\t\t(app.containers.source_add).querySelector(\".page-content\").innerHTML = node;\n\t\tcomponentHandler.upgradeDom();\n\n\t\tapp.refreshButtonsSelectors();\n\t\tapp.buttons.addSourceBack.addEventListener(\"click\", function(evt) { app.setSection(\"sources\"); evt.preventDefault(); }, false);\n\t\tapp.buttons.addSource.addEventListener(\"click\", function(evt) { app.resources.sources.onAdd(evt); }, false);\n\t\tapp.setExpandAction();\n\t},\n\tdisplayItem: function(source) {\n\t\tvar type = \"sources\";\n\t\tvar name = source.attributes.name!==undefined?source.attributes.name:\"\";\n\t\tvar content = source.attributes.content!==undefined?source.attributes.content.substring(0, app.cardMaxChars):\"\";\n\n\t\tvar element = \"\";\n\t\telement += \"<div class=\\\"mdl-grid mdl-cell\\\" data-action=\\\"view\\\" data-type=\\\"\"+type+\"\\\" data-id=\\\"\"+source.id+\"\\\">\";\n\t\telement += \"\t<div class=\\\"mdl-card mdl-shadow--2dp\\\">\";\n\t\telement += \"\t\t<div class=\\\"mdl-card__title\\\">\";\n\t\telement += \"\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.sources+\"</i>\";\n\t\telement += \"\t\t\t<h3 class=\\\"mdl-card__title-text\\\">\"+name+\"</h3>\";\n\t\telement += \"\t\t</div>\";\n\t\telement += app.getField(null, null, content, {type: \"textarea\", isEdit: false});\n\t\telement += \"\t\t<div class=\\\"mdl-card__actions mdl-card--border\\\">\";\n\t\telement += \"\t\t\t<span class=\\\"pull-left mdl-card__date\\\">\";\n\t\telement += \"\t\t\t\t<button data-id=\\\"\"+source.id+\"\\\" class=\\\"swapDate mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect\\\">\";\n\t\telement += \"\t\t\t\t\t<i class=\\\"material-icons\\\">update</i>\";\n\t\telement += \"\t\t\t\t</button>\";\n\t\telement += \"\t\t\t\t<span data-date=\\\"created\\\" class=\\\"visible\\\">Created on \"+moment(source.attributes.meta.created).format(app.date_format) + \"</span>\";\n\t\tif ( source.attributes.meta.updated ) {\n\t\t\telement += \"\t\t\t\t<span data-date=\\\"updated\\\" class=\\\"hidden\\\">Updated on \"+moment(source.attributes.meta.updated).format(app.date_format) + \"</span>\";\n\t\t} else {\n\t\t\telement += \"\t\t\t\t<span data-date=\\\"updated\\\" class=\\\"hidden\\\">Never been updated yet.</span>\";\n\t\t}\n\t\telement += \"\t\t\t</span>\";\n\t\telement += \"\t\t\t<span class=\\\"pull-right mdl-card__menuaction\\\">\";\n\t\telement += \"\t\t\t\t<button id=\\\"menu_\"+source.id+\"\\\" class=\\\"mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect\\\">\";\n\t\telement += \"\t\t\t\t\t<i class=\\\"material-icons\\\">\"+app.icons.menu+\"</i>\";\n\t\telement += \"\t\t\t\t</button>\";\n\t\telement += \"\t\t\t</span>\";\n\t\telement += \"\t\t\t<ul class=\\\"mdl-menu mdl-menu--top-right mdl-js-menu mdl-js-ripple-effect\\\" for=\\\"menu_\"+source.id+\"\\\">\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item delete-button\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons delete-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+source.id+\"\\\" data-name=\\\"\"+name+\"\\\">\"+app.icons.delete+\"</i>Delete</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons edit-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+source.id+\"\\\" data-name=\\\"\"+name+\"\\\">\"+app.icons.edit+\"</i>Edit</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t\t<li class=\\\"mdl-menu__item\\\">\";\n\t\telement += \"\t\t\t\t\t<a class='mdl-navigation__link'><i class=\\\"material-icons copy-button mdl-js-button mdl-js-ripple-effect\\\" data-id=\\\"\"+source.id+\"\\\">\"+app.icons.copy+\"</i><textarea class=\\\"copytextarea\\\">\"+source.id+\"</textarea>Copy ID to clipboard</a>\";\n\t\telement += \"\t\t\t\t</li>\";\n\t\telement += \"\t\t\t</ul>\";\n\t\telement += \"\t\t</div>\";\n\t\telement += \"\t</div>\";\n\t\telement += \"</div>\";\n\n\t\treturn element;\n\t}\n};","\"use strict\";\nvar snippet = {\n\tname: \"valueDisplay\",\n\tvalue: \"Value Display\",\n\n\toptions: {\n\t\twidth: {default_value: \"6\", type: \"select\", available_values: [\"4\", \"6\", \"8\", \"12\"]},\n\t\tcolor: {defaultValue: \"#FF0000\", type: \"text\"},\n\t\tlegend: {defaultValue: \"top\", type: \"select\", availableValues: [true, false, \"top\", \"bottom\"]}\n\t},\n\tactivateOnce: function(params) {\n\t\tif ( typeof params.attributes.options !== \"undefined\" ) {\n\t\t\tthis.options.width.value = typeof params.attributes.options.width.value!==\"undefined\"?params.attributes.options.width.value:this.options.width.default_value;\n\t\t} else {\n\t\t\tthis.options.width.value = \"12\";\n\t\t}\n\t\tdocument.getElementById(params.id).parentNode.classList.add(\"mdl-cell--\" + this.options.width.value + \"-col\");\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"GET\", headers: myHeaders };\n\t\tvar limit = 4;\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/data/\"+params.attributes.flows[0]+\"?sort=desc&limit=\"+limit;\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){\n\t\t\treturn fetchResponse.json();\n\t\t}).then(function(response) {\n\t\t\tvar id = response.data[0].attributes.id;\n\t\t\tvar time = response.data[0].attributes.time;\n\t\t\tvar unit = typeof response.links.unit!==\"undefined\"?response.links.unit:\"\";\n\t\t\tvar ttl = response.links.ttl;\n\t\t\tvar value = [];\n\t\t\tfor (var i=0; i<limit-1; i++) {\n\t\t\t\tvar cur = i;\n\t\t\t\tvar prev = i+1;\n\t\t\t\tif ( response.data[cur].attributes.value === response.data[prev].attributes.value ) {\n\t\t\t\t\tvalue[prev] = \"<i class='material-icons md-48'>trending_flat</i> \" + sprintf(unit, response.data[cur].attributes.value);\n\t\t\t\t} else if( response.data[cur].attributes.value < response.data[prev].attributes.value ) {\n\t\t\t\t\tvalue[prev] = \"<i class='material-icons md-48'>trending_down</i> \" + sprintf(unit, response.data[cur].attributes.value);\n\t\t\t\t} else if( response.data[cur].attributes.value > response.data[prev].attributes.value ) {\n\t\t\t\t\tvalue[prev] = \"<i class='material-icons md-48'>trending_up</i> \" + sprintf(unit, response.data[cur].attributes.value);\n\t\t\t\t}\n\t\t\t\tif ( moment().subtract(ttl, \"seconds\") > moment(time) ) {\n\t\t\t\t\tdocument.getElementById(\"snippet-value\"+prev+\"-\"+params.id).parentNode.parentNode.parentNode.classList.remove(\"is-ontime\");\n\t\t\t\t\tdocument.getElementById(\"snippet-value\"+prev+\"-\"+params.id).parentNode.parentNode.parentNode.classList.add(\"is-outdated\");\n\t\t\t\t} else {\n\t\t\t\t\tdocument.getElementById(\"snippet-value\"+prev+\"-\"+params.id).parentNode.parentNode.parentNode.classList.remove(\"is-outdated\");\n\t\t\t\t\tdocument.getElementById(\"snippet-value\"+prev+\"-\"+params.id).parentNode.parentNode.parentNode.classList.add(\"is-ontime\");\n\t\t\t\t}\n\t\t\t\tdocument.getElementById(\"snippet-value\"+prev+\"-\"+params.id).innerHTML = value[prev];\n\t\t\t}\n\t\t\tsetInterval(function() {app.refreshFromNow(\"snippet-time-\"+params.id, time, true);}, 2000);\n\t\t}).catch(function (error) {\n\t\t\tif ( localStorage.getItem(\"settings.debug\") == \"true\" ) {\n\t\t\t\ttoast(\"getSnippet Inside error...\" + error, {timeout:3000, type: \"error\"});\n\t\t\t}\n\t\t});\n\t},\n\tgetHtml: function(params) {\n\t\tif (!params) {\n\t\t\tparams = {};\n\t\t}\n\t\tparams.time = moment().format(app.date_format);\n\t\tvar html = `\n\t\t<div id=\"${params.id}\" class=\"valuedisplay tile card-valuedisplay material-animate margin-top-4 material-animated mdl-shadow--2dp is-ontime\">\n\t\t\t<div class=\"contextual\">\n\t\t\t\t<div class=\"mdl-list__item-primary-content\">\n\t\t\t\t\t<i class=\"material-icons\">${params.icon}</i>\n\t\t\t\t\t<span class=\"heading\">${params.name}</span>\n\t\t\t\t\t<span class=\"heading pull-right\">\n\t\t\t\t\t\t<button data-snippet-id=\"${params.id}\" class=\"edit-snippet mdl-button mdl-js-button mdl-button--icon\">\n\t\t\t\t\t\t\t<i class=\"material-icons\">settings</i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"mdl-list__item-secondary-content\">\n\t\t\t\t\t<span class=\"snippet-value1\" id=\"snippet-value1-${params.id}\" style=\"color:${params.color} !important\">\n\t\t\t\t\t\t<i class=\"material-icons md-48\">trending_flat</i> ◾◾ ◾◾\n\t\t\t\t\t</span>\n\t\t\t\t\t<hr style=\"\">\n\t\t\t\t\t<span class=\"snippet-value2\" id=\"snippet-value2-${params.id}\" style=\"color:${params.color} !important\">\n\t\t\t\t\t\t<i class=\"material-icons\">trending_flat</i> ◾◾ ◾◾\n\t\t\t\t\t</span>\n\t\t\t\t\t<hr style=\"\">\n\t\t\t\t\t<span class=\"snippet-value3\" id=\"snippet-value3-${params.id}\" style=\"color:${params.color} !important\">\n\t\t\t\t\t\t<i class=\"material-icons\">trending_flat</i> ◾◾ ◾◾\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"mdl-list__item-sub-title\" id=\"snippet-time-${params.id}\">◾◾/◾◾/◾◾◾◾ ◾◾:◾◾:◾◾</div>\n\t\t</div>`;\n\t\treturn html;\n\t},\n};\nsnippet.getOptions = function(s) { return s.options; };\nsnippet.setOptions = function(opt) {\n\tvar merged = {};\n\tvar s = this;\n\tfor (var attrname in s.options) { merged[attrname] = s.options[attrname]; }\n\tfor (var attrname in opt) { merged[attrname] = opt[attrname]; }\n\tthis.options = merged;\n\treturn merged;\n};\napp.snippetTypes.push(snippet);","\"use strict\";\nvar snippet = {\n\tname: \"graphDisplay\",\n\tvalue: \"Graph DEPRECATED !!!!\",\n\n\toptions: {\n\t\twidth: {default_value: \"12\", type: \"select\", available_values: [\"4\", \"6\", \"8\", \"12\"]},\n\t},\n\tactivateOnce: function(params) {\n\t},\n\tgetHtml: function(params) {\n\t},\n};","\"use strict\";\nvar snippet = {\n\tname: \"flowgraph\",\n\tvalue: \"Graph a Flow over axis\",\n\toptions: {\n\t\twidth: {default_value: \"12\", type: \"select\", available_values: [\"4\", \"6\", \"8\", \"12\"]},\n\t\ttype: {default_value: \"line\", type: \"select\", available_values: [\"bar\", \"line\", \"radar\", \"pie\", \"polarArea\", \"bubble\", \"scatter\"]},\n\t\tcolor: {default_value: \"#FF0000\", type: \"text\"},\n\t\tlegend_font_color: {default_value: \"#FF0000\", type: \"text\"},\n\t\tborder_color: {default_value: \"#FF0000\", type: \"text\"},\n\t\tborder_width: {default_value: 4, type: \"select\", available_values: [2, 4, 6, 8, 10, 12]},\n\t\tbackground_color: {default_value: \"#FF0000\", type: \"text\"},\n\t\tpoint_background_color: {default_value: \"#FF0000\", type: \"text\"},\n\t\tlimit: {default_value: 15, type: \"integer\"},\n\t\tfill: {default_value: false, type: \"switch\", available_values: [true, false, \"origin\", \"start\", \"end\"]},\n\t\tshow_line: {default_value: false, type: \"switch\", available_values: [true, false]},\n\t\tstepped_line: {default_value: false, type: \"select\", available_values: [true, false, \"before\", \"after\"]},\n\n\t\ttitle_display: {default_value: false, type: \"switch\", available_values: [true, false]},\n\t\ttitle_font_size: {default_value: 12, type: \"integer\"},\n\t\ttitle_font_family: {default_value: \"Helvetica\", type: \"select\", available_values: [\"Helvetica\", \"Helvetica Neue\", \"Arial\", \"sans-serif\"]},\n\n\t\tlegend_display: {default_value: false, type: \"select\", available_values: [true, false]},\n\t\tlegend_position: {default_value: false, type: \"select\", available_values: [\"top\", \"bottom\", \"left\", \"right\"]},\n\t\tlegend_align: {default_value: false, type: \"select\", available_values: [\"start\", \"center\", \"end\"]},\n\t},\n\tactivateOnce: function(params) {\n\t\tif ( typeof params.attributes.options !== \"undefined\" ) {\n\t\t\tthis.options.width.value = typeof params.attributes.options.width.value!==\"undefined\"?params.attributes.options.width.value:this.options.width.default_value;\n\t\t} else {\n\t\t\tthis.options.width.value = \"12\";\n\t\t}\n\t\tdocument.getElementById(params.id).parentNode.classList.add(\"mdl-cell--\" + this.options.width.value + \"-col\");\n\t\tvar myHeaders = new Headers();\n\t\tmyHeaders.append(\"Authorization\", \"Bearer \"+localStorage.getItem(\"bearer\"));\n\t\tmyHeaders.append(\"Content-Type\", \"application/json\");\n\t\tvar myInit = { method: \"GET\", headers: myHeaders };\n\t\tvar opt = this.getOptions(this);\n\t\tvar limit = opt.limit&&typeof opt.limit.value!==\"undefined\"?opt.limit.value:5;\n\t\tvar url = app.baseUrl+\"/\"+app.api_version+\"/data/\"+params.attributes.flows[0]+\"?sort=desc&limit=\"+limit;\n\t\tlet ctx;\n\t\tfetch(url, myInit)\n\t\t.then(\n\t\t\tapp.fetchStatusHandler\n\t\t).then(function(fetchResponse){\n\t\t\treturn fetchResponse.json();\n\t\t})\n\t\t.then(function(response) {\n\t\t\tlet c = document.getElementById(\"chart-\"+params.id);\n\t\t\tc.height = 250;\n\t\t\tctx = c.getContext(\"2d\");\n\t\t\tlet datapoints = [];\n\t\t\tif( typeof response.data!==\"undefined\" && response.data.type!==\"errors\" ) {\n\t\t\t\tresponse.data.forEach(function(d) {\n\t\t\t\t\tdatapoints.push({ x: new Date(d.attributes.timestamp), y: d.attributes.value });\n\t\t\t\t});\n\t\t\t\tlet type = opt.type&&typeof opt.type.value!==\"undefined\"?opt.type.value:opt.type.default_value;\n\t\t\t\tlet unit = \" (\"+sprintf(typeof response.links.unit!==\"undefined\"?response.links.unit:\"\", \"\")+\")\";\n\t\t\t\tlet data = {\n\t\t\t\t\tdatasets: [{\n\t\t\t\t\t\tlabel: typeof params.flowNames!==\"undefined\"?params.flowNames[0]:\"\",\n\t\t\t\t\t\tbackgroundColor: opt.background_color&&typeof opt.background_color.value!==\"undefined\"?opt.background_color.value:opt.background_color.default_value,\n\t\t\t\t\t\tborderColor: opt.border_color&&typeof opt.border_color.value!==\"undefined\"?opt.border_color.value:opt.border_color.default_value,\n\t\t\t\t\t\tborderWidth: opt.border_width&&typeof opt.border_width.value!==\"undefined\"?opt.border_width.value:opt.border_width.default_value,\n\t\t\t\t\t\tfill: opt.fill&&typeof opt.fill.value!==\"undefined\"?opt.fill.value:opt.fill.default_value,\n\t\t\t\t\t\tshowLine: opt.show_line&&typeof opt.show_line.value!==\"undefined\"?opt.show_line.value:opt.show_line.default_value,\n\t\t\t\t\t\tsteppedLine: opt.stepped_line&&typeof opt.stepped_line.value!==\"undefined\"?opt.stepped_line.value:opt.stepped_line.default_value,\n\t\t\t\t\t\tpointStyle: \"rectRounded\",\n\t\t\t\t\t\thoverRadius: 10,\n\t\t\t\t\t\tpointBackgroundColor: opt.point_background_color&&typeof opt.point_background_color.value!==\"undefined\"?opt.point_background_color.value:opt.point_background_color.default_value,\n\t\t\t\t\t\tdata: datapoints,\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t\tlet options = {\n\t\t\t\t\ttitle: {\n\t\t\t\t\t\tdisplay: opt.title_display&&typeof opt.title_display.value!==\"undefined\"?opt.title_display.value:opt.title_display.default_value,\n\t\t\t\t\t\ttext: typeof params.flowNames!==\"undefined\"?params.flowNames[0]:\"Snippet Title\",\n\t\t\t\t\t\tfontSize: opt.title_font_size&&typeof opt.title_font_size.value!==\"undefined\"?opt.title_font_size.value:opt.title_font_size.default_value,\n\t\t\t\t\t\tfontFamily: opt.title_font_family&&typeof opt.title_font_family.value!==\"undefined\"?opt.title_font_family.value:opt.title_font_family.default_value,\n\t\t\t\t\t},\n\t\t\t\t\tlegend: {\n\t\t\t\t\t\tdisplay: opt.legend_display&&typeof opt.legend_display.value!==\"undefined\"?opt.legend_display.value:opt.legend_display.default_value,\n\t\t\t\t\t\tposition: opt.legend_position&&typeof opt.legend_position.value!==\"undefined\"?opt.legend_position.value:opt.legend_position.default_value,\n\t\t\t\t\t\t\t\talign: opt.legend_align&&typeof opt.legend_align.value!==\"undefined\"?opt.legend_align.value:opt.legend_align.default_value,\n\t\t\t\t\t\tlabels: {\n\t\t\t\t\t\t\tfontColor: opt.legend_font_color&&typeof opt.legend_font_color.value!==\"undefined\"?opt.legend_font_color.value:opt.legend_font_color.default_value\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ttooltips: {\n\t\t\t\t\t\tenable: false\n\t\t\t\t\t},\n\t\t\t\t\tscales: {\n\t\t\t\t\t\txAxes: [{\n\t\t\t\t\t\t\ttype: \"time\",\n\t\t\t\t\t\t\ttime: {\n\t\t\t\t\t\t\t\tunit: \"hour\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\tsource: \"auto\",\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}]\n\t\t\t\t\t},\n\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\tresponsive: true,\n\t\t\t\t\tanimation: { duration: 0, },\n\t\t\t\t};\n\t\t\t\tnew Chart(ctx, {\n\t\t\t\t\ttype: type,\n\t\t\t\t\tdata: data,\n\t\t\t\t\toptions: options\n\t\t\t\t});\n\t\t\t\tlet id = response.data[0].attributes.id;\n\t\t\t\tlet time = response.data[0].attributes.time;\n\t\t\t\tdocument.getElementById(\"unit-\"+params.id).innerHTML = unit;\n\t\t\t\tsetInterval(function() {app.refreshFromNow(\"snippet-time-\"+params.id, time, true);}, 2000);\n\t\t\t} else {\n\t\t\t\tc.getContext(\"2d\").textAlign = \"center\";\n\t\t\t\tc.getContext(\"2d\").fillText(\"Data error occured; please check Snippet settings :-(\", c.width/2, c.height/2);\n\t\t\t}\n\t\t})\n\t\t.catch(function (error) {\n\t\t\tif ( localStorage.getItem(\"settings.debug\") == \"true\" ) {\n\t\t\t\ttoast(\"getSnippet Inside error...\" + error, {timeout:3000, type: \"error\"});\n\t\t\t}\n\t\t});\n\t},\n\tgetHtml: function(params) {\n\t\tif (!params) {\n\t\t\tparams = {};\n\t\t}\n\t\tparams.unit;\n\t\tvar html = `\n\t\t<div id=\"${params.id}\" class=\"flowgraph tile card-flowgraph material-animate margin-top-4 material-animated mdl-shadow--2dp\">\n\t\t\t<div class=\"contextual\">\n\t\t\t\t<div class=\"mdl-list__item-primary-content\">\n\t\t\t\t\t<i class=\"material-icons\">${params.icon}</i>\n\t\t\t\t\t<span class=\"heading\">${params.name} <span id=\"unit-${params.id}\">(${params.unit})</span></span>\n\t\t\t\t\t<span class=\"heading pull-right\">\n\t\t\t\t\t\t<button data-snippet-id=\"${params.id}\" class=\"edit-snippet mdl-button mdl-js-button mdl-button--icon\">\n\t\t\t\t\t\t\t<i class=\"material-icons\">settings</i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"mdl-list__item-secondary-content\">\n\t\t\t\t\t<div class=\"mdl-list__item\" id=\"snippet-graph-${params.id}\" style=\"width:100%;\">\n\t\t\t\t\t\t<canvas id=\"chart-${params.id}\"></canvas>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"mdl-list__item-sub-title\" id=\"snippet-time-${params.id}\">◾◾/◾◾/◾◾◾◾ ◾◾:◾◾:◾◾</span>\n\t\t</div>`;\n\t\treturn html;\n\t},\n};\nsnippet.getOptions = function(s) { return s.options; };\nsnippet.setOptions = function(opt) {\n\tvar merged = {};\n\tfor (var attrname in this.options) { merged[attrname] = this.options[attrname]; }\n\tfor (var attrname in opt) { merged[attrname] = opt[attrname]; }\n\tthis.options = merged;\n\treturn merged;\n};\napp.snippetTypes.push(snippet);","\"use strict\";\nvar snippet = {\n\tname: \"simpleclock\",\n\tvalue: \"Realtime clock\",\n\t\n\toptions: {\n\t\twidth: {default_value: \"12\", type: \"select\", available_values: [\"4\", \"6\", \"8\", \"12\"]},\n\t\tcolor: {defaultValue: \"#FF0000\", type: \"text\"},\n\t\tlegend: {defaultValue: \"top\", type: \"select\", availableValues: [true, false, \"top\", \"bottom\"]}\n\t},\n\tactivateOnce: function(params) {\n\t\tif ( typeof params.attributes.options !== \"undefined\" ) {\n\t\t\tthis.options.width.value = typeof params.attributes.options.width.value!==\"undefined\"?params.attributes.options.width.value:this.options.width.default_value;\n\t\t} else {\n\t\t\tthis.options.width.value = \"12\";\n\t\t}\n\t\tdocument.getElementById(params.id).parentNode.classList.add(\"mdl-cell--\" + this.options.width.value + \"-col\");\n\t\tsetInterval(function() {app.refreshFromNow(\"snippet-clock-\"+params.id, moment(), null);}, 1000);\n\t},\n\tgetHtml: function(params) {\n\t\tif (!params) {\n\t\t\tparams = {}\n\t\t}\n\t\tparams.time = moment().format(app.date_format);\n\t\tvar html = `\n\t\t<div id=\"${params.id}\" class=\"clock tile card-simpleclock material-animate margin-top-4 material-animated mdl-shadow--2dp\">\n\t\t\t<span class='mdl-list__item mdl-list__item--two-line'>\n\t\t\t\t<span class='mdl-list__item-primary-content'>\n\t\t\t\t\t<i class='material-icons'>${params.icon}</i>\n\t\t\t\t\t<span class=\"heading\">${params.name}</span>\n\t\t\t\t\t<span class='mdl-list__item-sub-title' id='snippet-time-${params.id}'></span>\n\t\t\t\t</span>\n\t\t\t\t<span class='mdl-list__item-secondary-content'>\n\t\t\t\t\t<span class='mdl-list__item'>\n\t\t\t\t\t\t<span class='mdl-list__item-sub-title mdl-chip mdl-chip__text' id='snippet-clock-${params.id}'>◾◾/◾◾/◾◾◾◾ ◾◾:◾◾:◾◾</span>\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t</div>`;\n\t\treturn html;\n\t},\n};\nsnippet.getOptions = function(s) { return s.options; };\nsnippet.setOptions = function(opt) {\n\tvar merged = {};\n\tvar s = this;\n\tfor (var attrname in s.options) { merged[attrname] = s.options[attrname]; }\n\tfor (var attrname in opt) { merged[attrname] = opt[attrname]; }\n\tthis.options = merged;\n\treturn merged;\n};\napp.snippetTypes.push(snippet);","\"use strict\";\nvar snippet = {\n\tname: \"simplerow\",\n\tvalue: \"Display one row for each value\",\n\n\toptions: {\n\t\twidth: {default_value: \"12\", type: \"select\", available_values: [\"4\", \"6\", \"8\", \"12\"]},\n\t\tcolor: {defaultValue: \"#FF0000\", type: \"text\"},\n\t\tlegend: {defaultValue: \"top\", type: \"select\", availableValues: [true, false, \"top\", \"bottom\"]}\n\t},\n\tactivateOnce: function(params) {\n\t\tif ( typeof params.attributes.options !== \"undefined\" ) {\n\t\t\tthis.options.width.value = typeof params.attributes.options.width.value!==\"undefined\"?params.attributes.options.width.value:this.options.width.default_value;\n\t\t} else {\n\t\t\tthis.options.width.value = \"12\";\n\t\t}\n\t\tdocument.getElementById(params.id).parentNode.classList.add(\"mdl-cell--\" + this.options.width.value + \"-col\");\n\t},\n\tgetHtml: function(params) {\n\t\tif (!params) {\n\t\t\tparams = {};\n\t\t}\n\t\tparams.time = moment().format(app.date_format);\n\t\tvar html = `\n\t\t<div id=\"${params.id}\" class=\"simplerow tile card-simplerow material-animate margin-top-4 material-animated mdl-shadow--2dp\">\t\t\n\t\t\t<span class=\"mdl-list__item mdl-list__item--two-line\">\n\t\t\t\t<span class=\"mdl-list__item-primary-content\">\n\t\t\t\t\t<i class=\"material-icons\">widgets</i>\n\t\t\t\t\t<span class=\"heading\">${params.name}</span>\n\t\t\t\t\t<span class=\"mdl-list__item-sub-title\" id=\"snippet-time-${params.id}\">\n\t\t\t\t\t\t◾◾/◾◾/◾◾◾◾ ◾◾:◾◾:◾◾\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"mdl-list__item-secondary-content\">\n\t\t\t\t\t<span class=\"mdl-list__item-sub-title mdl-chip mdl-chip__text\" id=\"snippet-value-${params.id}\">\n\t\t\t\t\t\t${params.value}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"heading pull-right\">\n\t\t\t\t\t<button data-snippet-id=\"${params.id}\" class=\"edit-snippet mdl-button mdl-js-button mdl-button--icon\">\n\t\t\t\t\t\t<i class=\"material-icons\">settings</i>\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t</div>`;\n\t\treturn html;\n\t},\n};\nsnippet.getOptions = function(s) { return s.options; };\nsnippet.setOptions = function(opt) {\n\tvar merged = {};\n\tvar s = this;\n\tfor (var attrname in s.options) { merged[attrname] = s.options[attrname]; }\n\tfor (var attrname in opt) { merged[attrname] = opt[attrname]; }\n\tthis.options = merged;\n\treturn merged;\n};\napp.snippetTypes.push(snippet);","\"use strict\";\nvar snippet = {\n\tname: \"cardChart\",\n\tvalue: \"Chart on a card\",\n\n\toptions: {\n\t\twidth: {default_value: \"12\", type: \"select\", available_values: [\"4\", \"6\", \"8\", \"12\"]},\n\t\tcolor: {defaultValue: \"#FF0000\", type: \"text\"},\n\t\tlegend: {defaultValue: \"top\", type: \"select\", availableValues: [true, false, \"top\", \"bottom\"]}\n\t},\n\tgetSample: function() {\n\t\tvar params = {\n\t\t\t\n\t\t};\n\t\treturn snippet.getHtml(params);\n\t},\n\tactivateOnce: function(params) {\n\t\tif ( typeof params.attributes.options !== \"undefined\" ) {\n\t\t\tthis.options.width.value = typeof params.attributes.options.width.value!==\"undefined\"?params.attributes.options.width.value:this.options.width.default_value;\n\t\t} else {\n\t\t\tthis.options.width.value = \"12\";\n\t\t}\n\t\tdocument.getElementById(params.id).parentNode.classList.add(\"mdl-cell--\" + this.options.width.value + \"-col\");\n\t},\n\tgetHtml: function(params) {\n\t\tif (!params) {\n\t\t\tparams = {};\n\t\t}\n\t\t//else snippet += \"\t\t<div class='card-header' style='background: linear-gradient(60deg,#66bb6a,#66bb6a);'>\";\n\t\tvar html = `\n\t\t<div id=\"${params.id}\" class=\"card card-chart material-animate margin-top-4 material-animated mdl-shadow--2dp\">\n\t\t\t<div class=\"card-header\" style=\"background: ${params.color}\">\n\t\t\t<div class=\"ct-chart\" id=\"dailySalesChart\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"card-body\">\n\t\t\t\t<i class=\"material-icons\">${params.icon}</i>\n\t\t\t\t<h4 class=\"card-title\">${params.name}</h4>\n\t\t\t\t<p class=\"card-category\">Subtitle</p>\n\t\t\t</div>\n\t\t\t<div class=\"card-footer\">\n\t\t\t\t<div class=\"stats\">\n\t\t\t\t\t<i class=\"material-icons\" id=\"snippet-time-${params.id}\">access_time</i> Last\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>`;\n\t\treturn html;\n\t},\n};\nsnippet.getOptions = function(s) { return s.options; };\nsnippet.setOptions = function(opt) {\n\tvar merged = {};\n\tvar s = this;\n\tfor (var attrname in s.options) { merged[attrname] = s.options[attrname]; }\n\tfor (var attrname in opt) { merged[attrname] = opt[attrname]; }\n\tthis.options = merged;\n\treturn merged;\n};\napp.snippetTypes.push(snippet);","\"use strict\";\nvar snippet = {\n\tname: \"sparkline\",\n\tvalue: \"Spark line\",\n\n\toptions: {\n\t\twidth: {default_value: \"12\", type: \"select\", available_values: [\"4\", \"6\", \"8\", \"12\"]},\n\t\tcolor: {defaultValue: \"#FF0000\", type: \"text\"},\n\t\tlegend: {defaultValue: \"top\", type: \"select\", availableValues: [true, false, \"top\", \"bottom\"]}\n\t},\n\tactivateOnce: function(params) {\n\t\tif ( typeof params.attributes.options !== \"undefined\" ) {\n\t\t\tthis.options.width.value = typeof params.attributes.options.width.value!==\"undefined\"?params.attributes.options.width.value:this.options.width.default_value;\n\t\t} else {\n\t\t\tthis.options.width.value = \"12\";\n\t\t}\n\t\tdocument.getElementById(params.id).parentNode.classList.add(\"mdl-cell--\" + this.options.width.value + \"-col\");\n\t},\n\tgetHtml: function(params) {\n\t\tif (!params) {\n\t\t\tparams = {};\n\t\t}\n\t\tvar html = `\n\t\t<div id=\"${params.id}\" class=\"sparkline tile card-sparkline material-animate margin-top-4 material-animated mdl-shadow--2dp\">\n\t\t\t<span class=\"mdl-list__item mdl-list__item--two-line\">\n\t\t\t\t<span class=\"mdl-list__item-primary-content\">\n\t\t\t\t\t<i class=\"material-icons\">trending_up</i>\n\t\t\t\t\t<span class=\"heading\">${params.title}</span>\n\t\t\t\t\t<span class=\"mdl-list__item-sub-title\" id=\"snippet-time-${params.id}\">◾◾/◾◾/◾◾◾◾ ◾◾:◾◾:◾◾</span>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"mdl-list__item-secondary-content\">\n\t\t\t\t\t<span class=\"mdl-list__item-sub-title mdl-chip mdl-chip__text\" id=\"snippet-value-${params.id}\"></span>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"mdl-list__item\" id=\"snippet-sparkline-\" style=\"width:100%; height:200px;\">\n\t\t\t\t\t<span class=\"mdl-list__item-sub-title mdl-chip mdl-chip__text\">sparkline</span>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t</div>`;\n\t\treturn html;\n\t},\n};\nsnippet.getOptions = function(s) { return s.options; };\nsnippet.setOptions = function(opt) {\n\tvar merged = {};\n\tvar s = this;\n\tfor (var attrname in s.options) { merged[attrname] = s.options[attrname]; }\n\tfor (var attrname in opt) { merged[attrname] = opt[attrname]; }\n\tthis.options = merged;\n\treturn merged;\n};\napp.snippetTypes.push(snippet);"]}